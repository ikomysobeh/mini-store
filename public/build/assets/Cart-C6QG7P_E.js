import{d as q,E as tt,r as z,c as k,h as x,i as C,F as X,p as J,n as E,g as e,a as Q,q as et,t as o,e as a,u as t,o as m,J as T,b as g,f as w,w as A,B as st,k as at,l as S}from"./app-DPOYb9G5.js";import{N as ot}from"./Navbar-7EHL6Gxl.js";import{M as U,_ as rt}from"./Breadcrumb.vue_vue_type_script_setup_true_lang-DDxYCMb6.js";import{X as nt,S as P,_ as ct}from"./Separator.vue_vue_type_script_setup_true_lang-f3rsktJi.js";import{I as it}from"./info-tm8mBZ45.js";import{T as lt}from"./triangle-alert-iPdExIyJ.js";import{C as dt}from"./circle-x-CYgtak09.js";import{C as ut}from"./circle-check-big-DhST5-Tu.js";import{b as $,_ as K,a as W}from"./index-BIDGme3r.js";import{_ as O}from"./index-XlWXzLsc.js";import{A as mt}from"./arrow-left-BPlYSbta.js";import{u as G}from"./useLocale-06UT71hD.js";import{S as V}from"./star-DJHrpAUR.js";import{H as pt}from"./heart-By6OfRag.js";import{T as L}from"./trash-2-D983NLJK.js";import{P as H}from"./plus-Can9Gc8I.js";import{_ as ft}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as ht,_ as _t}from"./CardTitle.vue_vue_type_script_setup_true_lang-DBHYC2vi.js";import{C as R}from"./credit-card-B5IFwTn0.js";import{S as vt}from"./shield-Dy7eWDLP.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-Dmtm6CB-.js";import"./useForwardExpose-CElbg2eD.js";import"./index-Cg8e5mr3.js";import"./createContext-DjZME2PY.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-DTU2rUyk.js";import"./house-BEkyIQfJ.js";import"./chevron-right-BqFrrGfz.js";const gt={key:0,class:"space-y-4 mb-6"},xt={class:"p-4"},yt={class:"flex items-center justify-between"},bt={class:"flex items-center space-x-2"},Ct=["onClick"],$t=q({__name:"FlashMessages",props:{dismissible:{type:Boolean,default:!0}},setup(n){const _=tt(),r=z(new Set),u=k(()=>{const h=_.props.flash;return["success","error","warning","info"].filter(p=>h?.[p]&&!r.value.has(p)).map(p=>({type:p,message:h[p],id:`${p}-${Date.now()}`}))}),c=h=>{const l={success:{icon:ut,bgClass:"bg-primary/10",borderClass:"border-primary/20",iconClass:"text-primary",textClass:"text-primary-foreground"},error:{icon:dt,bgClass:"bg-destructive/10",borderClass:"border-destructive/20",iconClass:"text-destructive",textClass:"text-destructive"},warning:{icon:lt,bgClass:"bg-warning/10",borderClass:"border-warning/20",iconClass:"text-warning",textClass:"text-warning"},info:{icon:it,bgClass:"bg-secondary/10",borderClass:"border-secondary/20",iconClass:"text-secondary",textClass:"text-secondary"}};return l[h]||l.info},y=h=>{r.value.add(h)};return(h,l)=>u.value.length>0?(m(),x("div",gt,[(m(!0),x(X,null,J(u.value,p=>(m(),x("div",{key:p.id,class:E(`${c(p.type).borderClass} ${c(p.type).bgClass} border rounded-lg`)},[e("div",xt,[e("div",yt,[e("div",bt,[(m(),Q(et(c(p.type).icon),{class:E(`h-5 w-5 ${c(p.type).iconClass}`)},null,8,["class"])),e("p",{class:E(`text-sm font-medium ${c(p.type).textClass}`)},o(p.message),3)]),n.dismissible?(m(),x("button",{key:0,onClick:j=>y(p.type),class:E(`${c(p.type).iconClass} hover:opacity-70`)},[a(t(nt),{class:"h-4 w-4"})],10,Ct)):C("",!0)])])],2))),128))])):C("",!0)}}),kt={class:"flex items-center justify-between mb-8"},wt={class:"text-3xl font-bold flex items-center space-x-2"},It=q({__name:"CartPageHeader",props:{itemCount:{},isEmpty:{type:Boolean}},setup(n){const{t:_}=T();return(r,u)=>(m(),x("div",kt,[e("h1",wt,[a(t(P),{class:"h-8 w-8"}),e("span",null,o(t(_)("cart.title")),1),n.isEmpty?C("",!0):(m(),Q(t(O),{key:0,variant:"outline"},{default:g(()=>[w(o(n.itemCount)+" "+o(t(_)("cart.itemsInCart")),1)]),_:1}))]),a(t($),{variant:"outline",as:"a",href:"/products",class:"flex items-center space-x-2"},{default:g(()=>[a(t(mt),{class:"h-4 w-4"}),e("span",null,o(t(_)("cart.continueShopping")),1)]),_:1})]))}}),St={class:"w-32 h-32 bg-gradient-to-br from-muted to-muted/60 rounded-full flex items-center justify-center mx-auto mb-8 shadow-inner"},zt={class:"text-3xl font-bold mb-3"},qt={class:"text-muted-foreground mb-8 max-w-md mx-auto"},jt={class:"flex flex-col sm:flex-row gap-4 justify-center"},Et={class:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-6 max-w-2xl mx-auto"},Qt={class:"text-center p-4"},Tt={class:"w-12 h-12 bg-primary/20 rounded-full flex items-center justify-center mx-auto mb-3"},Ft={class:"text-center p-4"},Nt={class:"w-12 h-12 bg-destructive/20 rounded-full flex items-center justify-center mx-auto mb-3"},Pt={class:"text-center p-4"},Bt={class:"w-12 h-12 bg-secondary/20 rounded-full flex items-center justify-center mx-auto mb-3"},Mt=q({__name:"EmptyCart",props:{className:{default:""}},setup(n){const{t:_}=T(),{localizedUrl:r}=G();return(u,c)=>(m(),x("div",{class:E(`text-center py-16 ${n.className}`)},[e("div",St,[a(t(P),{class:"h-16 w-16 text-muted-foreground"})]),e("h2",zt,o(t(_)("cart.empty")),1),e("p",qt,o(t(_)("cart.emptyMessage")||"Looks like you haven't added anything to your cart yet. Start exploring our amazing products!"),1),e("div",jt,[a(t($),{as:"a",href:t(r)("/products"),size:"lg",class:"min-w-48"},{default:g(()=>[a(t(P),{class:"h-5 w-5 mr-2"}),w(" "+o(t(_)("home.shopNow")),1)]),_:1},8,["href"]),a(t($),{variant:"outline",as:"a",href:t(r)("/products?featured=true"),size:"lg"},{default:g(()=>[a(t(V),{class:"h-5 w-5 mr-2"}),w(" "+o(t(_)("home.featuredProducts")),1)]),_:1},8,["href"])]),e("div",Et,[e("div",Qt,[e("div",Tt,[a(t(P),{class:"h-6 w-6 text-primary"})]),c[0]||(c[0]=e("h3",{class:"font-semibold mb-1"},"Browse Products",-1)),c[1]||(c[1]=e("p",{class:"text-sm text-muted-foreground"},"Discover our wide range of quality products",-1))]),e("div",Ft,[e("div",Nt,[a(t(pt),{class:"h-6 w-6 text-destructive"})]),c[2]||(c[2]=e("h3",{class:"font-semibold mb-1"},"Check Wishlist",-1)),c[3]||(c[3]=e("p",{class:"text-sm text-muted-foreground"},"Items you've saved for later",-1))]),e("div",Pt,[e("div",Bt,[a(t(V),{class:"h-6 w-6 text-secondary"})]),c[4]||(c[4]=e("h3",{class:"font-semibold mb-1"},"Featured Items",-1)),c[5]||(c[5]=e("p",{class:"text-sm text-muted-foreground"},"Our handpicked recommendations",-1))])])],2))}}),Dt={class:"lg:col-span-2 space-y-4"},Lt={class:"flex justify-between items-center"},At={class:"text-sm text-muted-foreground"},Ot={class:"p-6 flex items-center space-x-4"},Ut={class:"flex-shrink-0"},Vt=["src","alt"],Ht={class:"flex-grow min-w-0"},Rt={class:"font-semibold text-lg mb-1"},Xt=["href"],Jt={class:"text-muted-foreground text-sm mb-2"},Kt={key:0,class:"text-sm text-muted-foreground space-y-1 mb-2"},Wt={key:0,class:"flex items-center gap-2"},Gt={class:"font-medium"},Yt={class:"flex items-center gap-1"},Zt={key:1,class:"flex items-center gap-2"},te={class:"font-medium"},ee={key:2,class:"text-xs text-gray-500"},se={class:"flex space-x-2 mb-2"},ae={class:"sm:hidden mt-4 flex items-center justify-between"},oe={class:"flex flex-col"},re={class:"text-lg font-bold text-primary"},ne={key:0,class:"text-sm text-muted-foreground line-through"},ce={class:"flex items-center space-x-2"},ie={class:"flex items-center border rounded-md"},le=["value","onInput","disabled"],de={class:"hidden sm:block text-right min-w-0"},ue={class:"text-lg font-bold text-primary"},me={key:0,class:"text-sm text-muted-foreground line-through"},pe={class:"hidden sm:flex items-center border rounded-md"},fe=["value","onInput","disabled"],he={class:"hidden sm:block text-right min-w-0"},_e={class:"text-lg font-bold"},ve={key:0,class:"text-xs text-muted-foreground"},ge={class:"hidden sm:block"},xe=q({__name:"CartItemsList",props:{cartItems:{},quantities:{},updatingItems:{}},emits:["incrementQuantity","decrementQuantity","updateQuantity","removeItem","clearCart"],setup(n,{emit:_}){const{t:r}=T(),u=n,c=_,y=z({});A(()=>u.cartItems,i=>{i.forEach(f=>{y.value[f.id]||(y.value[f.id]=u.quantities[f.id]||f.quantity||1)})},{immediate:!0}),A(()=>u.quantities,i=>{Object.keys(i).forEach(f=>{const s=parseInt(f);i[s]!==void 0&&(y.value[s]=i[s])})},{deep:!0});const h=i=>parseFloat(i.toString()).toFixed(2),l=i=>y.value[i.id]||i.quantity||1,p=(i,f)=>{const s=f.target,I=Math.max(1,parseInt(s.value)||1);y.value[i]=I;const b=u.cartItems.find(M=>M.id===i),B=u.quantities[i]||(b?b.quantity:1);I!==B&&c("updateQuantity",i,I)},j=i=>{const f=l(u.cartItems.find(s=>s.id===i));y.value[i]=f+1,c("incrementQuantity",i)},F=i=>{const f=l(u.cartItems.find(s=>s.id===i));f>1&&(y.value[i]=f-1,c("decrementQuantity",i))},N=i=>{const f=l(i);return i.price*f};return(i,f)=>(m(),x("div",Dt,[e("div",Lt,[e("p",At,o(n.cartItems.length)+" "+o(t(r)("cart.itemsInCart")),1),a(t($),{variant:"outline",size:"sm",onClick:f[0]||(f[0]=s=>c("clearCart")),class:"text-destructive hover:text-destructive"},{default:g(()=>[a(t(L),{class:"h-4 w-4 mr-2"}),w(" "+o(t(r)("cart.empty")),1)]),_:1})]),a(t(K),null,{default:g(()=>[a(t(W),{class:"p-0"},{default:g(()=>[(m(!0),x(X,null,J(n.cartItems,(s,I)=>(m(),x("div",{key:s.id,class:"border-b last:border-b-0"},[e("div",Ot,[e("div",Ut,[e("img",{src:s.product?.image||s.image||"/placeholder-product.jpg",alt:s.product?.name||s.name,class:"w-20 h-20 object-cover rounded-lg border"},null,8,Vt)]),e("div",Ht,[e("h3",Rt,[e("a",{href:`/products/${s.product?.slug||s.slug}`,class:"hover:text-primary transition-colors"},o(s.product?.name||s.name),9,Xt)]),e("p",Jt,o(s.product?.category?.name||s.category?.name||"Uncategorized"),1),s.variant_display?.has_variant?(m(),x("div",Kt,[s.variant_display.color_name?(m(),x("div",Wt,[e("span",Gt,o(t(r)("product.selectColor"))+":",1),e("div",Yt,[e("div",{class:"w-4 h-4 rounded-full border border-gray-300",style:st({backgroundColor:s.variant_display.color_hex})},null,4),e("span",null,o(s.variant_display.color_name),1)])])):C("",!0),s.variant_display.size_name?(m(),x("div",Zt,[e("span",te,o(t(r)("product.selectSize"))+":",1),e("span",null,o(s.variant_display.size_name),1)])):C("",!0),s.variant_display.sku?(m(),x("div",ee," SKU: "+o(s.variant_display.sku),1)):C("",!0)])):C("",!0),e("div",se,[s.product?.is_donatable?(m(),Q(t(O),{key:0,variant:"secondary",class:"text-xs"},{default:g(()=>[w(o(t(r)("cart.donationItem")),1)]),_:1})):C("",!0),s.product?.stock!==void 0&&s.product.stock<10?(m(),Q(t(O),{key:1,variant:"outline",class:"text-xs text-orange-600"},{default:g(()=>[w(o(t(r)("cart.onlyLeft",{count:s.product.stock})),1)]),_:2},1024)):C("",!0)]),e("div",ae,[e("div",oe,[e("span",re," $"+o(h(s.price)),1),s.original_price&&s.original_price>s.price?(m(),x("span",ne," $"+o(h(s.original_price)),1)):C("",!0)]),e("div",ce,[e("div",ie,[a(t($),{size:"sm",variant:"ghost",onClick:b=>F(s.id),disabled:n.updatingItems.has(s.id)||l(s)<=1,class:"h-8 w-8 p-0"},{default:g(()=>[a(t(U),{class:"h-3 w-3"})]),_:1},8,["onClick","disabled"]),e("input",{value:l(s),onInput:b=>p(s.id,b),disabled:n.updatingItems.has(s.id),class:"h-8 w-12 text-center border-0 text-sm bg-transparent focus:outline-none",type:"number",min:"1",max:"99"},null,40,le),a(t($),{size:"sm",variant:"ghost",onClick:b=>j(s.id),disabled:n.updatingItems.has(s.id),class:"h-8 w-8 p-0"},{default:g(()=>[a(t(H),{class:"h-3 w-3"})]),_:1},8,["onClick","disabled"])]),a(t($),{size:"sm",variant:"ghost",onClick:b=>c("removeItem",s.id),class:"text-destructive hover:text-destructive h-8 w-8 p-0"},{default:g(()=>[a(t(L),{class:"h-3 w-3"})]),_:1},8,["onClick"])])])]),e("div",de,[e("div",ue," $"+o(h(s.price)),1),s.original_price&&s.original_price>s.price?(m(),x("div",me," $"+o(h(s.original_price)),1)):C("",!0)]),e("div",pe,[a(t($),{size:"sm",variant:"ghost",onClick:b=>F(s.id),disabled:n.updatingItems.has(s.id)||l(s)<=1,class:"h-10 w-10 p-0"},{default:g(()=>[a(t(U),{class:"h-4 w-4"})]),_:1},8,["onClick","disabled"]),e("input",{value:l(s),onInput:b=>p(s.id,b),disabled:n.updatingItems.has(s.id),class:"h-10 w-16 text-center border-0 bg-transparent focus:outline-none",type:"number",min:"1",max:"99"},null,40,fe),a(t($),{size:"sm",variant:"ghost",onClick:b=>j(s.id),disabled:n.updatingItems.has(s.id),class:"h-10 w-10 p-0"},{default:g(()=>[a(t(H),{class:"h-4 w-4"})]),_:1},8,["onClick","disabled"])]),e("div",he,[e("div",_e," $"+o(h(N(s))),1),n.updatingItems.has(s.id)?(m(),x("div",ve,o(t(r)("cart.updating")),1)):C("",!0)]),e("div",ge,[a(t($),{size:"sm",variant:"ghost",onClick:b=>c("removeItem",s.id),class:"text-destructive hover:text-destructive",title:t(r)("cart.removeItem")},{default:g(()=>[a(t(L),{class:"h-4 w-4"})]),_:1},8,["onClick","title"])])])]))),128))]),_:1})]),_:1})]))}}),ye=ft(xe,[["__scopeId","data-v-3786dcd6"]]),be={class:"lg:col-span-1"},Ce={class:"sticky top-24 space-y-6"},$e={class:"flex justify-between text-base"},ke={class:"font-medium"},we={class:"flex justify-between text-xl font-bold"},Ie={class:"text-primary"},Se={key:0,class:"text-xs text-center text-muted-foreground"},ze={class:"flex items-center justify-center space-x-2 text-xs text-muted-foreground mt-4 p-3 bg-muted/50 rounded-lg"},qe=q({__name:"OrderSummary",props:{subtotal:{},shipping:{},total:{},itemCount:{},user:{},updatingItems:{}},emits:["proceedToCheckout","applyPromoCode"],setup(n,{emit:_}){const{t:r}=T(),u=n,c=_;z(""),z(!1),k(()=>u.shipping===0?100:Math.min(u.subtotal/50*100,100)),k(()=>Math.max(50-u.subtotal,0));const y=l=>parseFloat(l.toString()).toFixed(2),h=()=>{c("proceedToCheckout")};return(l,p)=>(m(),x("div",be,[e("div",Ce,[a(t(K),null,{default:g(()=>[a(t(ht),null,{default:g(()=>[a(t(_t),{class:"flex items-center space-x-2"},{default:g(()=>[a(t(R),{class:"h-5 w-5"}),e("span",null,o(t(r)("checkout.orderSummary")),1)]),_:1})]),_:1}),a(t(W),{class:"space-y-4"},{default:g(()=>[e("div",$e,[e("span",null,o(t(r)("cart.subtotal"))+" ("+o(n.itemCount)+" "+o(t(r)("cart.itemsInCart"))+")",1),e("span",ke,"$"+o(y(n.subtotal)),1)]),a(t(ct)),e("div",we,[e("span",null,o(t(r)("cart.total")),1),e("span",Ie,"$"+o(y(n.total)),1)]),a(t($),{onClick:h,size:"lg",class:"w-full mt-6",disabled:n.updatingItems.size>0},{default:g(()=>[a(t(R),{class:"h-4 w-4 mr-2"}),w(" "+o(n.user?t(r)("cart.proceedToCheckout"):t(r)("nav.login")+" & "+t(r)("cart.checkout")),1)]),_:1},8,["disabled"]),n.user?C("",!0):(m(),x("p",Se,o(t(r)("cart.youllBeRedirected")),1)),e("div",ze,[a(t(vt),{class:"h-3 w-3"}),e("span",null,o(t(r)("cart.secureCheckout")),1)])]),_:1})]),_:1})])]))}}),je={class:"min-h-screen bg-background text-foreground"},Ee={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Qe={class:"text-muted-foreground"},Te={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Fe={class:"bg-card text-card-foreground p-6 rounded-lg border border-border lg:col-span-2"},Ne={class:"bg-card text-card-foreground p-6 rounded-lg border border-border"},ls=q({__name:"Cart",props:{cart:{type:Object,default:null},categories:{type:Array,default:()=>[]},auth:{type:Object,default:()=>({})},settings:{type:Object,default:()=>({})}},setup(n){const{t:_}=T(),{localizedUrl:r}=G(),u=k(()=>n.cart?.items||[]),c=n.settings.site_name||"Elegant Store",y=n.auth.user,h=z(new Set),l=z({});A(u,d=>{d.forEach(v=>{l.value[v.id]||(l.value[v.id]=v.quantity)})},{immediate:!0});const p=k(()=>u.value.reduce((d,v)=>{const D=l.value[v.id]||v.quantity;return d+parseFloat(v.price||0)*D},0)),j=k(()=>p.value>50?0:9.99),F=k(()=>p.value),N=k(()=>u.value.length===0),i=k(()=>[{label:_("nav.home"),href:r("/")},{label:_("cart.title"),isActive:!0}]),f=(d,v)=>{if(v<1){b(d);return}v>99&&(v=99),l.value[d]=v,h.value.add(d),setTimeout(()=>{S.patch(r(`/cart/update/${d}`),{quantity:v},{preserveState:!0,preserveScroll:!0,onFinish:()=>{h.value.delete(d)},onError:D=>{console.error("Failed to update quantity:",D),l.value[d]=u.value.find(Z=>Z.id===d)?.quantity||1,h.value.delete(d)}})},500)},s=d=>{const v=l.value[d]||1;f(d,v+1)},I=d=>{const v=l.value[d]||1;f(d,v-1)},b=d=>{confirm(_("cart.remove")+"?")&&S.delete(r(`/cart/remove/${d}`),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{delete l.value[d]},onError:v=>{console.error("Failed to remove item:",v)}})},B=()=>{confirm(_("cart.empty")+"?")&&S.delete(r("/cart/clear"),{preserveState:!0,onSuccess:()=>{l.value={}},onError:d=>{console.error("Failed to clear cart:",d)}})},M=()=>{y?S.visit(r("/checkout")):S.visit(r("/login?redirect=checkout"))},Y=d=>{S.post(r("/cart/apply-promo"),{code:d},{preserveState:!0,preserveScroll:!0})};return(d,v)=>(m(),x("div",je,[a(t(at),{title:t(_)("cart.title")},null,8,["title"]),a(ot,{categories:n.categories,cartItems:u.value,user:t(y),siteName:t(c),settings:n.settings},null,8,["categories","cartItems","user","siteName","settings"]),e("div",Ee,[a($t,{dismissible:!0}),e("div",Qe,[a(rt,{items:i.value},null,8,["items"])]),a(It,{itemCount:u.value.length,isEmpty:N.value},null,8,["itemCount","isEmpty"]),N.value?(m(),Q(Mt,{key:0})):(m(),x("div",Te,[e("div",Fe,[a(ye,{cartItems:u.value,quantities:l.value,updatingItems:h.value,onIncrementQuantity:s,onDecrementQuantity:I,onUpdateQuantity:f,onRemoveItem:b,onClearCart:B},null,8,["cartItems","quantities","updatingItems"])]),e("div",Ne,[a(qe,{subtotal:p.value,shipping:j.value,total:F.value,itemCount:u.value.length,user:t(y),updatingItems:h.value,onProceedToCheckout:M,onApplyPromoCode:Y},null,8,["subtotal","shipping","total","itemCount","user","updatingItems"])])]))])]))}});export{ls as default};
