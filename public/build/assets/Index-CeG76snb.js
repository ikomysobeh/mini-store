import{_ as J}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Cw0dUj-z.js";import{d as U,c as G,h as S,F as T,p as D,a as O,b as g,e as n,u as i,g as e,t as f,n as B,o as y,i as P,f as $,q as K,r as w,w as q,k as Q,l as R}from"./app-BIsdkUFR.js";import{_ as Z}from"./PageHeader.vue_vue_type_script_setup_true_lang-oeEeif41.js";import{c as ee,a as L,_ as V,b as z}from"./index-1wb7NqwU.js";import{_ as te}from"./Input.vue_vue_type_script_setup_true_lang-2lXwBhL7.js";import{_ as se,a as le}from"./CardTitle.vue_vue_type_script_setup_true_lang-BbzwQhHq.js";import{S as ae}from"./search-B8PsoUUd.js";import{_ as re}from"./BulkActions.vue_vue_type_script_setup_true_lang-CwIsWbKO.js";import{_ as N}from"./index-BCDJER87.js";import{_ as oe,a as ne}from"./AvatarFallback.vue_vue_type_script_setup_true_lang-CzDr19WN.js";import{A as I}from"./arrow-up-down-Ch0iSnju.js";import{S as W}from"./Separator.vue_vue_type_script_setup_true_lang-BCygaSuc.js";import{H as de}from"./heart-Zb1J_MV3.js";import{E as ie}from"./eye-dsrP_Bt2.js";import{C as ue}from"./circle-x-DgcPig61.js";import{C as ce}from"./circle-check-big-CXEo-3Y7.js";import{P as me}from"./package-DtQNl1ka.js";import{C as M}from"./clock-BKo7x1Vx.js";import{_ as pe}from"./Pagination.vue_vue_type_script_setup_true_lang-CdKH50f7.js";import{F as fe}from"./filter-CpwJ4dWv.js";import{D as H}from"./download-C0CoSidE.js";import{R as ve}from"./refresh-cw-YHcqqrc4.js";import"./chevron-down-DVfPXNKi.js";import"./house-DH-e972f.js";import"./chevron-right-ChP98AYB.js";import"./arrow-left-CucpjXOn.js";import"./useForwardExpose-DfRgSPHl.js";import"./createContext-Cq00W1KP.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=ee("TruckIcon",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),be={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},ye={class:"flex items-center justify-between"},xe={class:"text-sm text-muted-foreground"},he={class:"text-2xl font-bold"},_e=U({__name:"StatsCards",props:{stats:{},currency:{default:"EUR"},locale:{default:"nl-NL"}},setup(o){const x=(u,m)=>m==="currency"?new Intl.NumberFormat(o.locale,{style:"currency",currency:o.currency}).format(u||0):m==="number"?(u||0).toLocaleString():u||0,d=G(()=>[{label:"Total Orders",value:o.stats.total,icon:"ShoppingCart",color:"blue",formatter:"number"},{label:"Revenue",value:o.stats.total_revenue,icon:"CheckCircle",color:"green",formatter:"currency"},{label:"Donations",value:o.stats.donations_total,icon:"Heart",color:"red",formatter:"currency"},{label:"Pending",value:o.stats.pending,icon:"Clock",color:"yellow",formatter:"number"}]),c=u=>{const m={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",red:"bg-red-100 text-red-600",yellow:"bg-yellow-100 text-yellow-600",purple:"bg-purple-100 text-purple-600"};return m[u]||m.blue};return(u,m)=>(y(),S("div",be,[(y(!0),S(T,null,D(d.value,p=>(y(),O(i(V),{key:p.label},{default:g(()=>[n(i(L),{class:"p-6"},{default:g(()=>[e("div",ye,[e("div",null,[e("p",xe,f(p.label),1),e("p",he,f(x(p.value,p.formatter)),1)]),e("div",{class:B(`p-3 rounded-full ${c(p.color)}`)},[...m[0]||(m[0]=[e("div",{class:"h-5 w-5"},"ðŸ“Š",-1)])],2)])]),_:2},1024)]),_:2},1024))),128))]))}}),Se={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},we={class:"space-y-2"},ke={class:"relative"},Ce={class:"space-y-2"},$e=["value"],Oe=["value"],Te={class:"space-y-2"},De=["value"],Fe=["value"],Ae={class:"space-y-2"},Re=["value"],Pe=["value"],Ue={class:"space-y-2"},Ee=U({__name:"OrdersFilters",props:{searchTerm:{},selectedStatus:{},selectedType:{},dateRange:{},showFilters:{type:Boolean}},emits:["update:searchTerm","update:selectedStatus","update:selectedType","update:dateRange","clearFilters","applyFilters"],setup(o,{emit:x}){const d=x,c=[{value:"",label:"All Status"},{value:"pending",label:"Pending"},{value:"processing",label:"Processing"},{value:"shipped",label:"Shipped"},{value:"delivered",label:"Delivered"},{value:"cancelled",label:"Cancelled"}],u=[{value:"",label:"All Types"},{value:"purchase",label:"Purchases"},{value:"donation",label:"Donations"}],m=[{value:"",label:"All Time"},{value:"today",label:"Today"},{value:"week",label:"This Week"},{value:"month",label:"This Month"},{value:"year",label:"This Year"}],p=h=>{d("update:searchTerm",h)},_=h=>{d("update:selectedStatus",h)},k=h=>{d("update:selectedType",h)},C=h=>{d("update:dateRange",h)};return(h,r)=>o.showFilters?(y(),O(i(V),{key:0,class:"mb-6"},{default:g(()=>[n(i(le),null,{default:g(()=>[n(i(se),{class:"text-lg"},{default:g(()=>[...r[5]||(r[5]=[$("Filters",-1)])]),_:1})]),_:1}),n(i(L),{class:"space-y-4"},{default:g(()=>[e("div",Se,[e("div",we,[r[6]||(r[6]=e("label",{class:"text-sm font-medium"},"Search Orders",-1)),e("div",ke,[n(i(ae),{class:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),n(i(te),{value:o.searchTerm,onInput:r[0]||(r[0]=s=>p(s.target.value)),placeholder:"Order ID, customer...",class:"pl-10"},null,8,["value"])])]),e("div",Ce,[r[7]||(r[7]=e("label",{class:"text-sm font-medium"},"Status",-1)),e("select",{value:o.selectedStatus,onChange:r[1]||(r[1]=s=>_(s.target.value)),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[(y(),S(T,null,D(c,s=>e("option",{key:s.value,value:s.value},f(s.label),9,Oe)),64))],40,$e)]),e("div",Te,[r[8]||(r[8]=e("label",{class:"text-sm font-medium"},"Type",-1)),e("select",{value:o.selectedType,onChange:r[2]||(r[2]=s=>k(s.target.value)),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[(y(),S(T,null,D(u,s=>e("option",{key:s.value,value:s.value},f(s.label),9,Fe)),64))],40,De)]),e("div",Ae,[r[9]||(r[9]=e("label",{class:"text-sm font-medium"},"Date Range",-1)),e("select",{value:o.dateRange,onChange:r[3]||(r[3]=s=>C(s.target.value)),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[(y(),S(T,null,D(m,s=>e("option",{key:s.value,value:s.value},f(s.label),9,Pe)),64))],40,Re)]),e("div",Ue,[r[11]||(r[11]=e("label",{class:"text-sm font-medium"},"Â ",-1)),n(i(z),{variant:"outline",onClick:r[4]||(r[4]=s=>d("clearFilters")),class:"w-full"},{default:g(()=>[...r[10]||(r[10]=[$(" Clear All ",-1)])]),_:1})])])]),_:1})]),_:1})):P("",!0)}}),Ne={class:"overflow-x-auto"},Ie={class:"w-full"},Be={class:"border-b bg-muted/30"},Le={class:"p-4 text-left"},Ve=["checked"],je={class:"p-4 text-left"},qe={class:"p-4 text-left"},Me={class:"p-4 text-left"},He={class:"p-4"},Ge=["checked","onChange"],ze={class:"p-4"},We={class:"space-y-1"},Xe={class:"font-medium"},Ye={class:"flex items-center space-x-2"},Je={class:"p-4"},Ke={class:"flex items-center space-x-3"},Qe={class:"font-medium text-sm"},Ze={class:"text-xs text-muted-foreground"},et={class:"p-4"},tt={class:"text-sm"},st={class:"font-medium"},lt={class:"text-muted-foreground"},at={class:"p-4"},rt={class:"font-medium"},ot={key:0,class:"text-xs text-green-600"},nt={class:"p-4"},dt={class:"text-xs text-muted-foreground mt-1"},it={class:"p-4"},ut={class:"p-4"},ct={class:"text-sm"},mt={class:"p-4 text-right"},pt={class:"flex items-center justify-end space-x-2"},ft={key:0,class:"text-center py-16"},vt={class:"w-24 h-24 bg-muted rounded-full flex items-center justify-center mx-auto mb-6"},gt=U({__name:"OrdersTable",props:{orders:{},selectedOrders:{},sortBy:{},sortDirection:{},currency:{},locale:{}},emits:["update:selectedOrders","toggleSort","updateOrderStatus"],setup(o,{emit:x}){const d=o,c=x,u=s=>new Intl.NumberFormat(d.locale||"nl-NL",{style:"currency",currency:d.currency||"EUR"}).format(s||0),m=s=>new Date(s).toLocaleDateString(d.locale||"nl-NL",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),p=s=>({pending:"bg-yellow-100 text-yellow-800 border-yellow-200",processing:"bg-blue-100 text-blue-800 border-blue-200",shipped:"bg-purple-100 text-purple-800 border-purple-200",delivered:"bg-green-100 text-green-800 border-green-200",cancelled:"bg-red-100 text-red-800 border-red-200"})[s]||"bg-gray-100 text-gray-800 border-gray-200",_=s=>({pending:M,processing:me,shipped:ge,delivered:ce,cancelled:ue})[s]||M,k=s=>({paid:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"})[s]||"bg-gray-100 text-gray-800",C=G(()=>d.orders.length>0&&d.selectedOrders.length===d.orders.length),h=()=>{C.value?c("update:selectedOrders",[]):c("update:selectedOrders",d.orders.map(s=>s.id))},r=s=>{const t=[...d.selectedOrders],a=t.indexOf(s);a>-1?t.splice(a,1):t.push(s),c("update:selectedOrders",t)};return(s,t)=>(y(),O(i(V),{class:"shadow-sm"},{default:g(()=>[n(i(L),{class:"p-0"},{default:g(()=>[e("div",Ne,[e("table",Ie,[e("thead",Be,[e("tr",null,[e("th",Le,[e("input",{type:"checkbox",checked:C.value,onChange:h,class:"rounded border-border"},null,40,Ve)]),e("th",je,[e("button",{onClick:t[0]||(t[0]=a=>c("toggleSort","id")),class:"flex items-center space-x-1 hover:text-primary font-medium"},[t[3]||(t[3]=e("span",null,"Order",-1)),n(i(I),{class:"h-4 w-4"})])]),t[6]||(t[6]=e("th",{class:"p-4 text-left font-medium"},"Customer",-1)),t[7]||(t[7]=e("th",{class:"p-4 text-left font-medium"},"Items",-1)),e("th",qe,[e("button",{onClick:t[1]||(t[1]=a=>c("toggleSort","total")),class:"flex items-center space-x-1 hover:text-primary font-medium"},[t[4]||(t[4]=e("span",null,"Total",-1)),n(i(I),{class:"h-4 w-4"})])]),t[8]||(t[8]=e("th",{class:"p-4 text-left font-medium"},"Payment",-1)),t[9]||(t[9]=e("th",{class:"p-4 text-left font-medium"},"Status",-1)),e("th",Me,[e("button",{onClick:t[2]||(t[2]=a=>c("toggleSort","created_at")),class:"flex items-center space-x-1 hover:text-primary font-medium"},[t[5]||(t[5]=e("span",null,"Date",-1)),n(i(I),{class:"h-4 w-4"})])]),t[10]||(t[10]=e("th",{class:"p-4 text-right font-medium"},"Actions",-1))])]),e("tbody",null,[(y(!0),S(T,null,D(o.orders,a=>(y(),S("tr",{key:a.id,class:"border-b hover:bg-muted/30 transition-colors"},[e("td",He,[e("input",{type:"checkbox",checked:o.selectedOrders.includes(a.id),onChange:F=>r(a.id),class:"rounded border-border"},null,40,Ge)]),e("td",ze,[e("div",We,[e("p",Xe,"#"+f(a.id),1),e("div",Ye,[a.is_donation?(y(),O(i(N),{key:0,variant:"outline",class:"text-xs"},{default:g(()=>[n(i(de),{class:"h-3 w-3 mr-1 text-red-500"}),t[11]||(t[11]=$(" Donation ",-1))]),_:1})):P("",!0)])])]),e("td",Je,[e("div",Ke,[n(i(oe),{class:"h-8 w-8"},{default:g(()=>[n(i(ne),{class:"bg-primary/10 text-primary text-sm"},{default:g(()=>[$(f(a.customer?.user?.name?.charAt(0)||"G"),1)]),_:2},1024)]),_:2},1024),e("div",null,[e("p",Qe,f(a.customer?.user?.name||"Guest Customer"),1),e("p",Ze,f(a.customer?.user?.email||a.email),1)])])]),e("td",et,[e("div",tt,[e("p",st,f(a.items?.length||0)+" items",1),e("p",lt,f(a.items?.reduce((F,E)=>F+parseInt(E.quantity.toString()),0)||0)+" qty ",1)])]),e("td",at,[e("div",rt,f(u(a.total)),1),a.discount&&a.discount>0?(y(),S("div",ot," -"+f(u(a.discount))+" discount ",1)):P("",!0)]),e("td",nt,[n(i(N),{class:B([k(a.payment_status),"text-xs px-2 py-1"])},{default:g(()=>[$(f(a.payment_status||"pending"),1)]),_:2},1032,["class"]),e("div",dt,f(a.payment_method||"N/A"),1)]),e("td",it,[n(i(N),{class:B([p(a.status),"text-xs px-2 py-1 border flex items-center w-fit"])},{default:g(()=>[(y(),O(K(_(a.status)),{class:"h-3 w-3 mr-1"})),$(" "+f(a.status),1)]),_:2},1032,["class"])]),e("td",ut,[e("div",ct,f(m(a.created_at)),1)]),e("td",mt,[e("div",pt,[n(i(z),{variant:"ghost",size:"sm",as:"a",href:`/admin/orders/${a.id}`,title:"View Order"},{default:g(()=>[n(i(ie),{class:"h-4 w-4"})]),_:1},8,["href"])])])]))),128))])]),o.orders.length===0?(y(),S("div",ft,[e("div",vt,[n(i(W),{class:"h-12 w-12 text-muted-foreground"})]),t[12]||(t[12]=e("h3",{class:"text-xl font-semibold mb-2"},"No orders found",-1)),t[13]||(t[13]=e("p",{class:"text-muted-foreground mb-6"}," Orders will appear here when customers place them ",-1))])):P("",!0)])]),_:1})]),_:1}))}}),bt={class:"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},zt=U({__name:"Index",props:{orders:{type:Object,required:!0},filters:{type:Object,default:()=>({})},stats:{type:Object,default:()=>({total:0,pending:0,processing:0,shipped:0,delivered:0,cancelled:0,total_revenue:0,donations_total:0})}},setup(o){const x=w(o.filters.search||""),d=w(o.filters.status||""),c=w(o.filters.type||""),u=w(o.filters.date_range||""),m=w(o.filters.sort||"created_at"),p=w(o.filters.direction||"desc"),_=w([]),k=w(!1);function C(){if(_.value.length===0){alert("Please select orders to export");return}const l=document.createElement("form");l.method="POST",l.action="/admin/orders/export-selected",l.style.display="none";const b=document.querySelector('meta[name="csrf-token"]');if(b){const v=document.createElement("input");v.type="hidden",v.name="_token",v.value=b.getAttribute("content"),l.appendChild(v)}_.value.forEach(v=>{const A=document.createElement("input");A.type="hidden",A.name="order_ids[]",A.value=v,l.appendChild(A)}),document.body.appendChild(l),l.submit(),document.body.removeChild(l),_.value=[]}function h(){const l=new URLSearchParams;x.value&&l.append("search",x.value),d.value&&l.append("status",d.value),c.value&&l.append("type",c.value),u.value&&l.append("date_range",u.value),window.open(`/admin/orders/export?${l.toString()}`,"_blank")}const r=[{label:"Filters",icon:fe,variant:"outline",onClick:()=>{k.value=!k.value}},{label:"Export All",icon:H,variant:"outline",onClick:h},{label:"Refresh",icon:ve,variant:"outline",onClick:t}],s=[{label:"Export Selected",icon:H,onClick:C}];function t(){const l={};x.value&&(l.search=x.value),d.value&&(l.status=d.value),c.value&&(l.type=c.value),u.value&&(l.date_range=u.value),m.value&&(l.sort=m.value),p.value&&(l.direction=p.value),R.get("/admin/orders",l,{preserveState:!0,preserveScroll:!0})}function a(){x.value="",d.value="",c.value="",u.value="",m.value="created_at",p.value="desc",R.get("/admin/orders")}function F(l){m.value===l?p.value=p.value==="asc"?"desc":"asc":(m.value=l,p.value="asc"),t()}function E(l,b){R.patch(`/admin/orders/${l}/status`,{status:b},{preserveScroll:!0})}function X(l){l&&R.visit(l,{preserveState:!0,preserveScroll:!1})}function Y(){_.value=[]}let j;return q(x,l=>{clearTimeout(j),j=setTimeout(()=>{t()},500)}),q([d,c,u],()=>{t()}),(l,b)=>(y(),O(J,{title:"Orders Management",breadcrumbs:l.breadcrumbs},{default:g(()=>[n(i(Q),{title:"Orders Management"}),n(Z,{title:"Orders",description:"Manage customer orders and donations",icon:i(W),"icon-color":"text-primary",actions:r},null,8,["icon"]),e("div",bt,[n(_e,{stats:o.stats,currency:"USD",locale:"en-US"},null,8,["stats"]),n(Ee,{"search-term":x.value,"onUpdate:searchTerm":b[0]||(b[0]=v=>x.value=v),"selected-status":d.value,"onUpdate:selectedStatus":b[1]||(b[1]=v=>d.value=v),"selected-type":c.value,"onUpdate:selectedType":b[2]||(b[2]=v=>c.value=v),"date-range":u.value,"onUpdate:dateRange":b[3]||(b[3]=v=>u.value=v),"show-filters":k.value,onClearFilters:a,onApplyFilters:t},null,8,["search-term","selected-status","selected-type","date-range","show-filters"]),n(re,{"selected-count":_.value.length,"item-name":"order",actions:s,onCancel:Y},null,8,["selected-count"]),n(gt,{orders:o.orders.data,"selected-orders":_.value,"onUpdate:selectedOrders":b[4]||(b[4]=v=>_.value=v),"sort-by":m.value,"sort-direction":p.value,currency:"USD",locale:"en-US",onToggleSort:F,onUpdateOrderStatus:E},null,8,["orders","selected-orders","sort-by","sort-direction"]),n(pe,{links:o.orders.links,onGoToPage:X},null,8,["links"])])]),_:1},8,["breadcrumbs"]))}});export{zt as default};
