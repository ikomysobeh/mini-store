import{a3 as y,a4 as O,a5 as P,a6 as T,c as w,a7 as S,r as v,w as E,N as b,H as U,d as C,K as _,a2 as F}from"./app-CdWJsdjD.js";import{i as R,m as $}from"./index-D4dNSDEJ.js";import{e as k,a as x}from"./index-DJvGgQ0r.js";function z(){let t=document.activeElement;if(t==null)return null;for(;t!=null&&t.shadowRoot!=null&&t.shadowRoot.activeElement!=null;)t=t.shadowRoot.activeElement;return t}function D(t){const e=y(),s=e?.type.emits,i={};return s?.length||console.warn(`No emitted event found. Please check component: ${e?.type.__name}`),s?.forEach(u=>{i[O(P(u))]=(...o)=>t(u,...o)}),i}function L(t){const e=y(),s=Object.keys(e?.type.props??{}).reduce((u,o)=>{const n=(e?.type.props[o]).default;return n!==void 0&&(u[o]=n),u},{}),i=T(t);return w(()=>{const u={},o=e?.vnode.props??{};return Object.keys(o).forEach(n=>{u[P(n)]=o[n]}),Object.keys({...s,...u}).reduce((n,l)=>(i.value[l]!==void 0&&(n[l]=i.value[l]),n),{})})}function Y(t,e){const s=L(t),i=e?D(e):{};return w(()=>({...s.value,...i}))}function G(t,e="reka"){return`${e}-${S?.()}`}function j(t,e){const s=v(t);function i(o){return e[s.value][o]??s.value}return{state:s,dispatch:o=>{s.value=i(o)}}}function V(t,e){const s=v({}),i=v("none"),u=v(t),o=t.value?"mounted":"unmounted";let n;const l=e.value?.ownerDocument.defaultView??k,{state:d,dispatch:c}=j(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),r=a=>{if(R){const m=new CustomEvent(a,{bubbles:!1,cancelable:!1});e.value?.dispatchEvent(m)}};E(t,async(a,m)=>{const N=m!==a;if(await b(),N){const A=i.value,f=h(e.value);a?(c("MOUNT"),r("enter"),f==="none"&&r("after-enter")):f==="none"||f==="undefined"||s.value?.display==="none"?(c("UNMOUNT"),r("leave"),r("after-leave")):m&&A!==f?(c("ANIMATION_OUT"),r("leave")):(c("UNMOUNT"),r("after-leave"))}},{immediate:!0});const p=a=>{const m=h(e.value),N=m.includes(CSS.escape(a.animationName)),A=d.value==="mounted"?"enter":"leave";if(a.target===e.value&&N&&(r(`after-${A}`),c("ANIMATION_END"),!u.value)){const f=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",n=l?.setTimeout(()=>{e.value?.style.animationFillMode==="forwards"&&(e.value.style.animationFillMode=f)})}a.target===e.value&&m==="none"&&c("ANIMATION_END")},M=a=>{a.target===e.value&&(i.value=h(e.value))},g=E(e,(a,m)=>{a?(s.value=getComputedStyle(a),a.addEventListener("animationstart",M),a.addEventListener("animationcancel",p),a.addEventListener("animationend",p)):(c("ANIMATION_END"),n!==void 0&&l?.clearTimeout(n),m?.removeEventListener("animationstart",M),m?.removeEventListener("animationcancel",p),m?.removeEventListener("animationend",p))},{immediate:!0}),I=E(d,()=>{const a=h(e.value);i.value=d.value==="mounted"?a:"none"});return U(()=>{g(),I()}),{isPresent:w(()=>["mounted","unmountSuspended"].includes(d.value))}}function h(t){return t&&getComputedStyle(t).animationName||"none"}var J=C({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(t,{slots:e,expose:s}){const{present:i,forceMount:u}=_(t),o=v(),{isPresent:n}=V(i,o);s({present:n});let l=e.default({present:n.value});l=$(l||[]);const d=y();if(l&&l?.length>1){const c=d?.parent?.type.name?`<${d.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${c}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(r=>`  - ${r}`).join(`
`)].join(`
`))}return()=>u.value||i.value||n.value?F(e.default({present:n.value})[0],{ref:c=>{const r=x(c);return typeof r?.hasAttribute>"u"||(r?.hasAttribute("data-reka-popper-content-wrapper")?o.value=r.firstElementChild:o.value=r),r}}):null}});export{J as P,D as a,Y as b,L as c,z as g,G as u};
