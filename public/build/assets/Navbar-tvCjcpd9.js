import{d as ae,r as b,c as _,H as le,I as oe,h as c,g as e,e as a,t as i,F as M,p as $,a as g,i as v,u as t,b as o,o as l,f,Y as N,n as A,l as S}from"./app-CtOeZm3Q.js";import{c as Z,b as u,E as re}from"./index-dgqChElI.js";import{_ as U}from"./index-CFYIl74C.js";import{S as z,L as F,M as ne,X as ie,_ as V,U as T}from"./Separator.vue_vue_type_script_setup_true_lang-DE6ePIgQ.js";import{_ as R,a as Y}from"./AvatarFallback.vue_vue_type_script_setup_true_lang-C0SnATGU.js";import{_ as P}from"./AvatarImage.vue_vue_type_script_setup_true_lang-B7EUnC_p.js";import{H as Q}from"./house-BrHmf67V.js";import{_ as ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=Z("HistoryIcon",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=Z("ShoppingBagIcon",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),ue={class:"sticky top-0 z-50 backdrop-blur-lg border-b bg-background/80"},fe={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},me={class:"flex items-center justify-between h-16"},ve={href:"/",class:"flex items-center space-x-3 group"},pe={key:0,class:"w-10 h-10 rounded-xl overflow-hidden flex items-center justify-center bg-white border"},ge=["src","alt"],ye={key:1,class:"w-10 h-10 bg-primary rounded-xl flex items-center justify-center"},he={class:"text-primary-foreground font-bold text-lg"},xe={class:"font-bold text-xl text-primary"},be={class:"hidden lg:flex space-x-4"},_e={class:"hidden md:flex items-center space-x-4"},we={key:0,class:"absolute right-0 mt-2 w-80 bg-popover border border-border rounded-md shadow-lg z-50"},ke={class:"px-4 py-3 border-b border-border"},Ce={class:"flex items-center justify-between"},je={key:0,class:"px-4 py-8 text-center"},Ie={key:1,class:"max-h-80 overflow-y-auto"},Le={class:"px-4 py-3 space-y-3"},Me=["src","alt"],$e={class:"flex-1 min-w-0"},Ne={class:"text-sm font-medium truncate"},Se={class:"text-xs text-muted-foreground"},Ue={class:"text-sm font-semibold"},ze={key:0,class:"text-center text-xs text-muted-foreground"},Ee={class:"px-4 py-3 border-t border-border space-y-3"},Oe={class:"flex justify-between items-center font-semibold"},De={class:"text-lg text-primary"},Be={key:0,class:"absolute right-0 mt-2 w-56 bg-popover border border-border rounded-md shadow-lg z-50"},He={class:"px-3 py-2 border-b border-border"},qe={class:"flex flex-col space-y-1"},Ae={class:"text-sm font-medium leading-none"},Fe={class:"text-xs text-muted-foreground leading-none"},Ve={class:"py-1"},Te=["disabled"],Re={class:"border-t border-border py-1"},Ye=["disabled"],Pe={key:2,class:"flex items-center space-x-2"},Qe={class:"md:hidden flex items-center space-x-2"},Xe={key:0,class:"md:hidden border-t py-4 space-y-2"},Ze={class:"flex flex-col space-y-2"},Ge={key:0,class:"space-y-2"},Je={key:1,class:"space-y-2"},Ke={class:"px-3 py-2 bg-muted/30 rounded-lg mx-2"},We={class:"flex items-center space-x-3"},et={class:"text-sm font-medium"},tt={class:"text-xs text-muted-foreground"},st={key:2,class:"space-y-2"},at=ae({__name:"Navbar",props:{categories:{type:Array,default:()=>[]},cartItems:{type:Array,default:()=>[]},user:{type:Object,default:null},siteName:{type:String,default:"Elegant Store"},settings:{type:Object,default:()=>({})}},setup(n){const y=b(!1),h=b(!1),p=b(!1),j=b(null),I=b(null),m=b(!1),w=_(()=>n.user?.avatar||null),k=_(()=>n.user?.name||"User"),E=_(()=>n.user?.email||""),O=_(()=>n.settings?.logo_url||null),x=_(()=>n.cartItems.reduce((d,s)=>d+(parseInt(s.quantity)||0),0)),G=_(()=>n.cartItems.reduce((d,s)=>{const r=parseFloat(s.price||0),se=parseInt(s.quantity||0);return d+r*se},0)),D=()=>"text-primary hover:bg-primary/10 hover:text-primary transition-all duration-300",B=d=>{j.value&&!j.value.contains(d.target)&&(h.value=!1),I.value&&!I.value.contains(d.target)&&(p.value=!1)},H=()=>{m.value||(h.value=!1,y.value=!1,m.value=!0,S.post("/logout",{},{onSuccess:()=>{window.location.href="/"},onError:d=>{console.error("Logout failed:",d),m.value=!1},onFinish:()=>{m.value=!1}}))},q=d=>d?.name?d.name.split(" ").map(s=>s[0]).join("").toUpperCase().substring(0,2):d?.email?.charAt(0).toUpperCase()||"U",J=()=>{y.value=!y.value,y.value&&(h.value=!1,p.value=!1)},K=()=>{h.value=!h.value,h.value&&(y.value=!1,p.value=!1)},W=()=>{p.value=!p.value,p.value&&(y.value=!1,h.value=!1)},ee=d=>{h.value=!1,p.value=!1,S.visit(d)},L=d=>parseFloat(d||0).toFixed(2),te=()=>{p.value=!1,S.visit("/cart")},C=()=>{y.value=!1};return le(()=>{document.addEventListener("click",B)}),oe(()=>{document.removeEventListener("click",B)}),(d,s)=>(l(),c("nav",ue,[e("div",fe,[e("div",me,[e("a",ve,[O.value?(l(),c("div",pe,[e("img",{src:O.value,alt:n.siteName+" Logo",class:"w-full h-full object-contain",onError:s[0]||(s[0]=r=>r.target.style.display="none")},null,40,ge)])):(l(),c("div",ye,[e("span",he,i(n.siteName.charAt(0)),1)])),e("span",xe,i(n.siteName),1)]),e("div",be,[(l(!0),c(M,null,$(n.categories,r=>(l(),g(t(u),{key:r.id,variant:"ghost",class:A(D()),as:"a",href:`/products?category=${r.slug}`},{default:o(()=>[f(i(r.name),1)]),_:2},1032,["class","href"]))),128))]),e("div",_e,[e("div",{class:"relative",ref_key:"cartDropdownRef",ref:I},[a(t(u),{variant:"outline",class:"relative",onClick:W},{default:o(()=>[a(t(z),{class:"h-5 w-5"}),x.value>0?(l(),g(t(U),{key:0,class:"absolute -top-2 -right-2 bg-primary text-primary-foreground min-w-5 h-5 flex items-center justify-center text-xs"},{default:o(()=>[f(i(x.value>99?"99+":x.value),1)]),_:1})):v("",!0)]),_:1}),a(N,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:o(()=>[p.value?(l(),c("div",we,[e("div",ke,[e("div",Ce,[s[3]||(s[3]=e("h3",{class:"text-sm font-semibold"},"Shopping Cart",-1)),a(t(U),{variant:"secondary"},{default:o(()=>[f(i(x.value)+" items",1)]),_:1})])]),n.cartItems.length===0?(l(),c("div",je,[a(t(z),{class:"h-12 w-12 text-muted-foreground mx-auto mb-2"}),s[4]||(s[4]=e("p",{class:"text-sm text-muted-foreground"},"Your cart is empty",-1))])):(l(),c("div",Ie,[e("div",Le,[(l(!0),c(M,null,$(n.cartItems.slice(0,3),r=>(l(),c("div",{key:r.id,class:"flex items-center space-x-3 p-2 bg-muted/30 rounded-lg"},[e("img",{src:r.product?.image||r.image||"/placeholder-product.jpg",alt:r.product?.name||r.name,class:"w-12 h-12 object-cover rounded-md border"},null,8,Me),e("div",$e,[e("p",Ne,i(r.product?.name||r.name),1),e("p",Se," Qty: "+i(r.quantity)+" Ã— $"+i(L(r.price)),1)]),e("span",Ue," $"+i(L((r.price||0)*(r.quantity||1))),1)]))),128)),n.cartItems.length>3?(l(),c("div",ze," +"+i(n.cartItems.length-3)+" more items ",1)):v("",!0)]),e("div",Ee,[e("div",Oe,[s[5]||(s[5]=e("span",null,"Total:",-1)),e("span",De,"$"+i(L(G.value)),1)]),a(t(u),{class:"w-full",onClick:te},{default:o(()=>[a(t(re),{class:"h-4 w-4 mr-2"}),s[6]||(s[6]=f(" View Cart ",-1))]),_:1}),a(t(u),{class:"w-full",variant:"outline",as:"a",href:"/checkout",onClick:s[1]||(s[1]=r=>p.value=!1)},{default:o(()=>[a(t(de),{class:"h-4 w-4 mr-2"}),s[7]||(s[7]=f(" Checkout ",-1))]),_:1})])]))])):v("",!0)]),_:1})],512),n.user?(l(),g(t(u),{key:0,variant:"outline",class:"relative",as:"a",href:"/my-orders",title:"My Orders"},{default:o(()=>[a(t(X),{class:"h-5 w-5"})]),_:1})):v("",!0),n.user?(l(),c("div",{key:1,class:"relative",ref_key:"userDropdownRef",ref:j},[a(t(u),{variant:"ghost",class:"relative h-10 w-10 rounded-full",onClick:K,disabled:m.value},{default:o(()=>[a(t(R),{class:"h-9 w-9"},{default:o(()=>[w.value?(l(),g(t(P),{key:0,src:w.value,alt:k.value},null,8,["src","alt"])):v("",!0),a(t(Y),{class:"bg-primary/10 text-primary"},{default:o(()=>[f(i(q(n.user)),1)]),_:1})]),_:1})]),_:1},8,["disabled"]),a(N,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:o(()=>[h.value?(l(),c("div",Be,[e("div",He,[e("div",qe,[e("p",Ae,i(k.value),1),e("p",Fe,i(E.value),1)])]),e("div",Ve,[e("button",{onClick:s[2]||(s[2]=r=>ee("/")),class:"w-full px-3 py-2 text-left text-sm hover:bg-accent hover:text-accent-foreground flex items-center transition-colors",disabled:m.value},[a(t(Q),{class:"mr-2 h-4 w-4"}),s[8]||(s[8]=e("span",null,"Home",-1))],8,Te)]),e("div",Re,[e("button",{onClick:H,disabled:m.value,class:"w-full px-3 py-2 text-left text-sm text-destructive hover:bg-destructive/10 flex items-center transition-colors disabled:opacity-50"},[a(t(F),{class:"mr-2 h-4 w-4"}),e("span",null,i(m.value?"Logging out...":"Log out"),1)],8,Ye)])])):v("",!0)]),_:1})],512)):(l(),c("div",Pe,[a(t(u),{variant:"ghost",size:"sm",as:"a",href:"/login"},{default:o(()=>[...s[9]||(s[9]=[f(" Login ",-1)])]),_:1}),a(t(u),{size:"sm",as:"a",href:"/register"},{default:o(()=>[...s[10]||(s[10]=[f(" Sign Up ",-1)])]),_:1})]))]),e("div",Qe,[a(t(u),{variant:"outline",size:"sm",class:"relative",as:"a",href:"/cart"},{default:o(()=>[a(t(z),{class:"h-4 w-4"}),x.value>0?(l(),g(t(U),{key:0,class:"absolute -top-1 -right-1 h-4 w-4 p-0 flex items-center justify-center text-xs bg-primary text-primary-foreground"},{default:o(()=>[f(i(x.value>9?"9+":x.value),1)]),_:1})):v("",!0)]),_:1}),n.user?(l(),g(t(u),{key:0,variant:"outline",size:"sm",class:"relative",as:"a",href:"/my-orders"},{default:o(()=>[a(t(X),{class:"h-4 w-4"})]),_:1})):v("",!0),a(t(u),{variant:"ghost",size:"sm",onClick:J,disabled:m.value},{default:o(()=>[y.value?(l(),g(t(ie),{key:1,class:"h-5 w-5"})):(l(),g(t(ne),{key:0,class:"h-5 w-5"}))]),_:1},8,["disabled"])])]),a(N,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:o(()=>[y.value?(l(),c("div",Xe,[e("div",Ze,[n.categories.length>0?(l(),c("div",Ge,[s[11]||(s[11]=e("p",{class:"px-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider"},"Categories",-1)),(l(!0),c(M,null,$(n.categories,r=>(l(),g(t(u),{key:r.id,variant:"ghost",class:A(D()+" justify-start"),as:"a",href:`/products?category=${r.slug}`,onClick:C},{default:o(()=>[f(i(r.name),1)]),_:2},1032,["class","href"]))),128)),a(t(V),{class:"my-2"})])):v("",!0),n.user?(l(),c("div",Je,[e("div",Ke,[e("div",We,[a(t(R),{class:"h-8 w-8"},{default:o(()=>[w.value?(l(),g(t(P),{key:0,src:w.value,alt:k.value},null,8,["src","alt"])):v("",!0),a(t(Y),{class:"bg-primary/10 text-primary text-sm"},{default:o(()=>[f(i(q(n.user)),1)]),_:1})]),_:1}),e("div",null,[e("p",et,i(k.value),1),e("p",tt,i(E.value),1)])])]),a(t(u),{variant:"ghost",class:"justify-start w-full",as:"a",href:"/",onClick:C,disabled:m.value},{default:o(()=>[a(t(Q),{class:"mr-2 h-4 w-4"}),s[12]||(s[12]=f(" Home ",-1))]),_:1},8,["disabled"]),a(t(V),{class:"my-2"}),a(t(u),{variant:"ghost",class:"justify-start w-full text-destructive hover:text-destructive hover:bg-destructive/10",onClick:H,disabled:m.value},{default:o(()=>[a(t(F),{class:"mr-2 h-4 w-4"}),f(" "+i(m.value?"Logging out...":"Logout"),1)]),_:1},8,["disabled"])])):(l(),c("div",st,[s[15]||(s[15]=e("p",{class:"px-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider"},"Account",-1)),a(t(u),{variant:"ghost",class:"justify-start w-full",as:"a",href:"/login",onClick:C},{default:o(()=>[a(t(T),{class:"mr-2 h-4 w-4"}),s[13]||(s[13]=f(" Login ",-1))]),_:1}),a(t(u),{variant:"outline",class:"justify-start w-full",as:"a",href:"/register",onClick:C},{default:o(()=>[a(t(T),{class:"mr-2 h-4 w-4"}),s[14]||(s[14]=f(" Sign Up ",-1))]),_:1})]))])])):v("",!0)]),_:1})])]))}}),ft=ce(at,[["__scopeId","data-v-a832ee62"]]);export{ft as N,de as S};
