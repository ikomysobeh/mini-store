import{d as le,r as x,c as ae,w as F,a as C,b as n,e as o,g as e,u as l,k as oe,h as u,i as P,o as d,t as i,f as m,m as U,F as V,p as T,s as O,n as ne,l as h}from"./app-K-q9J0q3.js";import{_ as ie}from"./AdminLayout.vue_vue_type_script_setup_true_lang-x3RQ5NXt.js";import{_ as re}from"./PageHeader.vue_vue_type_script_setup_true_lang-B66iIgUz.js";import{_ as b,a as y,b as v,E as de}from"./index-CUNsGnyf.js";import{a as ce,_ as ue}from"./CardTitle.vue_vue_type_script_setup_true_lang-Vw9yFV3L.js";import{_ as me}from"./Input.vue_vue_type_script_setup_true_lang-DPcFMIAG.js";import{_ as N}from"./index-BAhdN__j.js";import{_ as B}from"./Checkbox.vue_vue_type_script_setup_true_lang-BQV0P2Gj.js";import{D as I}from"./download-eS2tO3YU.js";import{P as fe}from"./plus-Cq78eyXU.js";import{P as w}from"./package-D0sYWK3D.js";import{F as ve}from"./filter-BL-Ha0C4.js";import{S as pe}from"./search-yc7yfQeO.js";import{T as L}from"./trash-2-BqV8Yul2.js";import{A as j}from"./arrow-up-down-Cl9ApxOG.js";import{S as _e}from"./square-pen-CvqzdsPD.js";import"./Separator.vue_vue_type_script_setup_true_lang-DbthccUb.js";import"./heart-SRdw8gzy.js";import"./chevron-down-27Oz233j.js";import"./house-C9tBBdIN.js";import"./chevron-right-sVAsF3I7.js";import"./arrow-left-BZmXb83o.js";import"./index-DuB4bDPE.js";import"./Presence-B0IqpTCv.js";import"./createContext-CQkOKGVL.js";import"./check-DFphdIlc.js";import"./useForwardExpose-Zu8ZX9ue.js";const ge={class:"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},xe={key:0,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md"},he={class:"text-red-600 text-sm"},be={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},ye={class:"flex items-center"},ke={class:"p-2 bg-primary/20 rounded-lg"},we={class:"ml-4"},Se={class:"text-2xl font-bold"},Ce={class:"flex items-center"},Pe={class:"p-2 bg-secondary/20 rounded-lg"},$e={class:"ml-4"},Ae={class:"text-2xl font-bold"},Ve={class:"flex items-center"},Te={class:"p-2 bg-accent/20 rounded-lg"},De={class:"ml-4"},ze={class:"text-2xl font-bold"},Ne={class:"flex items-center"},je={class:"p-2 bg-warning/20 rounded-lg"},Ee={class:"ml-4"},Fe={class:"text-2xl font-bold"},Ue={class:"flex items-center justify-between"},Oe={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Be={class:"relative"},Ie=["value"],Le=["value"],Me={class:"flex items-center justify-between"},He={class:"text-sm text-gray-600"},qe={class:"flex space-x-2"},Re={class:"overflow-x-auto"},We={class:"w-full"},Ge={class:"black"},Je={class:"p-4 text-left"},Ke={class:"flex items-center"},Qe={class:"flex items-center"},Xe={class:"flex items-center"},Ye={class:"divide-y"},Ze={class:"p-4"},et={class:"p-4"},tt={class:"w-12 h-12 bg-gray-100 rounded-md overflow-hidden"},st=["src","alt"],lt={key:1,class:"w-full h-full flex items-center justify-center"},at={class:"p-4"},ot={class:"font-medium"},nt={class:"text-sm text-gray-600"},it={class:"p-4"},rt={class:"text-sm text-muted-foreground"},dt={class:"p-4"},ct={key:0},ut={class:"text-sm"},mt={class:"text-sm"},ft={key:1},vt={class:"font-medium"},pt={class:"p-4"},_t={class:"font-medium"},gt={class:"p-4"},xt={key:0},ht={class:"text-xs text-muted-foreground"},bt={key:1,class:"text-sm text-muted-foreground"},yt={class:"p-4"},kt={class:"p-4"},wt={class:"flex space-x-2"},St={key:2,class:"mt-6 flex justify-center"},Ct={class:"flex space-x-1"},Zt=le({__name:"Index",props:{products:{type:Object,required:!0},categories:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})},stats:{type:Object,default:()=>({})},error:{type:String,default:null}},setup(r){const p=x(r.filters.search||""),_=x(r.filters.category||""),g=x(r.filters.status||""),S=x(r.filters.sort||"created_at"),k=x(r.filters.direction||"desc"),c=x([]),$=x(!1),M=[{value:"",label:"All Status"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"donatable",label:"Donatable"},{value:"has_variants",label:"Has Variants"},{value:"no_variants",label:"No Variants"},{value:"low_stock",label:"Low Stock"},{value:"out_of_stock",label:"Out of Stock"}],H=[{label:"Export All",icon:I,variant:"outline",onClick:J},{label:"Add Product",icon:fe,href:"/admin/products/create"}],q=ae(()=>c.value.length>0);function R(a){h.visit(`/admin/products/${a}`,{preserveState:!1,preserveScroll:!1})}function W(a){h.visit(`/admin/products/${a}/edit`,{preserveState:!1,preserveScroll:!1})}function G(){if(c.value.length===0){alert("Please select products to export");return}const a=document.createElement("form");a.method="POST",a.action="/admin/products/export-selected",a.style.display="none";const t=document.querySelector('meta[name="csrf-token"]');if(t){const s=document.createElement("input");s.type="hidden",s.name="_token",s.value=t.getAttribute("content"),a.appendChild(s)}c.value.forEach(s=>{const f=document.createElement("input");f.type="hidden",f.name="product_ids[]",f.value=s,a.appendChild(f)}),document.body.appendChild(a),a.submit(),document.body.removeChild(a),c.value=[]}function J(){const a=new URLSearchParams;p.value&&a.append("search",p.value),_.value&&a.append("category",_.value),g.value&&a.append("status",g.value),window.open(`/admin/products/export?${a.toString()}`,"_blank")}function D(){const a={};p.value&&(a.search=p.value),_.value&&(a.category=_.value),g.value&&(a.status=g.value),S.value&&(a.sort=S.value),k.value&&(a.direction=k.value),h.get("/admin/products",a,{preserveState:!0,preserveScroll:!0})}function K(){p.value="",_.value="",g.value="",S.value="created_at",k.value="desc",h.get("/admin/products")}function z(a){S.value===a?k.value=k.value==="asc"?"desc":"asc":(S.value=a,k.value="asc"),D()}function Q(a){confirm("Are you sure you want to delete this product?")&&h.delete(`/admin/products/${a}`,{preserveScroll:!0})}function X(){c.value.length!==0&&confirm(`Are you sure you want to delete ${c.value.length} products?`)&&h.post("/admin/products/bulk-delete",{product_ids:c.value},{preserveScroll:!0,onSuccess:()=>{c.value=[]}})}function Y(a){a&&h.visit(a,{preserveState:!0,preserveScroll:!1})}function Z(){c.value.length===r.products.data.length?c.value=[]:c.value=r.products.data.map(a=>a.id)}function A(a){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a)}function ee(a){return a.is_active?a.total_stock===0?"bg-gray-100 text-gray-800":a.total_stock<=10?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800":"bg-red-100 text-red-800"}function te(a){return a.is_active?a.total_stock===0?"Out of Stock":a.total_stock<=10?"Low Stock":"Active":"Inactive"}let E;return F(p,a=>{clearTimeout(E),E=setTimeout(()=>{D()},500)}),F([_,g],()=>{D()}),(a,t)=>(d(),C(ie,{title:"Products Management"},{default:n(()=>[o(l(oe),{title:"Products Management"}),o(re,{title:"Products",description:"Manage your product catalog",icon:l(w),"icon-color":"text-primary",actions:H},null,8,["icon"]),e("div",ge,[r.error?(d(),u("div",xe,[e("div",he,i(r.error),1)])):P("",!0),e("div",be,[o(l(b),null,{default:n(()=>[o(l(y),{class:"p-6"},{default:n(()=>[e("div",ye,[e("div",ke,[o(l(w),{class:"h-6 w-6 text-primary"})]),e("div",we,[e("p",Se,i(r.stats.total||0),1),t[8]||(t[8]=e("p",{class:"text-sm text-muted-foreground"},"Total Products",-1))])])]),_:1})]),_:1}),o(l(b),null,{default:n(()=>[o(l(y),{class:"p-6"},{default:n(()=>[e("div",Ce,[e("div",Pe,[o(l(w),{class:"h-6 w-6 text-secondary"})]),e("div",$e,[e("p",Ae,i(r.stats.active||0),1),t[9]||(t[9]=e("p",{class:"text-sm text-muted-foreground"},"Active Products",-1))])])]),_:1})]),_:1}),o(l(b),null,{default:n(()=>[o(l(y),{class:"p-6"},{default:n(()=>[e("div",Ve,[e("div",Te,[o(l(w),{class:"h-6 w-6 text-accent"})]),e("div",De,[e("p",ze,i(r.stats.with_variants||0),1),t[10]||(t[10]=e("p",{class:"text-sm text-muted-foreground"},"With Variants",-1))])])]),_:1})]),_:1}),o(l(b),null,{default:n(()=>[o(l(y),{class:"p-6"},{default:n(()=>[e("div",Ne,[e("div",je,[o(l(w),{class:"h-6 w-6 text-warning"})]),e("div",Ee,[e("p",Fe,i(A(r.stats.total_value||0)),1),t[11]||(t[11]=e("p",{class:"text-sm text-muted-foreground"},"Total Value",-1))])])]),_:1})]),_:1})]),o(l(b),{class:"mb-6"},{default:n(()=>[o(l(ce),null,{default:n(()=>[e("div",Ue,[o(l(ue),{class:"flex items-center"},{default:n(()=>[o(l(ve),{class:"h-5 w-5 mr-2"}),t[12]||(t[12]=m(" Filters ",-1))]),_:1}),o(l(v),{variant:"ghost",size:"sm",onClick:t[0]||(t[0]=s=>$.value=!$.value)},{default:n(()=>[m(i($.value?"Hide":"Show"),1)]),_:1})])]),_:1}),$.value?(d(),C(l(y),{key:0,class:"space-y-4"},{default:n(()=>[e("div",Oe,[e("div",Be,[o(l(pe),{class:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o(l(me),{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=s=>p.value=s),placeholder:"Search products...",class:"pl-10"},null,8,["modelValue"])]),U(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>_.value=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[t[13]||(t[13]=e("option",{value:""},"All Categories",-1)),(d(!0),u(V,null,T(r.categories,s=>(d(),u("option",{key:s.id,value:s.id},i(s.name),9,Ie))),128))],512),[[O,_.value]]),U(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>g.value=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[(d(),u(V,null,T(M,s=>e("option",{key:s.value,value:s.value},i(s.label),9,Le)),64))],512),[[O,g.value]]),o(l(v),{variant:"outline",onClick:K},{default:n(()=>[...t[14]||(t[14]=[m(" Clear Filters ",-1)])]),_:1})])]),_:1})):P("",!0)]),_:1}),q.value?(d(),C(l(b),{key:1,class:"mb-6"},{default:n(()=>[o(l(y),{class:"p-4"},{default:n(()=>[e("div",Me,[e("span",He,i(c.value.length)+" products selected ",1),e("div",qe,[o(l(v),{variant:"outline",size:"sm",onClick:G},{default:n(()=>[o(l(I),{class:"h-4 w-4 mr-2"}),t[15]||(t[15]=m(" Export Selected ",-1))]),_:1}),o(l(v),{variant:"destructive",size:"sm",onClick:X},{default:n(()=>[o(l(L),{class:"h-4 w-4 mr-2"}),t[16]||(t[16]=m(" Delete Selected ",-1))]),_:1}),o(l(v),{variant:"ghost",size:"sm",onClick:t[4]||(t[4]=s=>c.value=[])},{default:n(()=>[...t[17]||(t[17]=[m(" Cancel ",-1)])]),_:1})])])]),_:1})]),_:1})):P("",!0),o(l(b),null,{default:n(()=>[o(l(y),{class:"p-0"},{default:n(()=>[e("div",Re,[e("table",We,[e("thead",Ge,[e("tr",null,[e("th",Je,[o(l(B),{checked:c.value.length===r.products.data.length&&r.products.data.length>0,"onUpdate:checked":Z},null,8,["checked"])]),t[21]||(t[21]=e("th",{class:"p-4 text-left"},"Image",-1)),e("th",{class:"p-4 text-left cursor-pointer",onClick:t[5]||(t[5]=s=>z("name"))},[e("div",Ke,[t[18]||(t[18]=m(" Name ",-1)),o(l(j),{class:"h-4 w-4 ml-1"})])]),t[22]||(t[22]=e("th",{class:"p-4 text-left"},"Category",-1)),e("th",{class:"p-4 text-left cursor-pointer",onClick:t[6]||(t[6]=s=>z("price"))},[e("div",Qe,[t[19]||(t[19]=m(" Price ",-1)),o(l(j),{class:"h-4 w-4 ml-1"})])]),e("th",{class:"p-4 text-left cursor-pointer",onClick:t[7]||(t[7]=s=>z("stock"))},[e("div",Xe,[t[20]||(t[20]=m(" Stock ",-1)),o(l(j),{class:"h-4 w-4 ml-1"})])]),t[23]||(t[23]=e("th",{class:"p-4 text-left"},"Variants",-1)),t[24]||(t[24]=e("th",{class:"p-4 text-left"},"Status",-1)),t[25]||(t[25]=e("th",{class:"p-4 text-left"},"Actions",-1))])]),e("tbody",Ye,[(d(!0),u(V,null,T(r.products.data,s=>(d(),u("tr",{key:s.id,class:""},[e("td",Ze,[o(l(B),{checked:c.value.includes(s.id),"onUpdate:checked":f=>{f?c.value.push(s.id):c.value=c.value.filter(se=>se!==s.id)}},null,8,["checked","onUpdate:checked"])]),e("td",et,[e("div",tt,[s.image?(d(),u("img",{key:0,src:s.image,alt:s.name,class:"w-full h-full object-cover"},null,8,st)):(d(),u("div",lt,[o(l(w),{class:"h-6 w-6 text-muted-foreground"})]))])]),e("td",at,[e("div",null,[e("div",ot,i(s.name),1),e("div",nt,i(s.slug),1)])]),e("td",it,[e("span",rt,i(s.category?.name||"N/A"),1)]),e("td",dt,[s.has_variants&&s.price_range?(d(),u("div",ct,[e("span",ut,i(A(s.price_range.min)),1),t[26]||(t[26]=e("span",{class:"text-gray-400"}," - ",-1)),e("span",mt,i(A(s.price_range.max)),1)])):(d(),u("div",ft,[e("span",vt,i(A(s.price)),1)]))]),e("td",pt,[e("span",_t,i(s.total_stock),1)]),e("td",gt,[s.has_variants?(d(),u("div",xt,[o(l(N),{class:"mb-1"},{default:n(()=>[m(i(s.variants_count)+" variants",1)]),_:2},1024),e("div",ht,[e("div",null,"Colors: "+i(s.available_colors?.join(", ")||"None"),1),e("div",null,"Sizes: "+i(s.available_sizes?.join(", ")||"None"),1)])])):(d(),u("span",bt,"No variants"))]),e("td",yt,[o(l(N),{class:ne(ee(s))},{default:n(()=>[m(i(te(s)),1)]),_:2},1032,["class"]),s.is_donatable?(d(),C(l(N),{key:0,class:"ml-1 bg-blue-100 text-blue-800"},{default:n(()=>[...t[27]||(t[27]=[m(" Donatable ",-1)])]),_:1})):P("",!0)]),e("td",kt,[e("div",wt,[o(l(v),{variant:"ghost",size:"sm",onClick:f=>R(s.id),title:"View Product"},{default:n(()=>[o(l(de),{class:"h-4 w-4"})]),_:1},8,["onClick"]),o(l(v),{variant:"ghost",size:"sm",onClick:f=>W(s.id),title:"Edit Product"},{default:n(()=>[o(l(_e),{class:"h-4 w-4"})]),_:1},8,["onClick"]),o(l(v),{variant:"ghost",size:"sm",onClick:f=>Q(s.id),class:"text-red-600 hover:text-red-700",title:"Delete Product"},{default:n(()=>[o(l(L),{class:"h-4 w-4"})]),_:1},8,["onClick"])])])]))),128))])])])]),_:1})]),_:1}),r.products.links.length>3?(d(),u("div",St,[e("nav",Ct,[(d(!0),u(V,null,T(r.products.links,s=>(d(),C(l(v),{key:s.label,variant:s.active?"default":"outline",size:"sm",disabled:!s.url,onClick:f=>Y(s.url),innerHTML:s.label},null,8,["variant","disabled","onClick","innerHTML"]))),128))])])):P("",!0)])]),_:1}))}});export{Zt as default};
