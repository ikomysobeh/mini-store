import{d as G,J as I,h as _,g as i,t as d,u as e,f as n,i as p,o as c,c as O,e as s,b as o,a as C,n as U,F as V,p as q,r as z,C as Q,l as B,w as R,k as Y,N as ee}from"./app-BXPGDwNF.js";import{N as te}from"./Navbar-BEkkmscT.js";import{b as F,_ as E,a as Z}from"./index-CcvGP-j6.js";import{_ as se}from"./Input.vue_vue_type_script_setup_true_lang-DcHqSM4g.js";import{_ as $}from"./index-DfWQ6Mnh.js";import{_ as H,X as ae,S as le}from"./Separator.vue_vue_type_script_setup_true_lang-BShyuFLv.js";import{_ as oe,a as re,b as ie,c as ne,d as j}from"./SelectValue.vue_vue_type_script_setup_true_lang-DvS8ZDLB.js";import{_ as M}from"./Checkbox.vue_vue_type_script_setup_true_lang-CWWXt3xD.js";import{_ as S}from"./Label.vue_vue_type_script_setup_true_lang-BWJeXm6l.js";import{F as ce}from"./filter-CRsUpb5Q.js";import{S as J}from"./search-DQZCs3Cy.js";import{u as K}from"./useLocale-D4AaTc9o.js";import{G as W}from"./gift-B9cXaZBL.js";import{S as X}from"./star-z1l0ijtL.js";import{H as de}from"./heart-C55-H4Od.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-DdBwcO8u.js";import"./useForwardExpose-BVDJrJWm.js";import"./index-Bipsu26o.js";import"./createContext-CiQq0oco.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-COtCfJP8.js";import"./house-QYBZ4As8.js";import"./Presence-BfCh7kOW.js";import"./Teleport-CoC-FCwC.js";import"./chevron-down-vXIc0sn4.js";import"./VisuallyHidden-DNzPHyKk.js";import"./check-DBfEfRcz.js";const fe={class:"mb-8"},me={class:"text-3xl font-bold mb-2"},ve={class:"text-muted-foreground"},ge={key:0,class:"ml-2"},he={class:"capitalize font-medium"},ye=G({__name:"PageHeader",props:{totalProducts:{},selectedCategory:{},categories:{}},setup(l){const D=x=>{const m=l.categories.find(h=>h.slug===x);return m?m.name:x},{t:g}=I();return(x,m)=>(c(),_("div",fe,[i("h1",me,d(e(g)("nav.products")),1),i("p",ve,[n(d(l.totalProducts.toLocaleString())+" "+d(e(g)("nav.products"))+" ",1),l.selectedCategory?(c(),_("span",ge,[m[0]||(m[0]=n(" in ",-1)),i("span",he,d(D(l.selectedCategory)),1)])):p("",!0)])]))}}),pe={class:"sticky top-24 space-y-6"},_e={class:"lg:hidden"},xe={class:"flex items-center space-x-2"},ke={class:"space-y-2"},be={class:"relative"},we={class:"space-y-3"},Ce={class:"space-y-2 max-h-64 overflow-y-auto"},Fe={class:"flex items-center space-x-2"},$e={class:"flex items-center space-x-2"},Te={class:"space-y-3"},Se={class:"space-y-2"},De={class:"flex items-center space-x-2"},Ae={class:"space-y-3"},Pe={key:1,class:"text-xs text-muted-foreground"},ze={class:"flex flex-wrap gap-2"},Be=G({__name:"ProductFilters",props:{categories:{},searchTerm:{},selectedCategory:{},onlyDonatable:{type:Boolean},sortBy:{},showFilters:{type:Boolean}},emits:["update:searchTerm","update:selectedCategory","update:onlyDonatable","update:sortBy","toggleFilters","clearFilters"],setup(l,{emit:D}){const{t:g}=I(),x=l,m=D,h=O(()=>x.searchTerm||x.selectedCategory||x.onlyDonatable),v=O(()=>(x.searchTerm?1:0)+(x.selectedCategory?1:0)+(x.onlyDonatable?1:0)),w=k=>{const r=k.target;console.log("Search input changed to:",r.value),m("update:searchTerm",r.value)},y=()=>{console.log("All Categories clicked"),m("update:selectedCategory","")},T=k=>{console.log("Category clicked:",k),x.selectedCategory===k?m("update:selectedCategory",""):m("update:selectedCategory",k)},A=k=>{const r=k===!0||k==="true";console.log("Donatable changed to:",r),m("update:onlyDonatable",r)},P=k=>{console.log("Sort changed to:",k),m("update:sortBy",k)},L=()=>{m("toggleFilters")},N=()=>{m("clearFilters")};return(k,r)=>(c(),_("div",pe,[i("div",_e,[s(e(F),{variant:"outline",onClick:L,class:"w-full justify-between"},{default:o(()=>[i("div",xe,[s(e(ce),{class:"h-4 w-4"}),i("span",null,d(e(g)("common.filter")),1)]),h.value?(c(),C(e($),{key:0,variant:"secondary"},{default:o(()=>[n(d(v.value),1)]),_:1})):p("",!0)]),_:1})]),s(e(E),{class:U({"hidden lg:block":!l.showFilters})},{default:o(()=>[s(e(Z),{class:"p-6 space-y-6"},{default:o(()=>[i("div",ke,[s(e(S),{for:"search"},{default:o(()=>[n(d(e(g)("common.search")),1)]),_:1}),i("div",be,[s(e(J),{class:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s(e(se),{id:"search",value:l.searchTerm,onInput:w,placeholder:e(g)("common.search")+"...",class:"pl-10"},null,8,["value","placeholder"])])]),s(e(H)),i("div",we,[s(e(S),null,{default:o(()=>[n(d(e(g)("common.category")),1)]),_:1}),i("div",Ce,[i("div",Fe,[s(e(M),{checked:l.selectedCategory==="",onClick:y,id:"all-categories"},null,8,["checked"]),s(e(S),{for:"all-categories",class:"text-sm font-normal cursor-pointer",onClick:y},{default:o(()=>[n(d(e(g)("common.allCategories")),1)]),_:1})]),(c(!0),_(V,null,q(l.categories,b=>(c(),_("div",{key:b.id,class:"flex items-center justify-between space-x-2"},[i("div",$e,[s(e(M),{checked:l.selectedCategory===b.slug,onClick:()=>T(b.slug),id:`category-${b.id}`},null,8,["checked","onClick","id"]),s(e(S),{for:`category-${b.id}`,class:"text-sm font-normal cursor-pointer capitalize",onClick:()=>T(b.slug)},{default:o(()=>[n(d(b.name),1)]),_:2},1032,["for","onClick"])]),b.products_count?(c(),C(e($),{key:0,variant:"outline",class:"text-xs"},{default:o(()=>[n(d(b.products_count),1)]),_:2},1024)):p("",!0)]))),128))])]),s(e(H)),i("div",Te,[s(e(S),null,{default:o(()=>[...r[3]||(r[3]=[n("Product Type",-1)])]),_:1}),i("div",Se,[i("div",De,[s(e(M),{checked:l.onlyDonatable,"onUpdate:checked":A,id:"donations-only"},null,8,["checked"]),s(e(S),{for:"donations-only",class:"text-sm font-normal cursor-pointer"},{default:o(()=>[...r[4]||(r[4]=[n(" Donations Only ",-1)])]),_:1})])])]),s(e(H)),i("div",Ae,[s(e(S),{for:"sort"},{default:o(()=>[n(d(e(g)("common.sort")),1)]),_:1}),s(e(oe),{value:l.sortBy,"onUpdate:value":P},{default:o(()=>[s(e(re),null,{default:o(()=>[s(e(ie),{placeholder:"Sort products"})]),_:1}),s(e(ne),null,{default:o(()=>[s(e(j),{value:"name"},{default:o(()=>[...r[5]||(r[5]=[n("Name (A-Z)",-1)])]),_:1}),s(e(j),{value:"name_desc"},{default:o(()=>[...r[6]||(r[6]=[n("Name (Z-A)",-1)])]),_:1}),s(e(j),{value:"price_asc"},{default:o(()=>[...r[7]||(r[7]=[n("Price (Low to High)",-1)])]),_:1}),s(e(j),{value:"price_desc"},{default:o(()=>[...r[8]||(r[8]=[n("Price (High to Low)",-1)])]),_:1}),s(e(j),{value:"newest"},{default:o(()=>[...r[9]||(r[9]=[n("Newest First",-1)])]),_:1}),s(e(j),{value:"featured"},{default:o(()=>[...r[10]||(r[10]=[n("Featured First",-1)])]),_:1})]),_:1})]),_:1},8,["value"])]),s(e(H)),h.value?(c(),C(e(F),{key:0,variant:"outline",onClick:N,class:"w-full"},{default:o(()=>[s(e(ae),{class:"h-4 w-4 mr-2"}),r[11]||(r[11]=n(" Clear All Filters ",-1))]),_:1})):p("",!0),h.value?(c(),_("div",Pe,d(v.value)+" active filter"+d(v.value>1?"s":""),1)):p("",!0)]),_:1})]),_:1},8,["class"]),s(e(E),{class:"lg:block hidden"},{default:o(()=>[s(e(Z),{class:"p-4"},{default:o(()=>[s(e(S),{class:"text-sm font-medium mb-3 block"},{default:o(()=>[...r[12]||(r[12]=[n("Quick Filters",-1)])]),_:1}),i("div",ze,[s(e(F),{variant:"outline",size:"sm",onClick:r[0]||(r[0]=b=>A(!l.onlyDonatable)),class:U({"bg-warning/10 text-warning":l.onlyDonatable})},{default:o(()=>[...r[13]||(r[13]=[n(" Donations ",-1)])]),_:1},8,["class"]),s(e(F),{variant:"outline",size:"sm",onClick:r[1]||(r[1]=b=>P("price_asc")),class:U({"bg-success/10 text-success":l.sortBy==="price_asc"})},{default:o(()=>[...r[14]||(r[14]=[n(" Low Price ",-1)])]),_:1},8,["class"]),s(e(F),{variant:"outline",size:"sm",onClick:r[2]||(r[2]=b=>P("newest")),class:U({"bg-info/10 text-info":l.sortBy==="newest"})},{default:o(()=>[...r[15]||(r[15]=[n(" New Arrivals ",-1)])]),_:1},8,["class"])])]),_:1})]),_:1})]))}}),Ne={class:"space-y-6"},je={key:0,class:"flex flex-wrap gap-2"},Le={class:"capitalize"},Ue={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},Oe={class:"relative overflow-hidden"},He=["src","alt"],Ge={class:"absolute top-3 left-3 flex flex-col space-y-2"},Ie={class:"absolute top-3 right-3 flex flex-col space-y-2 opacity-0 group-hover:opacity-100 transition-all duration-300"},Me={class:"absolute bottom-3 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300"},Ve={class:"flex items-start justify-between"},qe={class:"font-semibold line-clamp-2 group-hover:text-primary transition-colors flex-1"},Ee=["href"],Ze={key:0,class:"flex items-center space-x-1 ml-2"},Je={class:"text-xs text-muted-foreground"},Qe={class:"text-xs"},Re={key:0,class:"text-success font-medium"},We={key:1,class:"text-destructive font-medium"},Xe={key:2,class:"text-info font-medium"},Ke={class:"flex items-center justify-between pt-2"},Ye={class:"flex flex-col"},et={class:"text-xl font-bold text-primary"},tt={key:0,class:"text-sm text-muted-foreground line-through"},st={class:"flex space-x-2"},at={key:2,class:"text-center py-16"},lt={class:"w-24 h-24 bg-muted rounded-full flex items-center justify-center mx-auto mb-6"},ot={class:"text-muted-foreground mb-6"},rt={class:"flex flex-col sm:flex-row gap-3 justify-center"},it={key:3,class:"flex justify-center mt-8"},nt={class:"flex space-x-2"},ct=G({__name:"ProductsGrid",props:{products:{},paginationLinks:{},hasActiveFilters:{type:Boolean},activeFilters:{},categories:{},user:{}},emits:["clearFilters","goToPage"],setup(l,{emit:D}){const{t:g}=I(),{localizedUrl:x,productUrl:m,cartAddUrl:h}=K(),v=l,w=D,y=z(new Set),T=z(new Set),A=f=>parseFloat(f.toString()).toFixed(2),P=f=>{const a=v.categories.find(t=>t.slug===f);return a?a.name:f},L=f=>{if(!v.user){B.visit(x("/login"));return}y.value.has(f)?y.value.delete(f):y.value.add(f),B.post(x("/wishlist/toggle"),{product_id:f},{preserveState:!0,preserveScroll:!0})},N=f=>{if(!v.user){B.visit(x("/login"));return}T.value.add(f),B.post(h(f),{quantity:1},{preserveState:!0,preserveScroll:!0,onFinish:()=>{T.value.delete(f)}})},k=f=>{f&&w("goToPage",f)},r=()=>{w("clearFilters")},b=(f,a)=>Math.round((f-a)/f*100);return(f,a)=>(c(),_("div",Ne,[l.hasActiveFilters?(c(),_("div",je,[l.activeFilters.search?(c(),C(e($),{key:0,variant:"secondary",class:"px-3 py-1"},{default:o(()=>[s(e(J),{class:"h-3 w-3 mr-1"}),n(" "+d(e(g)("common.search"))+": "+d(l.activeFilters.search),1)]),_:1})):p("",!0),l.activeFilters.category?(c(),C(e($),{key:1,variant:"secondary",class:"px-3 py-1 capitalize"},{default:o(()=>[i("span",Le,d(P(l.activeFilters.category)),1)]),_:1})):p("",!0),l.activeFilters.donatable?(c(),C(e($),{key:2,variant:"secondary",class:"px-3 py-1"},{default:o(()=>[s(e(W),{class:"h-3 w-3 mr-1"}),a[0]||(a[0]=n(" Donations Only ",-1))]),_:1})):p("",!0),s(e(F),{variant:"ghost",size:"sm",onClick:r,class:"h-6 px-2 text-xs"},{default:o(()=>[...a[1]||(a[1]=[n(" Clear all ",-1)])]),_:1})])):p("",!0),l.products.length?(c(),_("div",Ue,[(c(!0),_(V,null,q(l.products,t=>(c(),C(e(E),{key:t.id,class:"group overflow-hidden hover:shadow-xl hover:scale-[1.02] transition-all duration-500 cursor-pointer border-0 shadow-md"},{default:o(()=>[i("div",Oe,[i("img",{src:t.image||"/placeholder-product.jpg",alt:t.name,class:"h-48 w-full object-cover group-hover:scale-110 transition-transform duration-700",loading:"lazy"},null,8,He),a[4]||(a[4]=i("div",{class:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1)),i("div",Ge,[t.is_donatable?(c(),C(e($),{key:0,class:"bg-warning text-warning-foreground"},{default:o(()=>[s(e(W),{class:"h-3 w-3 mr-1"}),a[2]||(a[2]=n(" Donation ",-1))]),_:1})):p("",!0),t.is_featured?(c(),C(e($),{key:1,class:"bg-info text-info-foreground"},{default:o(()=>[s(e(X),{class:"h-3 w-3 mr-1"}),a[3]||(a[3]=n(" Featured ",-1))]),_:1})):p("",!0),t.stock<10&&t.stock>0?(c(),C(e($),{key:2,variant:"destructive"},{default:o(()=>[n(" Only "+d(t.stock)+" left ",1)]),_:2},1024)):p("",!0),t.stock===0&&!t.is_donatable?(c(),C(e($),{key:3,variant:"destructive"},{default:o(()=>[n(d(e(g)("product.outOfStock")),1)]),_:1})):p("",!0),t.original_price&&t.original_price>t.price?(c(),C(e($),{key:4,class:"bg-destructive/80 text-destructive-foreground"},{default:o(()=>[n(d(b(t.original_price,t.price))+"% OFF ",1)]),_:2},1024)):p("",!0)]),i("div",Ie,[s(e(F),{size:"icon",variant:"secondary",class:"hover:scale-110 shadow-lg",onClick:Q(u=>L(t.id),["stop"]),title:y.value.has(t.id)?"Remove from wishlist":"Add to wishlist"},{default:o(()=>[s(e(de),{class:U([{"fill-current text-red-500":y.value.has(t.id)},"h-4 w-4"])},null,8,["class"])]),_:2},1032,["onClick","title"]),t.stock>0||t.is_donatable?(c(),C(e(F),{key:0,size:"icon",variant:"secondary",class:"hover:scale-110 shadow-lg",onClick:Q(u=>N(t.id),["stop"]),disabled:T.value.has(t.id),title:"Add to cart"},{default:o(()=>[s(e(le),{class:"h-4 w-4"})]),_:1},8,["onClick","disabled"])):p("",!0)]),i("div",Me,[s(e(F),{size:"sm",variant:"secondary",class:"shadow-lg",as:"a",href:e(m)(t.slug)},{default:o(()=>[n(d(e(g)("product.viewDetails")),1)]),_:1},8,["href"])])]),s(e(Z),{class:"p-4 space-y-3"},{default:o(()=>[i("div",Ve,[i("h3",qe,[i("a",{href:e(m)(t.slug),class:"hover:underline"},d(t.name),9,Ee)]),t.rating?(c(),_("div",Ze,[s(e(X),{class:"h-3 w-3 fill-warning text-warning"}),i("span",Je,d(t.rating),1)])):p("",!0)]),s(e($),{variant:"outline",class:"text-xs capitalize"},{default:o(()=>[n(d(t.category?.name||"Uncategorized"),1)]),_:2},1024),i("div",Qe,[t.stock>0?(c(),_("span",Re,d(t.stock)+" "+d(e(g)("product.inStock")),1)):t.is_donatable?(c(),_("span",Xe," Available for donation ")):(c(),_("span",We,d(e(g)("product.outOfStock")),1))]),i("div",Ke,[i("div",Ye,[i("span",et," $"+d(A(t.price)),1),t.original_price&&t.original_price>t.price?(c(),_("span",tt," $"+d(A(t.original_price)),1)):p("",!0)]),i("div",st,[s(e(F),{size:"sm",variant:"outline",class:"hover:scale-105 transition-all duration-300",as:"a",href:e(m)(t.slug)},{default:o(()=>[n(d(e(g)("product.viewDetails")),1)]),_:1},8,["href"])])])]),_:2},1024)]),_:2},1024))),128))])):(c(),_("div",at,[i("div",lt,[s(e(J),{class:"h-12 w-12 text-muted-foreground"})]),a[7]||(a[7]=i("h3",{class:"text-2xl font-semibold mb-2"},"No products found",-1)),i("p",ot,d(l.hasActiveFilters?"Try adjusting your search or filter criteria":"No products are available at the moment"),1),i("div",rt,[l.hasActiveFilters?(c(),C(e(F),{key:0,variant:"outline",onClick:r},{default:o(()=>[...a[5]||(a[5]=[n(" Clear Filters ",-1)])]),_:1})):p("",!0),s(e(F),{as:"a",href:e(x)("/products")},{default:o(()=>[...a[6]||(a[6]=[n(" Browse All Products ",-1)])]),_:1},8,["href"])])])),l.paginationLinks&&l.paginationLinks.length>3?(c(),_("div",it,[i("div",nt,[(c(!0),_(V,null,q(l.paginationLinks,t=>(c(),C(e(F),{key:t.label,variant:t.active?"default":"outline",disabled:!t.url,onClick:u=>k(t.url),size:"sm",innerHTML:t.label,class:"min-w-10"},null,8,["variant","disabled","onClick","innerHTML"]))),128))])])):p("",!0)]))}}),dt=ue(ct,[["__scopeId","data-v-9e2cdd01"]]),ut={class:"min-h-screen bg-background text-foreground"},ft={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},mt={class:"grid grid-cols-1 lg:grid-cols-4 gap-8"},vt={class:"lg:col-span-1"},gt={class:"lg:col-span-3"},Vt=G({__name:"Products",props:{products:{type:Object,required:!0},categories:{type:Array,required:!0},filters:{type:Object,default:()=>({})},auth:{type:Object,default:()=>({})},cartItems:{type:Array,default:()=>[]},settings:{type:Object,default:()=>({})}},setup(l){const{t:D}=I(),{localizedUrl:g}=K(),x=l.settings.site_name||"Elegant Store",m=l.auth.user,h=z(l.filters.search||""),v=z(l.filters.category||""),w=z(l.filters.donatable||!1),y=z(l.filters.sort||"name"),T=z(!1),A=O(()=>h.value||v.value||w.value),P=O(()=>{const a={};return h.value&&(a.search=h.value),v.value&&(a.category=v.value),w.value&&(a.donatable=w.value),a}),L=O(()=>{let a=l.products.data||[];switch(y.value){case"price_asc":a=[...a].sort((t,u)=>parseFloat(t.price)-parseFloat(u.price));break;case"price_desc":a=[...a].sort((t,u)=>parseFloat(u.price)-parseFloat(t.price));break;case"name":a=[...a].sort((t,u)=>t.name.localeCompare(u.name));break;case"name_desc":a=[...a].sort((t,u)=>u.name.localeCompare(t.name));break;case"newest":a=[...a].sort((t,u)=>new Date(u.created_at)-new Date(t.created_at));break;case"featured":a=[...a].sort((t,u)=>(u.is_featured?1:0)-(t.is_featured?1:0));break}return a}),N=()=>{console.log("Applying filters:",{search:h.value,category:v.value,donatable:w.value,sort:y.value});const a={};h.value&&(a.search=h.value),v.value&&(a.category=v.value),w.value&&(a.donatable=!0),y.value&&y.value!=="name"&&(a.sort=y.value),B.get(g("/products"),a,{preserveState:!0,preserveScroll:!0})},k=()=>{console.log("Clearing all filters"),h.value="",v.value="",w.value=!1,y.value="name",ee(()=>{console.log("After clearing - values:",{search:h.value,category:v.value,donatable:w.value,sort:y.value}),B.get(g("/products"),{},{preserveState:!1,preserveScroll:!1})})},r=()=>{T.value=!T.value},b=a=>{a&&B.visit(a,{preserveState:!0,preserveScroll:!1})};let f;return R(h,a=>{console.log("Search term changed to:",a),clearTimeout(f),f=setTimeout(()=>{N()},500)}),R([v,w,y],([a,t,u])=>{console.log("Filters changed:",{category:a,donatable:t,sort:u}),N()}),(a,t)=>(c(),_("div",ut,[s(e(Y),{title:e(D)("nav.products")},null,8,["title"]),s(te,{categories:l.categories,cartItems:l.cartItems,user:e(m),siteName:e(x),settings:l.settings},null,8,["categories","cartItems","user","siteName","settings"]),i("div",ft,[s(ye,{totalProducts:l.products.total||0,selectedCategory:v.value,categories:l.categories},null,8,["totalProducts","selectedCategory","categories"]),i("div",mt,[i("div",vt,[s(Be,{categories:l.categories,searchTerm:h.value,"onUpdate:searchTerm":t[0]||(t[0]=u=>h.value=u),selectedCategory:v.value,"onUpdate:selectedCategory":t[1]||(t[1]=u=>v.value=u),onlyDonatable:w.value,"onUpdate:onlyDonatable":t[2]||(t[2]=u=>w.value=u),sortBy:y.value,"onUpdate:sortBy":t[3]||(t[3]=u=>y.value=u),showFilters:T.value,onToggleFilters:r,onClearFilters:k},null,8,["categories","searchTerm","selectedCategory","onlyDonatable","sortBy","showFilters"])]),i("div",gt,[s(dt,{products:L.value,paginationLinks:l.products.links,hasActiveFilters:A.value,activeFilters:P.value,categories:l.categories,user:e(m),onClearFilters:k,onGoToPage:b},null,8,["products","paginationLinks","hasActiveFilters","activeFilters","categories","user"])])])])]))}});export{Vt as default};
