import{d as R,r as b,a as k,b as i,e as l,g as t,u as a,k as K,t as o,s as W,m as S,h as u,o as r,F as v,p as $,y as C,f as D,i as U,q as B,n as y,l as _}from"./app-SjLUGOZr.js";import{U as V,_ as q}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Dxlq4rl-.js";import{b as h,_ as x,a as g,E as Q}from"./index-BrapZYxY.js";import{_ as G}from"./Input.vue_vue_type_script_setup_true_lang-uc9VEEMx.js";import{a as F,_ as N}from"./CardTitle.vue_vue_type_script_setup_true_lang-DuRW2HGp.js";import{D as J}from"./download-C0nbGfr9.js";import{S as T,U as X}from"./Separator.vue_vue_type_script_setup_true_lang-BZDczlZu.js";import{H as j}from"./heart-7zeck1Uh.js";import{F as Y}from"./filter-Ea7H0bXr.js";import{S as z}from"./search-DF6i4yh4.js";import"./chevron-down-C8ML_t95.js";import"./house-DBR-gnoZ.js";import"./package-DZajZJvk.js";import"./chevron-right-wp2OarNp.js";import"./index-CcgqDx5H.js";const Z={class:"space-y-6"},tt={class:"flex justify-between items-center"},et={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},st={class:"flex items-center justify-between"},at={class:"text-2xl font-bold"},lt={class:"flex items-center justify-between"},nt={class:"text-2xl font-bold"},it={class:"flex items-center justify-between"},ot={class:"text-2xl font-bold"},rt={class:"flex items-center justify-between"},dt={class:"text-2xl font-bold"},ut={class:"text-xs text-gray-500"},ct={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},ft={class:"space-y-2"},mt={class:"relative"},pt={class:"space-y-2"},xt=["value"],gt={class:"space-y-2"},yt={class:"space-y-2"},bt={class:"flex space-x-2 mt-4"},vt={class:"overflow-x-auto"},_t={class:"w-full border-collapse"},ht={class:"p-3"},wt={class:"font-mono text-sm"},kt={class:"p-3"},St={class:"font-medium"},$t={class:"text-sm text-gray-600"},Ct={class:"p-3"},Dt={class:"flex items-center space-x-2"},Ut={class:"p-3"},Tt={key:0},Ot={key:0,class:"flex items-center space-x-2"},Bt={class:"text-sm font-medium"},Vt={class:"text-xs text-gray-500"},Ft={key:0},Nt={key:1,class:"text-sm text-gray-500 italic"},jt={key:1,class:"text-sm text-gray-400"},zt={class:"p-3"},Lt={class:"font-bold"},At={class:"p-3"},Mt={class:"p-3"},Ht={class:"text-sm text-gray-600"},Pt={class:"p-3"},Et={key:0,class:"text-center py-12"},It={key:0,class:"flex justify-center mt-6"},Rt={class:"flex space-x-1"},Kt=["onClick","innerHTML"],Wt=["innerHTML"],re=R({__name:"Index",props:{orders:{},filters:{},statuses:{},stats:{}},setup(d){const c=b(d.filters.search||""),f=b(d.filters.status||""),m=b(d.filters.is_donation?.toString()||""),p=b(d.filters.has_beneficiary||""),L=n=>{_.get(`/admin/orders/${n}`)},w=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n),A=n=>new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),M=n=>{if(!n.beneficiary)return n.is_donation?"Not specified":"-";if(n.beneficiary.is_organization)return n.beneficiary.organization_name||"Unknown Organization";const e=n.beneficiary.first_name||"",s=n.beneficiary.last_name||"";return`${e} ${s}`.trim()||"Unknown Person"},H=n=>({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",failed:"bg-red-100 text-red-800",success:"bg-green-100 text-green-800",done:"bg-gray-100 text-gray-800"})[n]||"bg-gray-100 text-gray-800",O=()=>{const n=new URLSearchParams;c.value&&n.append("search",c.value),f.value&&n.append("status",f.value),m.value&&n.append("is_donation",m.value),p.value&&n.append("has_beneficiary",p.value),_.get("/admin/orders",Object.fromEntries(n),{preserveState:!0,replace:!0})},P=()=>{c.value="",f.value="",m.value="",p.value="",_.get("/admin/orders",{},{preserveState:!0,replace:!0})},E=()=>{const n=new URLSearchParams;c.value&&n.append("search",c.value),f.value&&n.append("status",f.value),m.value&&n.append("is_donation",m.value),p.value&&n.append("has_beneficiary",p.value),window.location.href=`/admin/orders/export?${n.toString()}`};return(n,e)=>(r(),k(q,null,{default:i(()=>[l(a(K),{title:"Orders Management"}),t("div",Z,[t("div",tt,[e[5]||(e[5]=t("div",null,[t("h1",{class:"text-3xl font-bold"},"Orders Management"),t("p",{class:"text-gray-600 mt-1"},"Manage customer orders and donations")],-1)),l(a(h),{onClick:E,variant:"outline",class:"flex items-center space-x-2"},{default:i(()=>[l(a(J),{class:"h-4 w-4"}),e[4]||(e[4]=t("span",null,"Export Orders",-1))]),_:1})]),t("div",et,[l(a(x),null,{default:i(()=>[l(a(g),{class:"p-4"},{default:i(()=>[t("div",st,[t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Orders",-1)),t("p",at,o(d.stats.total),1)]),l(a(T),{class:"h-8 w-8 text-blue-600"})])]),_:1})]),_:1}),l(a(x),null,{default:i(()=>[l(a(g),{class:"p-4"},{default:i(()=>[t("div",lt,[t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Revenue",-1)),t("p",nt,o(w(d.stats.total_revenue)),1)]),e[8]||(e[8]=t("div",{class:"h-8 w-8 rounded-full bg-green-100 flex items-center justify-center"},[t("span",{class:"text-green-600 font-bold"},"$")],-1))])]),_:1})]),_:1}),l(a(x),null,{default:i(()=>[l(a(g),{class:"p-4"},{default:i(()=>[t("div",it,[t("div",null,[e[9]||(e[9]=t("p",{class:"text-sm font-medium text-gray-600"},"Donations Total",-1)),t("p",ot,o(w(d.stats.donations_total)),1)]),l(a(j),{class:"h-8 w-8 text-red-600"})])]),_:1})]),_:1}),l(a(x),null,{default:i(()=>[l(a(g),{class:"p-4"},{default:i(()=>[t("div",rt,[t("div",null,[e[10]||(e[10]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Beneficiaries",-1)),t("p",dt,o(d.stats.total_beneficiaries),1),t("p",ut,o(d.stats.donations_with_beneficiary)+" with / "+o(d.stats.donations_without_beneficiary)+" without ",1)]),l(a(V),{class:"h-8 w-8 text-purple-600"})])]),_:1})]),_:1})]),l(a(x),null,{default:i(()=>[l(a(F),null,{default:i(()=>[l(a(N),{class:"flex items-center space-x-2"},{default:i(()=>[l(a(Y),{class:"h-5 w-5"}),e[11]||(e[11]=t("span",null,"Filters",-1))]),_:1})]),_:1}),l(a(g),null,{default:i(()=>[t("div",ct,[t("div",ft,[e[12]||(e[12]=t("label",{class:"text-sm font-medium"},"Search",-1)),t("div",mt,[l(a(z),{class:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),l(a(G),{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=s=>c.value=s),placeholder:"Search orders, customers, beneficiaries...",class:"pl-10",onKeyup:W(O,["enter"])},null,8,["modelValue"])])]),t("div",pt,[e[14]||(e[14]=t("label",{class:"text-sm font-medium"},"Status",-1)),S(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>f.value=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[e[13]||(e[13]=t("option",{value:""},"All Statuses",-1)),(r(!0),u(v,null,$(d.statuses,s=>(r(),u("option",{key:s.value,value:s.value},o(s.label),9,xt))),128))],512),[[C,f.value]])]),t("div",gt,[e[16]||(e[16]=t("label",{class:"text-sm font-medium"},"Order Type",-1)),S(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>m.value=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[...e[15]||(e[15]=[t("option",{value:""},"All Types",-1),t("option",{value:"0"},"Purchases Only",-1),t("option",{value:"1"},"Donations Only",-1)])],512),[[C,m.value]])]),t("div",yt,[e[18]||(e[18]=t("label",{class:"text-sm font-medium"},"Beneficiary Status",-1)),S(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>p.value=s),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[...e[17]||(e[17]=[t("option",{value:""},"All",-1),t("option",{value:"1"},"With Beneficiary",-1),t("option",{value:"0"},"Without Beneficiary",-1)])],512),[[C,p.value]])])]),t("div",bt,[l(a(h),{onClick:O,class:"flex items-center space-x-2"},{default:i(()=>[l(a(z),{class:"h-4 w-4"}),e[19]||(e[19]=t("span",null,"Apply Filters",-1))]),_:1}),l(a(h),{onClick:P,variant:"outline"},{default:i(()=>[...e[20]||(e[20]=[D(" Clear All ",-1)])]),_:1})])]),_:1})]),_:1}),l(a(x),null,{default:i(()=>[l(a(F),null,{default:i(()=>[l(a(N),null,{default:i(()=>[...e[21]||(e[21]=[D("Orders List",-1)])]),_:1})]),_:1}),l(a(g),null,{default:i(()=>[t("div",vt,[t("table",_t,[e[23]||(e[23]=t("thead",null,[t("tr",{class:"border-b"},[t("th",{class:"text-left p-3 font-medium"},"ID"),t("th",{class:"text-left p-3 font-medium"},"Customer"),t("th",{class:"text-left p-3 font-medium"},"Type"),t("th",{class:"text-left p-3 font-medium"},"Beneficiary"),t("th",{class:"text-left p-3 font-medium"},"Amount"),t("th",{class:"text-left p-3 font-medium"},"Status"),t("th",{class:"text-left p-3 font-medium"},"Date"),t("th",{class:"text-left p-3 font-medium"},"Actions")])],-1)),t("tbody",null,[(r(!0),u(v,null,$(d.orders.data,s=>(r(),u("tr",{key:s.id,class:"border-b hover:bg-gray-50"},[t("td",ht,[t("span",wt,"#"+o(s.id),1)]),t("td",kt,[t("div",null,[t("p",St,o(s.customer?.first_name)+" "+o(s.customer?.last_name),1),t("p",$t,o(s.customer?.user?.email),1)])]),t("td",Ct,[t("div",Dt,[(r(),k(B(s.is_donation?a(j):a(T)),{class:y(`h-4 w-4 ${s.is_donation?"text-red-600":"text-blue-600"}`)},null,8,["class"])),t("span",{class:y(`text-sm font-medium ${s.is_donation?"text-red-600":"text-blue-600"}`)},o(s.is_donation?"Donation":"Purchase"),3)])]),t("td",Ut,[s.is_donation?(r(),u("div",Tt,[s.beneficiary?(r(),u("div",Ot,[(r(),k(B(s.beneficiary.is_organization?a(V):a(X)),{class:"h-4 w-4 text-purple-600"})),t("div",null,[t("p",Bt,o(M(s)),1),t("p",Vt,[D(o(s.beneficiary.is_organization?"Organization":"Individual")+" ",1),!s.beneficiary.is_organization&&s.beneficiary.relationship_to_donor?(r(),u("span",Ft," ("+o(s.beneficiary.relationship_to_donor)+") ",1)):U("",!0)])])])):(r(),u("span",Nt,"Not specified"))])):(r(),u("span",jt,"-"))]),t("td",zt,[t("span",Lt,o(w(s.total)),1)]),t("td",At,[t("span",{class:y(`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${H(s.status)}`)},o(s.status.charAt(0).toUpperCase()+s.status.slice(1)),3)]),t("td",Mt,[t("span",Ht,o(A(s.created_at)),1)]),t("td",Pt,[l(a(h),{onClick:I=>L(s.id),variant:"outline",size:"sm",class:"flex items-center space-x-1 cursor-pointer"},{default:i(()=>[l(a(Q),{class:"h-3 w-3"}),e[22]||(e[22]=t("span",null,"View",-1))]),_:1},8,["onClick"])])]))),128))])]),d.orders.data.length===0?(r(),u("div",Et,[l(a(T),{class:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e[24]||(e[24]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No orders found",-1)),e[25]||(e[25]=t("p",{class:"text-gray-600"},"Try adjusting your search filters or check back later.",-1))])):U("",!0)]),d.orders.links?(r(),u("div",It,[t("nav",Rt,[(r(!0),u(v,null,$(d.orders.links,s=>(r(),u(v,{key:s.label},[s.url?(r(),u("button",{key:0,onClick:I=>a(_).get(s.url),class:y(`px-3 py-2 text-sm rounded-md ${s.active?"bg-blue-600 text-white font-medium":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"}`),innerHTML:s.label},null,10,Kt)):(r(),u("span",{key:1,class:y(`px-3 py-2 text-sm rounded-md ${s.active?"bg-blue-600 text-white font-medium":"bg-gray-100 text-gray-400 cursor-not-allowed"}`),innerHTML:s.label},null,10,Wt))],64))),128))])])):U("",!0)]),_:1})]),_:1})])]),_:1}))}});export{re as default};
