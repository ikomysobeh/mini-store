import{d as M,j as T,r as y,c as U,w as j,a as b,b as r,e as o,g as i,u as e,k as F,C as q,i as k,h as g,f as m,o as u,t as v}from"./app-DujRkmkt.js";import{_ as H}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Z6Mg1akK.js";import{_ as L}from"./PageHeader.vue_vue_type_script_setup_true_lang-BcXc0kLT.js";import{_ as G,a as J,b as K,c as O}from"./VariantMatrix.vue_vue_type_script_setup_true_lang-C2B2Nw4Q.js";import{_ as p,a as _,b as C}from"./index-CpjSYyuu.js";import{a as h,_ as x}from"./CardTitle.vue_vue_type_script_setup_true_lang-DEtFdQPm.js";import{A as Q}from"./arrow-left-1ENxRg-s.js";import{P as z}from"./package-SgJJKX5E.js";import"./Input.vue_vue_type_script_setup_true_lang-BY7z0z9s.js";import"./index-C0SNBw2h.js";import"./Separator.vue_vue_type_script_setup_true_lang-BuJSPZIS.js";import"./heart-Br8EX8jQ.js";import"./chevron-down-BQzdU-5l.js";import"./search-Dv7Vb0ew.js";import"./house-Bz_ZmMg_.js";import"./chevron-right-CDom0IA6.js";import"./Textarea.vue_vue_type_script_setup_true_lang-DfSSnY2n.js";import"./Label.vue_vue_type_script_setup_true_lang-DG64_D_F.js";import"./useForwardExpose-Dz-I0qXV.js";import"./upload-6hbO2qO-.js";import"./star-DdeaZ9Vr.js";import"./trash-2-CEVOv8X5.js";import"./plus-7bboKBb-.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-BFfCbddV.js";import"./Presence-CALWOZ_n.js";import"./createContext-BgKnYhlw.js";import"./VisuallyHidden-E4w4NSoG.js";import"./check-mmSmRJU5.js";import"./index-DQ4I4HIY.js";import"./eye-off-B2Iz_FEx.js";import"./refresh-cw-BoHXygw5.js";const R={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},W={key:0,class:"text-red-600 text-sm flex items-center mt-1"},X={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Y={class:"text-sm text-muted-foreground"},Z={class:"text-sm text-muted-foreground"},ee={class:"text-sm text-muted-foreground"},te={key:0,class:"text-red-600 text-sm flex items-center mt-1"},se={class:"text-gray-500"},ae={class:"flex justify-end space-x-4 pt-6"},oe={key:0,class:"flex items-center"},re={key:1},Ue=M({__name:"Create",props:{categories:{type:Array,required:!0}},setup(P){const t=T({name_en:"",name_ar:"",description_en:"",description_ar:"",name:"",description:"",price:0,stock:0,category_id:"",is_active:!0,is_donatable:!1,image:null,images:[],delete_images:[],primary_image_id:null,colors:[],sizes:[],variants:[]}),l=y([]),n=y([]),d=y([]),f=U(()=>l.value.length>0&&n.value.length>0),$=[{label:"Back to Products",href:"/admin/products",icon:Q,variant:"outline"}];j([l,n],()=>{f.value&&V()},{deep:!0});const V=()=>{const a=[];l.value.forEach(s=>{n.value.forEach(c=>{d.value.find(w=>w.color_id===s.id&&w.size_id===c.id)||a.push({color_id:s.id,size_id:c.id,color_name:s.name,color_hex:s.hex,size_name:c.name,stock:0,price_adjustment:0,is_active:!0})})}),d.value=[...d.value,...a],d.value=d.value.filter(s=>l.value.some(c=>c.id===s.color_id)&&n.value.some(c=>c.id===s.size_id))},B=a=>{l.value=a,t.colors=a},S=a=>{n.value=a,t.sizes=a},N=a=>{d.value=a,t.variants=a},A=a=>{t.images=a,console.log("Images added to form:",a.length,a)},I=a=>{t.delete_images||(t.delete_images=[]),t.delete_images.push(a),console.log("Image marked for deletion:",a)},E=a=>{t.primary_image_id=a,console.log("Primary image set to:",a)},D=()=>{t.clearErrors(),f.value||(t.variants=[]),console.log("Creating product with data:",{name:t.name,price:t.price,stock:t.stock,category_id:t.category_id,has_variants:f.value,variants_count:t.variants.length,has_single_image:!!t.image,has_multiple_images:t.images&&t.images.length>0,images_count:t.images?.length||0,images_data:t.images}),t.post("/admin/products",{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{console.log("Product created successfully")},onError:a=>{console.log("Product creation errors:",a),window.scrollTo({top:0,behavior:"smooth"})}})};return(a,s)=>(u(),b(H,{title:"Create Product"},{default:r(()=>[o(e(F),{title:"Create Product"}),o(L,{title:"Create New Product",description:"Add a new product with colors and sizes",icon:e(z),"icon-color":"text-primary",actions:$},null,8,["icon"]),i("div",R,[i("form",{onSubmit:q(D,["prevent"]),class:"space-y-8"},[o(e(p),null,{default:r(()=>[o(e(h),null,{default:r(()=>[o(e(x),null,{default:r(()=>[...s[1]||(s[1]=[m("Basic Product Information",-1)])]),_:1}),e(t).errors.name||e(t).errors.price||e(t).errors.stock||e(t).errors.category_id||e(t).errors.description||e(t).errors.image||e(t).errors.images?(u(),g("div",W,[...s[2]||(s[2]=[i("svg",{class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[i("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),m(" Please check the fields below for errors ",-1)])])):k("",!0)]),_:1}),o(e(_),null,{default:r(()=>[o(G,{form:e(t),categories:P.categories,images:[],onImagesChange:A,onDeleteImage:I,onSetPrimaryImage:E},null,8,["form","categories"])]),_:1})]),_:1}),i("div",X,[o(e(p),null,{default:r(()=>[o(e(h),null,{default:r(()=>[o(e(x),null,{default:r(()=>[...s[3]||(s[3]=[m("Colors",-1)])]),_:1}),i("p",Y,v(l.value.length>0?`${l.value.length} colors selected`:"No colors selected - optional"),1)]),_:1}),o(e(_),null,{default:r(()=>[o(J,{colors:l.value,"onUpdate:colors":B},null,8,["colors"])]),_:1})]),_:1}),o(e(p),null,{default:r(()=>[o(e(h),null,{default:r(()=>[o(e(x),null,{default:r(()=>[...s[4]||(s[4]=[m("Sizes",-1)])]),_:1}),i("p",Z,v(n.value.length>0?`${n.value.length} sizes selected`:"No sizes selected - optional"),1)]),_:1}),o(e(_),null,{default:r(()=>[o(K,{sizes:n.value,"onUpdate:sizes":S},null,8,["sizes"])]),_:1})]),_:1})]),f.value?(u(),b(e(p),{key:0},{default:r(()=>[o(e(h),null,{default:r(()=>[o(e(x),null,{default:r(()=>[...s[5]||(s[5]=[m("Product Variants",-1)])]),_:1}),i("p",ee," Configure stock and pricing for each color and size combination ("+v(d.value.length)+" variants) ",1),e(t).errors.variants?(u(),g("div",te,[s[6]||(s[6]=i("svg",{class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[i("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),m(" "+v(e(t).errors.variants),1)])):k("",!0)]),_:1}),o(e(_),null,{default:r(()=>[o(O,{variants:d.value,"base-price":e(t).price,"onUpdate:variants":N},null,8,["variants","base-price"])]),_:1})]),_:1})):l.value.length===0&&n.value.length===0?(u(),b(e(p),{key:1},{default:r(()=>[o(e(_),{class:"text-center py-8"},{default:r(()=>[i("div",se,[o(e(z),{class:"mx-auto h-12 w-12 mb-4 text-muted-foreground"}),s[7]||(s[7]=i("h3",{class:"text-lg font-medium mb-2"},"Single Product",-1)),s[8]||(s[8]=i("p",{class:"text-sm"},"This product will be created without variants. The base price and stock will be used.",-1))])]),_:1})]),_:1})):k("",!0),i("div",ae,[o(e(C),{type:"button",variant:"outline",disabled:e(t).processing,onClick:s[0]||(s[0]=c=>a.$inertia.visit("/admin/products"))},{default:r(()=>[...s[9]||(s[9]=[m(" Cancel ",-1)])]),_:1},8,["disabled"]),o(e(C),{type:"submit",disabled:e(t).processing,class:"min-w-[120px]"},{default:r(()=>[e(t).processing?(u(),g("div",oe,[...s[10]||(s[10]=[i("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24"},[i("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),i("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),m(" Creating... ",-1)])])):(u(),g("span",re,"Create Product"))]),_:1},8,["disabled"])])],32)])]),_:1}))}});export{Ue as default};
