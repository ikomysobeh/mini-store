import{d as te,r as y,c as $,w as se,a as _,b as r,e as l,g as e,u as s,k as ae,t as d,h as p,i as x,o as c,f as b,m as j,y as A,F as M,p as V,n as C,q as oe,l as m}from"./app-DdZZOdGY.js";import{B as S,_ as le}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BYzwd7M8.js";import{c as re,_ as k,a as w,b as f,E as ne}from"./index-DXlwujjl.js";import{a as ie,_ as de}from"./CardTitle.vue_vue_type_script_setup_true_lang-DqUXkdo2.js";import{_ as ce}from"./Input.vue_vue_type_script_setup_true_lang-CjXn2THq.js";import{_ as z}from"./Checkbox.vue_vue_type_script_setup_true_lang-DaAbutUa.js";import{C as q}from"./calendar-Be8iLTyw.js";import{T as R}from"./trash-2-C_PeA_8I.js";import{S as ue}from"./search-CEtLuMsI.js";import{F as me}from"./filter-B5butts_.js";import{C as fe}from"./check-CbvjwZGT.js";import{C as pe}from"./circle-x-CB_igF3I.js";import{T as ve}from"./triangle-alert-DQSuH-BY.js";import{H as xe}from"./heart-y1OFyHao.js";import{S as ge}from"./Separator.vue_vue_type_script_setup_true_lang-BUqwOucx.js";import"./chevron-down-BVuG3MYh.js";import"./house-QAH6l9UE.js";import"./package-Cm94Zmrd.js";import"./chevron-right-CqLtSmjD.js";import"./index-HQ_s38JM.js";import"./Presence-FUATYo57.js";import"./createContext-DJu-mEbK.js";import"./VisuallyHidden-DZw1RReB.js";import"./useForwardExpose-O_30RnYg.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=re("CheckCheckIcon",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),ye={class:"space-y-6"},_e={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ke={class:"flex items-center space-x-2"},we={class:"text-2xl font-bold text-foreground"},be={class:"flex items-center space-x-2"},Ce={class:"text-2xl font-bold text-foreground"},Se={class:"flex items-center space-x-2"},Te={class:"text-2xl font-bold text-foreground"},$e={class:"flex items-center space-x-2"},Ne={class:"text-2xl font-bold text-foreground"},Oe={class:"flex flex-col sm:flex-row sm:items-center justify-between space-y-4 sm:space-y-0"},Fe={key:0,class:"flex items-center space-x-2"},De={class:"text-sm text-muted-foreground"},je={class:"flex flex-col sm:flex-row gap-4"},Ae={class:"flex-1"},Me={class:"relative"},Ve={class:"flex gap-2"},ze={class:"flex items-center space-x-2 py-2 border-b"},qe={class:"space-y-1"},Re={class:"flex-1 min-w-0"},Be={class:"flex items-start justify-between"},Le={class:"flex items-center space-x-4 mt-2 text-xs text-muted-foreground"},Ee={key:0,class:"w-2 h-2 bg-primary rounded-full flex-shrink-0"},Ue={class:"flex items-center space-x-1"},He={key:0,class:"text-center py-12"},Ie={class:"text-muted-foreground"},Xe={key:1,class:"flex items-center justify-between pt-4 border-t"},Je={class:"text-sm text-muted-foreground"},Ke={class:"flex space-x-1"},ht=te({__name:"Index",props:{notifications:{type:Object,required:!0},stats:{type:Object,required:!0},filters:{type:Object,default:()=>({})}},setup(i){const v=i,n=y([]),N=y(""),g=y(v.filters.type||""),h=y(v.filters.status||""),O=y(!1),F=$(()=>v.notifications.data.length>0&&n.value.length===v.notifications.data.length),B=$(()=>n.value.length>0&&n.value.length<v.notifications.data.length),L=$(()=>n.value.length>0),E=()=>{F.value?n.value=[]:n.value=v.notifications.data.map(a=>a.id)},U=a=>{const t=n.value.indexOf(a);t===-1?n.value.push(a):n.value.splice(t,1)},H=()=>{const a={};g.value&&(a.type=g.value),h.value&&(a.status=h.value),m.get("/admin/notifications",a,{preserveState:!0,preserveScroll:!0})},I=()=>{g.value="",h.value="",m.get("/admin/notifications",{},{preserveState:!0,preserveScroll:!0})},X=async()=>{try{(await fetch("/admin/notifications/bulk-action",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content||""},body:JSON.stringify({action:"mark_read",ids:n.value})})).ok&&(n.value=[],m.reload())}catch(a){console.error("Failed to mark notifications as read:",a)}},J=async()=>{if(confirm("Are you sure you want to delete the selected notifications?"))try{(await fetch("/admin/notifications/bulk-action",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content||""},body:JSON.stringify({action:"delete",ids:n.value})})).ok&&(n.value=[],m.reload())}catch(a){console.error("Failed to delete notifications:",a)}},K=async a=>{try{await fetch(`/admin/notifications/${a}/read`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content||""}}),m.reload()}catch(t){console.error("Failed to mark notification as read:",t)}},P=a=>{confirm("Are you sure you want to delete this notification?")&&m.delete(`/admin/notifications/${a}`)},W=a=>{a.data&&a.data.order_id&&m.get(`/admin/orders/${a.data.order_id}`)},Y=a=>{switch(a){case"new_order":return ge;case"new_donation":return xe;case"low_stock":return ve;case"order_cancelled":return pe;default:return S}},G=a=>{switch(a){case"new_order":return"bg-primary/20 text-primary";case"new_donation":return"bg-accent/20 text-accent-foreground";case"low_stock":return"bg-warning/20 text-warning-foreground";case"order_cancelled":return"bg-destructive/20 text-destructive";default:return"bg-muted/50 text-muted-foreground"}},Q=a=>new Date(a).toLocaleString(),Z=a=>{const t=new Date,o=new Date(a),u=t.getTime()-o.getTime(),T=Math.floor(u/6e4),D=Math.floor(u/36e5),ee=Math.floor(u/864e5);return T<1?"Just now":T<60?`${T}m ago`:D<24?`${D}h ago`:`${ee}d ago`};return se(L,a=>{O.value=a}),(a,t)=>(c(),_(le,{title:"Notifications"},{default:r(()=>[l(s(ae),{title:"Notifications"}),e("div",ye,[e("div",_e,[l(s(k),null,{default:r(()=>[l(s(w),{class:"p-4"},{default:r(()=>[e("div",ke,[l(s(S),{class:"h-5 w-5 text-primary"}),e("div",null,[e("p",we,d(i.stats.total),1),t[3]||(t[3]=e("p",{class:"text-sm text-muted-foreground"},"Total",-1))])])]),_:1})]),_:1}),l(s(k),null,{default:r(()=>[l(s(w),{class:"p-4"},{default:r(()=>[e("div",be,[t[5]||(t[5]=e("div",{class:"w-3 h-3 bg-destructive rounded-full"},null,-1)),e("div",null,[e("p",Ce,d(i.stats.unread),1),t[4]||(t[4]=e("p",{class:"text-sm text-muted-foreground"},"Unread",-1))])])]),_:1})]),_:1}),l(s(k),null,{default:r(()=>[l(s(w),{class:"p-4"},{default:r(()=>[e("div",Se,[l(s(q),{class:"h-5 w-5 text-accent"}),e("div",null,[e("p",Te,d(i.stats.today),1),t[6]||(t[6]=e("p",{class:"text-sm text-muted-foreground"},"Today",-1))])])]),_:1})]),_:1}),l(s(k),null,{default:r(()=>[l(s(w),{class:"p-4"},{default:r(()=>[e("div",$e,[l(s(q),{class:"h-5 w-5 text-secondary"}),e("div",null,[e("p",Ne,d(i.stats.this_week),1),t[7]||(t[7]=e("p",{class:"text-sm text-muted-foreground"},"This Week",-1))])])]),_:1})]),_:1})]),l(s(k),null,{default:r(()=>[l(s(ie),null,{default:r(()=>[e("div",Oe,[l(s(de),{class:"flex items-center space-x-2"},{default:r(()=>[l(s(S),{class:"h-5 w-5"}),t[8]||(t[8]=e("span",null,"All Notifications",-1))]),_:1}),O.value?(c(),p("div",Fe,[e("span",De,d(n.value.length)+" selected ",1),l(s(f),{onClick:X,size:"sm",variant:"outline"},{default:r(()=>[l(s(he),{class:"h-4 w-4 mr-2"}),t[9]||(t[9]=b(" Mark Read ",-1))]),_:1}),l(s(f),{onClick:J,size:"sm",variant:"outline"},{default:r(()=>[l(s(R),{class:"h-4 w-4 mr-2"}),t[10]||(t[10]=b(" Delete ",-1))]),_:1})])):x("",!0)])]),_:1}),l(s(w),{class:"space-y-4"},{default:r(()=>[e("div",je,[e("div",Ae,[e("div",Me,[l(s(ue),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),l(s(ce),{modelValue:N.value,"onUpdate:modelValue":t[0]||(t[0]=o=>N.value=o),placeholder:"Search notifications...",class:"pl-9"},null,8,["modelValue"])])]),e("div",Ve,[j(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>g.value=o),class:"px-3 py-2 border border-input bg-background rounded-md text-sm"},[...t[11]||(t[11]=[e("option",{value:""},"All Types",-1),e("option",{value:"new_order"},"Orders",-1),e("option",{value:"new_donation"},"Donations",-1),e("option",{value:"low_stock"},"Low Stock",-1),e("option",{value:"order_cancelled"},"Cancelled",-1)])],512),[[A,g.value]]),j(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>h.value=o),class:"px-3 py-2 border border-input bg-background rounded-md text-sm"},[...t[12]||(t[12]=[e("option",{value:""},"All Status",-1),e("option",{value:"unread"},"Unread",-1),e("option",{value:"read"},"Read",-1)])],512),[[A,h.value]]),l(s(f),{onClick:H,variant:"outline",size:"sm"},{default:r(()=>[l(s(me),{class:"h-4 w-4 mr-2"}),t[13]||(t[13]=b(" Filter ",-1))]),_:1}),l(s(f),{onClick:I,variant:"ghost",size:"sm"},{default:r(()=>[...t[14]||(t[14]=[b(" Clear ",-1)])]),_:1})])]),e("div",ze,[l(s(z),{checked:F.value,indeterminate:B.value,onClick:E},null,8,["checked","indeterminate"]),t[15]||(t[15]=e("span",{class:"text-sm text-muted-foreground"},"Select all notifications",-1))]),e("div",qe,[(c(!0),p(M,null,V(i.notifications.data,o=>(c(),p("div",{key:o.id,class:C(["flex items-start space-x-3 p-4 rounded-lg hover:bg-muted/50 transition-colors",o.read_at?"":"bg-card border-l-4 border-primary"])},[l(s(z),{checked:n.value.includes(o.id),onClick:u=>U(o.id),class:"mt-1"},null,8,["checked","onClick"]),e("div",{class:C(["p-2 rounded-full",G(o.type)])},[(c(),_(oe(Y(o.type)),{class:"h-4 w-4"}))],2),e("div",Re,[e("div",Be,[e("div",null,[e("p",{class:C(["font-medium",o.read_at?"text-muted-foreground":"text-foreground"])},d(o.title),3),e("p",{class:C(["text-sm mt-1",o.read_at?"text-muted-foreground":"text-foreground"])},d(o.message),3),e("div",Le,[e("span",null,d(Z(o.created_at)),1),t[16]||(t[16]=e("span",null,"â€¢",-1)),e("span",null,d(Q(o.created_at)),1)])]),o.read_at?x("",!0):(c(),p("div",Ee))])]),e("div",Ue,[o.data&&o.data.order_id?(c(),_(s(f),{key:0,onClick:u=>W(o),size:"sm",variant:"ghost",title:"View Order"},{default:r(()=>[l(s(ne),{class:"h-4 w-4"})]),_:1},8,["onClick"])):x("",!0),o.read_at?x("",!0):(c(),_(s(f),{key:1,onClick:u=>K(o.id),size:"sm",variant:"ghost",title:"Mark as Read"},{default:r(()=>[l(s(fe),{class:"h-4 w-4"})]),_:1},8,["onClick"])),l(s(f),{onClick:u=>P(o.id),size:"sm",variant:"ghost",title:"Delete"},{default:r(()=>[l(s(R),{class:"h-4 w-4"})]),_:1},8,["onClick"])])],2))),128))]),i.notifications.data.length===0?(c(),p("div",He,[l(s(S),{class:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),t[17]||(t[17]=e("h3",{class:"text-lg font-medium mb-2"},"No notifications found",-1)),e("p",Ie,d(i.filters.type||i.filters.status?"Try adjusting your filters":"You're all caught up!"),1)])):x("",!0),i.notifications.data.length>0?(c(),p("div",Xe,[e("div",Je," Showing "+d(i.notifications.from)+" to "+d(i.notifications.to)+" of "+d(i.notifications.total)+" notifications ",1),e("div",Ke,[(c(!0),p(M,null,V(i.notifications.links,o=>(c(),_(s(f),{key:o.label,onClick:u=>s(m).get(o.url),disabled:!o.url,variant:o.active?"default":"outline",size:"sm",innerHTML:o.label,class:"min-w-[2.5rem]"},null,8,["onClick","disabled","variant","innerHTML"]))),128))])])):x("",!0)]),_:1})]),_:1})])]),_:1}))}});export{ht as default};
