import{d as B,r as b,G as X,c as j,H,I as P,h as r,i as g,e as s,u as o,b as S,o as n,t as u,g as e,F as I,p as N,n as _,l as F,k as W,f as C,y as G,a as J,q as K}from"./app-BS883H4x.js";import{c as D,b as M,E as U}from"./index-B4wAO7Ak.js";import{_ as Q}from"./Input.vue_vue_type_script_setup_true_lang-B45G8T1E.js";import{X as Y,_ as V,U as L,M as Z,L as ee,S as te}from"./Separator.vue_vue_type_script_setup_true_lang-D5CIuwO1.js";import{H as se}from"./heart-BW9ee5RA.js";import{C as q}from"./chevron-down-Wqrx1rtw.js";import{S as oe}from"./search-9aZBX7bq.js";import{H as E}from"./house-C47ehVE_.js";import{P as ae}from"./package-B-ysswtM.js";import{C as ne}from"./chevron-right--k6hBXdV.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=D("BellIcon",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=D("ChartColumnIcon",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=D("SettingsIcon",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=D("UsersIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),le={key:0,class:"relative notification-dropdown"},de={key:0,class:"absolute -top-1 -right-1 h-4 w-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center"},ce={key:0,class:"absolute right-0 mt-2 w-80 bg-background border border-border rounded-lg shadow-lg z-50 max-h-96 overflow-hidden"},ue={class:"px-4 py-3 border-b border-border"},me={class:"flex items-center justify-between"},fe={key:0,class:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full"},he={class:"max-h-64 overflow-y-auto"},ve={key:0,class:"p-4 text-center text-muted-foreground"},pe={key:1,class:"p-4 text-center text-muted-foreground"},xe={key:2},_e=["onClick"],ge={class:"flex items-start space-x-3"},be={class:"flex-shrink-0 mt-1"},ye={class:"flex-1 min-w-0"},we={class:"text-sm font-medium text-foreground"},ke={class:"text-xs text-muted-foreground mt-1"},$e={class:"text-xs text-muted-foreground mt-1"},Ce=B({__name:"NotificationBell",setup(y){const f=b([]),l=b(0),v=b(!1),w=b(!1),A=X(),k=j(()=>A.props.auth?.user||null),h=j(()=>k.value&&(k.value.is_admin===!0||k.value.is_admin===1)),$=async()=>{if(h.value)try{w.value=!0;const i=await fetch("/admin/notifications/recent",{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(i.ok){const d=await i.json();f.value=d.notifications||[],l.value=d.unread_count||0}}catch(i){console.error("Failed to fetch notifications:",i)}finally{w.value=!1}},p=async i=>{if(h.value)try{await fetch(`/admin/notifications/${i}/read`,{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"",Accept:"application/json"}});const d=f.value.find(m=>m.id===i);d&&!d.read_at&&(d.read_at=new Date().toISOString(),l.value=Math.max(0,l.value-1))}catch(d){console.error("Failed to mark notification as read:",d)}},c=i=>{i.read_at||p(i.id),v.value=!1,i.data?.order_id&&F.visit(`/admin/orders/${i.data.order_id}`)};let t=null;H(()=>{h.value&&($(),t=setInterval($,3e4),document.addEventListener("click",a))}),P(()=>{t&&clearInterval(t),document.removeEventListener("click",a)});const a=i=>{i.target.closest(".notification-dropdown")||(v.value=!1)},z=()=>{h.value&&(v.value=!v.value)},T=i=>{const d=new Date,m=new Date(i),x=Math.floor((d-m)/1e3);return x<60?"Just now":x<3600?`${Math.floor(x/60)}m ago`:x<86400?`${Math.floor(x/3600)}h ago`:`${Math.floor(x/86400)}d ago`};return(i,d)=>h.value?(n(),r("div",le,[s(o(M),{onClick:z,variant:"ghost",size:"icon",class:"relative"},{default:S(()=>[s(o(R),{class:"h-5 w-5"}),l.value>0?(n(),r("span",de,u(l.value>9?"9+":l.value),1)):g("",!0)]),_:1}),v.value?(n(),r("div",ce,[e("div",ue,[e("div",me,[d[0]||(d[0]=e("h3",{class:"font-semibold"},"Notifications",-1)),l.value>0?(n(),r("span",fe,u(l.value)+" new ",1)):g("",!0)])]),e("div",he,[w.value?(n(),r("div",ve," Loading... ")):f.value.length===0?(n(),r("div",pe," No notifications ")):(n(),r("div",xe,[(n(!0),r(I,null,N(f.value,m=>(n(),r("button",{key:m.id,onClick:x=>c(m),class:_(["w-full px-4 py-3 text-left hover:bg-muted border-b border-border last:border-b-0 transition-colors",{"bg-blue-50":!m.read_at}])},[e("div",ge,[e("div",be,[e("div",{class:_(["w-2 h-2 rounded-full",m.read_at?"bg-gray-300":"bg-blue-500"])},null,2)]),e("div",ye,[e("p",we,u(m.title),1),e("p",ke,u(m.message),1),e("p",$e,u(T(m.created_at)),1)])])],10,_e))),128))]))]),d[1]||(d[1]=e("div",{class:"px-4 py-3 border-t border-border bg-muted/30"},[e("a",{href:"/admin/notifications",class:"text-xs text-primary hover:underline"}," View all notifications ")],-1))])):g("",!0)])):g("",!0)}}),Se={class:"flex h-screen bg-background"},Me={class:"flex flex-col h-full"},Ae={class:"flex items-center justify-between h-16 px-6 border-b"},De={class:"flex items-center space-x-3"},ze={class:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center"},Le={class:"flex-1 px-4 py-6 space-y-1 overflow-y-auto"},je=["href"],Ie={class:"p-4 bg-muted/30"},Ne={class:"flex items-center space-x-3"},Ue={class:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center"},Ve={class:"text-left"},qe={class:"text-sm font-medium"},Ee={class:"text-xs text-muted-foreground"},Oe={class:"flex flex-col flex-1 overflow-hidden"},Be={class:"bg-background border-b shadow-sm"},He={class:"px-4 sm:px-6 lg:px-8"},Pe={class:"flex items-center justify-between h-16"},Re={class:"flex items-center space-x-4"},Te={class:"text-xl font-semibold"},Xe={class:"hidden md:block flex-1 max-w-md mx-8"},Fe={class:"relative"},We={class:"flex items-center space-x-2"},Ge={class:"relative user-dropdown-container"},Je={class:"w-6 h-6 bg-primary/10 rounded-full flex items-center justify-center"},Ke={class:"hidden sm:block text-sm font-medium"},Qe={key:0,class:"absolute right-0 mt-2 w-56 bg-background rounded-lg shadow-lg border border-border z-50"},Ye={class:"px-4 py-3 border-b border-border"},Ze={class:"flex items-center space-x-3"},et={class:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center"},tt={class:"text-sm font-medium"},st={class:"text-xs text-muted-foreground"},ot={class:"py-2"},at={href:"/admin/settings",class:"flex items-center px-4 py-2 text-sm hover:bg-muted transition-colors"},nt={href:"/",target:"_blank",class:"flex items-center px-4 py-2 text-sm hover:bg-muted transition-colors"},rt={key:0,class:"bg-background border-b px-4 sm:px-6 lg:px-8 py-3"},it={class:"flex items-center space-x-1 text-sm text-muted-foreground"},lt={href:"/admin/dashboard",class:"hover:text-foreground transition-colors"},dt=["href"],ct={key:1,class:"text-foreground font-medium"},ut={class:"flex-1 overflow-y-auto bg-muted/20"},mt={class:"p-6"},kt=B({__name:"AdminLayout",props:{title:{default:"Admin Dashboard"},breadcrumbs:{default:()=>[]}},setup(y){const f=b(!1),l=b(!1),v=[{name:"Dashboard",href:"/admin/",icon:E},{name:"Orders",href:"/admin/orders",icon:te},{name:"Products",href:"/admin/products",icon:ae},{name:"Users",href:"/admin/users",icon:ie},{name:"Category",href:"/admin/categories",icon:re},{name:"Notifications",href:"/admin/notifications",icon:R},{name:"Settings",href:"/admin/settings",icon:O}],w=j(()=>window.location.pathname),A=c=>{const t=w.value;return c==="/admin/"?t==="/admin/"||t==="/admin":t.startsWith(c)},k=()=>{const c=document.createElement("form");c.method="POST",c.action="/logout";const t=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");if(t){const a=document.createElement("input");a.type="hidden",a.name="_token",a.value=t,c.appendChild(a)}document.body.appendChild(c),c.submit()},h=()=>{l.value=!l.value},$=c=>{const t=document.querySelector(".user-dropdown-container");t&&!t.contains(c.target)&&(l.value=!1)},p={name:"Admin User",email:"admin",role:"Administrator",avatar:null};return H(()=>{document.addEventListener("click",$)}),P(()=>{document.removeEventListener("click",$)}),(c,t)=>(n(),r("div",Se,[s(o(W),{title:y.title},null,8,["title"]),f.value?(n(),r("div",{key:0,class:"fixed inset-0 z-40 lg:hidden",onClick:t[0]||(t[0]=a=>f.value=!1)},[...t[3]||(t[3]=[e("div",{class:"absolute inset-0 bg-black/50"},null,-1)])])):g("",!0),e("div",{class:_(["fixed inset-y-0 left-0 z-50 w-64 bg-background border-r shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0",f.value?"translate-x-0":"-translate-x-full lg:translate-x-0"])},[e("div",Me,[e("div",Ae,[e("div",De,[e("div",ze,[s(o(se),{class:"h-5 w-5 text-primary-foreground"})]),t[4]||(t[4]=e("h1",{class:"text-xl font-bold"},"Admin Panel",-1))]),s(o(M),{onClick:t[1]||(t[1]=a=>f.value=!1),variant:"ghost",size:"icon",class:"lg:hidden"},{default:S(()=>[s(o(Y),{class:"h-5 w-5"})]),_:1})]),e("nav",Le,[(n(),r(I,null,N(v,a=>e("a",{key:a.name,href:a.href,class:_(["group flex items-center px-3 py-2.5 text-sm font-medium rounded-lg transition-all duration-200",A(a.href)?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-accent"])},[(n(),J(K(a.icon),{class:_(["mr-3 h-5 w-5",A(a.href)?"text-primary-foreground":"text-muted-foreground group-hover:text-foreground"])},null,8,["class"])),C(" "+u(a.name),1)],10,je)),64))]),s(o(V)),e("div",Ie,[e("button",{onClick:h,class:"w-full flex items-center justify-between px-3 py-2 rounded-lg hover:bg-muted/50 transition-colors"},[e("div",Ne,[e("div",Ue,[s(o(L),{class:"h-4 w-4 text-primary"})]),e("div",Ve,[e("p",qe,u(p.name),1),e("p",Ee,u(p.role),1)])]),s(o(q),{class:_(["h-4 w-4 transition-transform duration-200",l.value?"rotate-180":""])},null,8,["class"])])])])],2),e("div",Oe,[e("header",Be,[e("div",He,[e("div",Pe,[e("div",Re,[s(o(M),{onClick:t[2]||(t[2]=a=>f.value=!0),variant:"ghost",size:"icon",class:"lg:hidden"},{default:S(()=>[s(o(Z),{class:"h-5 w-5"})]),_:1}),e("h2",Te,u(y.title),1)]),e("div",Xe,[e("div",Fe,[s(o(oe),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s(o(Q),{type:"search",placeholder:"Search orders, products, users...",class:"pl-9 w-full"})])]),e("div",We,[s(Ce),s(o(M),{variant:"outline",size:"sm",as:"a",href:"/",target:"_blank"},{default:S(()=>[s(o(U),{class:"h-4 w-4 mr-2"}),t[5]||(t[5]=C(" View Site ",-1))]),_:1}),e("div",Ge,[s(o(M),{onClick:h,variant:"ghost",size:"sm",class:"flex items-center space-x-2 px-3"},{default:S(()=>[e("div",Je,[s(o(L),{class:"h-3 w-3 text-primary"})]),e("span",Ke,u(p.name),1),s(o(q),{class:_(["h-4 w-4 transition-transform duration-200",l.value?"rotate-180":""])},null,8,["class"])]),_:1}),l.value?(n(),r("div",Qe,[e("div",Ye,[e("div",Ze,[e("div",et,[s(o(L),{class:"h-5 w-5 text-primary"})]),e("div",null,[e("p",tt,u(p.name),1),e("p",st,u(p.email),1)])])]),e("div",ot,[e("a",at,[s(o(O),{class:"h-4 w-4 mr-3 text-muted-foreground"}),t[6]||(t[6]=C(" Settings ",-1))]),e("a",nt,[s(o(U),{class:"h-4 w-4 mr-3 text-muted-foreground"}),t[7]||(t[7]=C(" View Website ",-1))]),s(o(V),{class:"my-2"}),e("button",{onClick:k,class:"w-full flex items-center px-4 py-2 text-sm text-destructive hover:bg-destructive/10 transition-colors"},[s(o(ee),{class:"h-4 w-4 mr-3"}),t[8]||(t[8]=C(" Sign Out ",-1))])])])):g("",!0)])])])])]),y.breadcrumbs.length>0?(n(),r("div",rt,[e("nav",it,[e("a",lt,[s(o(E),{class:"h-4 w-4"})]),(n(!0),r(I,null,N(y.breadcrumbs,(a,z)=>(n(),r("span",{key:z,class:"flex items-center"},[s(o(ne),{class:"h-4 w-4 mx-2"}),a.href&&!a.isActive?(n(),r("a",{key:0,href:a.href,class:"hover:text-foreground transition-colors"},u(a.label),9,dt)):(n(),r("span",ct,u(a.label),1))]))),128))])])):g("",!0),e("main",ut,[e("div",mt,[G(c.$slots,"default")])])])]))}});export{R as B,O as S,ie as U,kt as _};
