import{d as A,h as g,F as B,p as L,e as r,b as f,u as l,g as e,t as u,n as j,a as y,o as m,q as z,i as b,f as x,c as T,x as K,r as R,l as k,w as V,k as W}from"./app-DwIQyjG_.js";import{_ as Y}from"./PageHeader.vue_vue_type_script_setup_true_lang-P8uH2tsu.js";import{a as I,_ as O}from"./CardContent.vue_vue_type_script_setup_true_lang-B84JJ7oU.js";import{U as q,_ as ee}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Blnrj5zo.js";import{C as H,_ as te}from"./SuccessAlert.vue_vue_type_script_setup_true_lang-B-FXQQ0v.js";import{U as G}from"./Separator.vue_vue_type_script_setup_true_lang--anB_U2L.js";import{C as Q}from"./circle-check-big-DSObIxGE.js";import{c as se,_ as w}from"./index-B8m1Vjhc.js";import{_ as le}from"./Input.vue_vue_type_script_setup_true_lang-BuDybEju.js";import{_ as re,a as oe}from"./CardTitle.vue_vue_type_script_setup_true_lang-DZ8TnfwM.js";import{S as ae}from"./search-OrZvG4Gk.js";import{_ as ne}from"./BulkActions.vue_vue_type_script_setup_true_lang-CCh540K5.js";import{_ as P}from"./index-DryFPPhI.js";import{_ as ie,a as de}from"./AvatarFallback.vue_vue_type_script_setup_true_lang-kRQSDDM4.js";import{_ as ce}from"./AvatarImage.vue_vue_type_script_setup_true_lang-3YHn3GN3.js";import{A as J}from"./arrow-up-down-CW2IeRym.js";import{C as ue}from"./circle-x-DsAYkyM_.js";import{P as me,M as fe}from"./phone-kF2mqX44.js";import{U as pe}from"./user-plus-C7cAVQll.js";import{E as he}from"./eye-DmRmXRSy.js";import{T as X}from"./trash-2-CTAYMFdI.js";import{_ as _e}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as ve}from"./Pagination.vue_vue_type_script_setup_true_lang-D9FwWiR4.js";import{F as ge}from"./filter-Cc6HIJmb.js";import{R as xe}from"./refresh-cw-6AKb5P5V.js";import"./arrow-left-BjG4jkNw.js";import"./heart-BkN90LQn.js";import"./chevron-down-CCUGKcmt.js";import"./house-CH9vzE5J.js";import"./package-BPOvwCiP.js";import"./chevron-right-CniR4j3X.js";import"./info-DpHS8VpL.js";import"./triangle-alert-CADpgYOV.js";import"./useForwardExpose-BCzaoVI5.js";import"./createContext-kUnmDYnW.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=se("FileSpreadsheetIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]),ye={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Ue={class:"flex items-center justify-between"},we={class:"text-sm text-muted-foreground"},ke={class:"text-2xl font-bold"},$e=A({__name:"UserStats",props:{users:{},totalUsers:{}},setup(i){const h=i.users.filter(_=>_.is_admin).length,a=i.users.filter(_=>!_.is_admin).length,d=i.users.filter(_=>_.email_verified_at).length,v=[{label:"Total Users",value:i.totalUsers,icon:q,color:"blue"},{label:"Administrators",value:h,icon:H,color:"purple"},{label:"Regular Users",value:a,icon:G,color:"green"},{label:"Email Verified",value:d,icon:Q,color:"emerald"}],U=_=>{const n={blue:"bg-blue-100 text-blue-600",purple:"bg-purple-100 text-purple-600",green:"bg-green-100 text-green-600",emerald:"bg-emerald-100 text-emerald-600"};return n[_]||n.blue};return(_,n)=>(m(),g("div",ye,[(m(),g(B,null,L(v,c=>r(l(O),{key:c.label},{default:f(()=>[r(l(I),{class:"p-6"},{default:f(()=>[e("div",Ue,[e("div",null,[e("p",we,u(c.label),1),e("p",ke,u(c.value.toLocaleString()),1)]),e("div",{class:j(`p-3 rounded-full ${U(c.color)}`)},[(m(),y(z(c.icon),{class:"h-5 w-5"}))],2)])]),_:2},1024)]),_:2},1024)),64))]))}}),Ce={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Se={class:"space-y-2"},Fe={class:"relative"},Re={class:"space-y-2"},Te=["value"],Ae=["value"],De={class:"space-y-2"},Ne={class:"flex flex-wrap gap-2"},Me={class:"space-y-2"},Ee=A({__name:"UserFilters",props:{searchTerm:{},selectedRole:{},showFilters:{type:Boolean}},emits:["update:searchTerm","update:selectedRole","clearFilters","applyFilters"],setup(i,{emit:h}){const a=h,d=[{value:"",label:"All Roles"},{value:"1",label:"Administrators Only"},{value:"0",label:"Regular Users Only"}],v=()=>{a("update:selectedRole","1"),a("applyFilters")},U=()=>{a("update:selectedRole","0"),a("applyFilters")};return(_,n)=>i.showFilters?(m(),y(l(O),{key:0,class:"mb-6"},{default:f(()=>[r(l(oe),null,{default:f(()=>[r(l(re),{class:"text-lg"},{default:f(()=>[...n[3]||(n[3]=[x("Filters & Search",-1)])]),_:1})]),_:1}),r(l(I),{class:"space-y-4"},{default:f(()=>[e("div",Ce,[e("div",Se,[n[4]||(n[4]=e("label",{class:"text-sm font-medium"},"Search Users",-1)),e("div",Fe,[r(l(ae),{class:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),r(l(le),{value:i.searchTerm,onInput:n[0]||(n[0]=c=>a("update:searchTerm",c.target.value)),placeholder:"Name, email...",class:"pl-10"},null,8,["value"])])]),e("div",Re,[n[5]||(n[5]=e("label",{class:"text-sm font-medium"},"User Role",-1)),e("select",{value:i.selectedRole,onChange:n[1]||(n[1]=c=>a("update:selectedRole",c.target.value)),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[(m(),g(B,null,L(d,c=>e("option",{key:c.value,value:c.value},u(c.label),9,Ae)),64))],40,Te)]),e("div",De,[n[8]||(n[8]=e("label",{class:"text-sm font-medium"},"Quick Filters",-1)),e("div",Ne,[r(l(w),{variant:"outline",size:"sm",onClick:v},{default:f(()=>[r(l(H),{class:"h-3 w-3 mr-1"}),n[6]||(n[6]=x(" Admins ",-1))]),_:1}),r(l(w),{variant:"outline",size:"sm",onClick:U},{default:f(()=>[r(l(G),{class:"h-3 w-3 mr-1"}),n[7]||(n[7]=x(" Users ",-1))]),_:1})])]),e("div",Me,[n[10]||(n[10]=e("label",{class:"text-sm font-medium"},"Â ",-1)),r(l(w),{variant:"outline",onClick:n[2]||(n[2]=c=>a("clearFilters")),class:"w-full"},{default:f(()=>[...n[9]||(n[9]=[x(" Clear All Filters ",-1)])]),_:1})])])]),_:1})]),_:1})):b("",!0)}}),Ve={class:"overflow-x-auto"},Pe={class:"w-full"},je={class:"border-b bg-muted/30"},ze={class:"p-4 text-left"},Be=["checked","indeterminate"],Le={class:"p-4 text-left"},Ie={class:"p-4 text-left"},Oe={class:"p-4"},qe=["checked","onChange"],He={class:"p-4"},Ge={class:"flex items-center space-x-3"},Je={class:"font-medium"},Qe={class:"flex items-center space-x-2"},Xe={class:"text-sm text-muted-foreground"},Ze={class:"p-4"},Ke={class:"text-sm"},We={class:"font-medium"},Ye={class:"text-muted-foreground space-y-0.5"},et={key:0,class:"flex items-center space-x-1"},tt={key:1,class:"flex items-center space-x-1"},st={class:"truncate max-w-32"},lt={key:0,class:"mt-1"},rt={class:"flex items-center space-x-2"},ot={class:"w-16 bg-muted rounded-full h-1"},at={class:"text-xs text-muted-foreground"},nt={class:"p-4"},it={class:"space-y-2"},dt={class:"text-xs text-muted-foreground"},ct={class:"p-4"},ut={key:0,class:"text-sm"},mt={class:"font-medium"},ft={class:"text-muted-foreground"},pt={key:0,class:"text-xs text-green-600 font-medium"},ht={key:1,class:"text-sm"},_t={class:"p-4"},vt={class:"text-sm"},gt={class:"text-xs text-muted-foreground"},xt={class:"p-4 text-right"},bt={class:"flex items-center justify-end space-x-2"},yt={key:0,class:"text-center py-12"},Ut={class:"w-20 h-20 bg-muted rounded-full flex items-center justify-center mx-auto mb-4"},wt={class:"text-muted-foreground mb-6"},kt={class:"flex justify-center space-x-3"},$t=A({__name:"UsersTable",props:{users:{},selectedUsers:{},searchTerm:{},selectedRole:{},locale:{default:"nl-NL"}},emits:["update:selectedUsers","toggleSort","updateUserRole","deleteUser","clearFilters","exportUsers"],setup(i,{emit:h}){const a=i,d=h,v=o=>o?new Date(o).toLocaleDateString(a.locale,{day:"2-digit",month:"short",year:"numeric"}):"Never",U=o=>o?new Date(o).toLocaleDateString(a.locale,{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Never",_=o=>o.name?o.name.split(" ").map(t=>t[0]).join("").toUpperCase().substring(0,2):o.email?.charAt(0).toUpperCase()||"U",n=o=>o.customer?.first_name&&o.customer?.last_name?`${o.customer.first_name} ${o.customer.last_name}`:o.name,c=o=>o?"bg-purple-100 text-purple-800 border-purple-200":"bg-blue-100 text-blue-800 border-blue-200",$=o=>o?H:G,D=o=>o?"text-green-600":"text-red-600",C=o=>{if(!o.customer)return 0;let t=0;return["first_name","last_name","phone","address"].forEach(p=>{o.customer?.[p]&&(t+=25)}),t},S=T(()=>a.users.length>0&&a.selectedUsers.length===a.users.length),N=T(()=>a.selectedUsers.length>0&&a.selectedUsers.length<a.users.length),F=T(()=>a.searchTerm||a.selectedRole!==""),M=()=>{S.value?d("update:selectedUsers",[]):d("update:selectedUsers",a.users.map(o=>o.id))},E=o=>{const t=[...a.selectedUsers],s=t.indexOf(o);s>-1?t.splice(s,1):t.push(o),d("update:selectedUsers",t)};return(o,t)=>(m(),y(l(O),{class:"shadow-sm"},{default:f(()=>[r(l(I),{class:"p-0"},{default:f(()=>[e("div",Ve,[e("table",Pe,[e("thead",je,[e("tr",null,[e("th",ze,[e("input",{type:"checkbox",checked:S.value,indeterminate:N.value,onChange:M,class:"rounded border-border"},null,40,Be)]),e("th",Le,[e("button",{onClick:t[0]||(t[0]=s=>d("toggleSort","name")),class:"flex items-center space-x-1 hover:text-primary font-medium group"},[t[4]||(t[4]=e("span",null,"User",-1)),r(l(J),{class:"h-4 w-4 opacity-0 group-hover:opacity-100 transition-opacity"})])]),t[6]||(t[6]=e("th",{class:"p-4 text-left font-medium"},"Profile Info",-1)),t[7]||(t[7]=e("th",{class:"p-4 text-left font-medium"},"Role & Status",-1)),t[8]||(t[8]=e("th",{class:"p-4 text-left font-medium"},"Customer Data",-1)),e("th",Ie,[e("button",{onClick:t[1]||(t[1]=s=>d("toggleSort","created_at")),class:"flex items-center space-x-1 hover:text-primary font-medium group"},[t[5]||(t[5]=e("span",null,"Joined",-1)),r(l(J),{class:"h-4 w-4 opacity-0 group-hover:opacity-100 transition-opacity"})])]),t[9]||(t[9]=e("th",{class:"p-4 text-right font-medium"},"Actions",-1))])]),e("tbody",null,[(m(!0),g(B,null,L(i.users,s=>(m(),g("tr",{key:s.id,class:"border-b hover:bg-muted/30 transition-colors"},[e("td",Oe,[e("input",{type:"checkbox",checked:i.selectedUsers.includes(s.id),onChange:p=>E(s.id),class:"rounded border-border"},null,40,qe)]),e("td",He,[e("div",Ge,[r(l(ie),{class:"h-10 w-10"},{default:f(()=>[s.avatar?(m(),y(l(ce),{key:0,src:s.avatar,alt:s.name},null,8,["src","alt"])):b("",!0),r(l(de),{class:"bg-primary/10 text-primary"},{default:f(()=>[x(u(_(s)),1)]),_:2},1024)]),_:2},1024),e("div",null,[e("p",Je,u(s.name),1),e("div",Qe,[e("p",Xe,u(s.email),1),(m(),y(z(s.email_verified_at?l(Q):l(ue)),{class:j([D(!!s.email_verified_at),"h-3 w-3"]),title:s.email_verified_at?"Email Verified":"Email Not Verified"},null,8,["class","title"]))])])])]),e("td",Ze,[e("div",Ke,[e("p",We,[x(u(n(s))+" ",1),s.name!==n(s)?(m(),y(l(P),{key:0,variant:"outline",class:"ml-1 text-xs"},{default:f(()=>[...t[10]||(t[10]=[x(" Full Profile ",-1)])]),_:1})):b("",!0)]),e("div",Ye,[s.customer?.phone?(m(),g("div",et,[r(l(me),{class:"h-3 w-3"}),e("span",null,u(s.customer.phone),1)])):b("",!0),s.customer?.address?(m(),g("div",tt,[r(l(fe),{class:"h-3 w-3"}),e("span",st,u(s.customer.address),1)])):b("",!0)]),s.customer?(m(),g("div",lt,[e("div",rt,[e("div",ot,[e("div",{class:"bg-primary h-1 rounded-full transition-all",style:K({width:C(s)+"%"})},null,4)]),e("span",at,u(C(s))+"% ",1)])])):b("",!0)])]),e("td",nt,[e("div",it,[r(l(P),{class:j([c(s.is_admin),"text-xs px-2 py-1 border flex items-center w-fit"])},{default:f(()=>[(m(),y(z($(s.is_admin)),{class:"h-3 w-3 mr-1"})),x(" "+u(s.is_admin?"Admin":"User"),1)]),_:2},1032,["class"]),e("div",dt," ID: #"+u(s.id),1)])]),e("td",ct,[s.customer?(m(),g("div",ut,[e("p",mt,u(s.customer.orders_count||0)+" orders",1),e("p",ft," Customer since "+u(v(s.customer.created_at||s.created_at)),1),s.customer.total_spent?(m(),g("div",pt," $"+u((s.customer.total_spent||0).toLocaleString())+" spent ",1)):b("",!0)])):(m(),g("div",ht,[r(l(P),{variant:"outline",class:"text-xs"},{default:f(()=>[r(l(pe),{class:"h-3 w-3 mr-1"}),t[11]||(t[11]=x(" No Customer Profile ",-1))]),_:1})]))]),e("td",_t,[e("div",vt,u(v(s.created_at)),1),e("div",gt,u(U(s.created_at)),1)]),e("td",xt,[e("div",bt,[r(l(w),{variant:"ghost",size:"sm",as:"a",href:`/admin/users/${s.id}`,title:"View & Edit User",class:"h-8 w-8 p-0"},{default:f(()=>[r(l(he),{class:"h-4 w-4"})]),_:1},8,["href"]),r(l(w),{variant:"ghost",size:"sm",onClick:p=>d("deleteUser",s.id,s.name),class:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete User"},{default:f(()=>[r(l(X),{class:"h-4 w-4"})]),_:1},8,["onClick"])])])]))),128))])]),i.users.length===0?(m(),g("div",yt,[e("div",Ut,[r(l(q),{class:"h-10 w-10 text-muted-foreground"})]),t[14]||(t[14]=e("h3",{class:"text-lg font-semibold mb-2"},"No users found",-1)),e("p",wt,u(F.value?"Try adjusting your search filters":"No users have registered yet"),1),e("div",kt,[F.value?(m(),y(l(w),{key:0,variant:"outline",onClick:t[2]||(t[2]=s=>d("clearFilters"))},{default:f(()=>[...t[12]||(t[12]=[x(" Clear Filters ",-1)])]),_:1})):b("",!0),r(l(w),{onClick:t[3]||(t[3]=s=>d("exportUsers"))},{default:f(()=>[r(l(be),{class:"h-4 w-4 mr-2"}),t[13]||(t[13]=x(" Export Data ",-1))]),_:1})])])):b("",!0)])]),_:1})]),_:1}))}}),Ct=_e($t,[["__scopeId","data-v-5d81ee4f"]]),St={class:"min-h-screen bg-muted/20"},Ft={class:"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Rt={class:"flex justify-between items-center mt-4 text-sm text-muted-foreground"},us=A({__name:"Index",props:{users:{type:Object,required:!0},filters:{type:Object,default:()=>({})}},setup(i){const h=R(i.filters.search||""),a=R(i.filters.is_admin!==void 0?i.filters.is_admin:""),d=R([]),v=R(!1),U=T(()=>i.users.total||i.users.data.length),_=[{label:v.value?"Hide":"Show Filters",icon:ge,variant:"outline",onClick:()=>{v.value=!v.value}},{label:"Refresh",icon:xe,variant:"outline",onClick:()=>c()},{label:"Add User",href:"/admin/users/create"}],n=[{label:"Delete Selected",icon:X,variant:"destructive",destructive:!0,onClick:N}];function c(){const t={};h.value&&(t.search=h.value),a.value!==""&&(t.is_admin=a.value),k.get("/admin/users",t,{preserveState:!0,preserveScroll:!0})}function $(){h.value="",a.value="",k.get("/admin/users")}function D(t){console.log("Sort by:",t),c()}function C(t,s){const p=i.users.data.find(Z=>Z.id===t);p&&k.patch(`/admin/users/${t}`,{name:p.name,email:p.email,is_admin:s,first_name:p.customer?.first_name||"",last_name:p.customer?.last_name||"",phone:p.customer?.phone||"",address:p.customer?.address||""},{preserveScroll:!0})}function S(t,s){confirm(`Are you sure you want to delete user "${s}"? This action cannot be undone.`)&&k.delete(`/admin/users/${t}`,{preserveScroll:!0})}function N(){d.value.length!==0&&confirm(`Are you sure you want to delete ${d.value.length} users? This action cannot be undone.`)&&d.value.forEach(t=>{k.delete(`/admin/users/${t}`,{preserveScroll:!0,onSuccess:()=>{d.value=d.value.filter(s=>s!==t)}})})}function F(t){t&&k.visit(t,{preserveState:!0,preserveScroll:!1})}function M(){const t=new URLSearchParams;h.value&&t.append("search",h.value),a.value!==""&&t.append("is_admin",a.value),window.open(`/admin/users/export?${t.toString()}`)}function E(){d.value=[]}let o;return V(h,t=>{clearTimeout(o),o=setTimeout(()=>{c()},500)}),V(a,()=>{c()}),V(v,t=>{_[0].label=t?"Hide Filters":"Show Filters"}),(t,s)=>(m(),y(ee,{title:"Orders Management",breadcrumbs:t.breadcrumbs},{default:f(()=>[e("div",St,[r(l(W),{title:"Users Management"}),r(Y,{title:"Users Management",description:"Manage user accounts, profiles and permissions",icon:l(q),"icon-color":"text-green-600",actions:_},null,8,["icon"]),e("div",Ft,[r($e,{users:i.users.data,"total-users":U.value},null,8,["users","total-users"]),r(te),r(Ee,{"search-term":h.value,"onUpdate:searchTerm":s[0]||(s[0]=p=>h.value=p),"selected-role":a.value,"onUpdate:selectedRole":s[1]||(s[1]=p=>a.value=p),"show-filters":v.value,onClearFilters:$,onApplyFilters:c},null,8,["search-term","selected-role","show-filters"]),r(ne,{"selected-count":d.value.length,"item-name":"user",actions:n,onCancel:E},null,8,["selected-count"]),r(Ct,{users:i.users.data,"selected-users":d.value,"onUpdate:selectedUsers":s[2]||(s[2]=p=>d.value=p),"search-term":h.value,"selected-role":a.value,locale:"en-US",onToggleSort:D,onUpdateUserRole:C,onDeleteUser:S,onClearFilters:$,onExportUsers:M},null,8,["users","selected-users","search-term","selected-role"]),r(ve,{links:i.users.links,onGoToPage:F},null,8,["links"]),e("div",Rt,[e("p",null," Showing "+u(i.users.from||1)+" to "+u(i.users.to||i.users.data.length)+" of "+u(i.users.total||i.users.data.length)+" users ",1),e("p",null,u(d.value.length)+" selected ",1)])])])]),_:1},8,["breadcrumbs"]))}});export{us as default};
