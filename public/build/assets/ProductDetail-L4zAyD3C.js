import{d as V,a as y,b as d,e as c,f as b,u as i,t as u,n as w,l as E,o as s,r as z,h as l,i as m,g as t,q as Q,E as re,c as x,w as ie,F as A,p as M,x as le,k as oe}from"./app-BIsdkUFR.js";import{N as ne}from"./Navbar-DPxRyVQk.js";import{M as ce,_ as ue}from"./Breadcrumb.vue_vue_type_script_setup_true_lang-CDX9aaso.js";import{b as _,_ as q,a as B}from"./index-1wb7NqwU.js";import{A as de}from"./arrow-left-CucpjXOn.js";import{X as me,S as F}from"./Separator.vue_vue_type_script_setup_true_lang-BCygaSuc.js";import{C as X}from"./circle-check-big-CXEo-3Y7.js";import{_ as fe}from"./Input.vue_vue_type_script_setup_true_lang-2lXwBhL7.js";import{_ as N}from"./index-BCDJER87.js";import{C as ve}from"./circle-alert-Cj5AlgGJ.js";import{C as U}from"./circle-x-DgcPig61.js";import{P as ge}from"./plus-0o7YzSEe.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{H as he}from"./heart-Zb1J_MV3.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-CzDr19WN.js";import"./useForwardExpose-DfRgSPHl.js";import"./createContext-Cq00W1KP.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-D3UVaXd0.js";import"./chevron-right-ChP98AYB.js";import"./house-DH-e972f.js";const be=V({__name:"BackButton",props:{href:{default:"/products"},label:{default:"Back to Products"},className:{default:"mb-6"}},setup(e){const v=()=>{e.href.startsWith("http")||e.href.startsWith("/")?E.visit(e.href):window.history.back()};return(k,g)=>(s(),y(i(_),{variant:"outline",size:"sm",onClick:v,class:w(e.className)},{default:d(()=>[c(i(de),{class:"h-4 w-4 mr-2"}),b(" "+u(e.label),1)]),_:1},8,["class"]))}}),ye={class:"flex items-center justify-between"},pe={class:"flex items-center space-x-2"},xe={class:"text-sm text-primary font-medium"},ke=V({__name:"SuccessMessage",props:{message:{},icon:{default:"check"},dismissible:{type:Boolean,default:!1},className:{default:"mb-6"}},setup(e){const v=z(!0),k=()=>{v.value=!1},g=f=>{switch(f){case"cart":return F;case"check":default:return X}};return(f,a)=>v.value&&(e.message||f.$page.props.flash?.success)?(s(),l("div",{key:0,class:w(e.className)},[c(i(q),{class:"border-primary/20 bg-primary/10"},{default:d(()=>[c(i(B),{class:"p-4"},{default:d(()=>[t("div",ye,[t("div",pe,[(s(),y(Q(g(e.icon)),{class:"h-4 w-4 text-primary"})),t("p",xe,u(e.message||f.$page.props.flash?.success),1)]),e.dismissible?(s(),l("button",{key:0,onClick:k,class:"text-primary hover:text-primary/80 transition-colors"},[c(i(me),{class:"h-4 w-4"})])):m("",!0)])]),_:1})]),_:1})],2)):m("",!0)}}),we={class:"grid grid-cols-1 lg:grid-cols-2 gap-12 mb-12"},$e={class:"space-y-6 p-6"},_e={class:"relative aspect-square bg-muted rounded-lg overflow-hidden"},Ce=["src","alt"],Pe={class:"space-y-6 p-6"},Se={class:"text-3xl font-bold"},ze={class:"space-y-2"},Ne={class:"text-3xl font-bold text-primary"},Ie={key:0,class:"text-sm text-muted-foreground"},Ve={key:1,class:"bg-blue-50 border border-blue-200 rounded-lg p-3"},Ae={key:2,class:"space-y-3"},Me={class:"flex gap-2"},je=["onClick","title"],Te={key:0,class:"text-sm text-gray-600"},Oe={key:3,class:"space-y-3"},qe={class:"flex gap-2"},Be=["onClick"],De={key:0,class:"text-sm text-gray-600"},Fe={class:"space-y-2"},Re={key:0,class:"flex items-center space-x-2 text-success"},Ue={class:"text-sm font-medium"},Ee={key:1,class:"flex items-center space-x-2 text-info"},Qe={class:"text-sm font-medium"},Xe={key:2,class:"flex items-center space-x-2 text-destructive"},He={class:"text-sm font-medium"},Le={key:3,class:"text-warning text-sm"},We={key:4,class:"space-y-4"},Ke={class:"space-y-2"},Ye={class:"flex items-center space-x-3"},Je={class:"flex items-center border rounded-md"},Ge={class:"text-sm text-muted-foreground"},Ze={key:1,class:"animate-spin h-4 w-4 mr-2 border-2 border-white border-t-transparent rounded-full"},et={key:5,class:"p-4 bg-info/10 border border-info/20 rounded-lg"},tt=V({__name:"ProductDetails",props:{product:{type:Object,required:!0},user:{type:Object,default:null}},setup(e){const v=re(),k=x(()=>!!(v.props.auth?.user||v.props.user||v.props.auth_user||v.props.authUser));x(()=>v.props.auth?.user||v.props.user||v.props.auth_user||v.props.authUser||null);const g=o=>{const r=o||window.location.pathname,n=`?redirect=${encodeURIComponent(r)}`;E.visit(`/login${n}`)},f=(o,r)=>k.value?(typeof o=="function"&&o(),!0):(g(r),!1),a=z(1),p=z(null),$=z(null),C=z(!1),I=z(""),S=z(""),h=x(()=>!e.product.has_variants||!p.value||!$.value?null:e.product.variants.find(o=>o.color_id===p.value&&o.size_id===$.value)),D=x(()=>{if(!e.product.has_variants||!p.value)return e.product.available_sizes||[];const r=e.product.variants.filter(n=>n.color_id===p.value).map(n=>n.size_id);return e.product.available_sizes.filter(n=>r.includes(n.id))}),L=x(()=>h.value?h.value.price:e.product.price),j=x(()=>e.product.has_variants?h.value?h.value.stock:e.product.variants.reduce((r,n)=>r+parseInt(n.stock||0),0):e.product.stock||0),W=x(()=>e.product.is_donatable?!0:e.product.has_variants?h.value?h.value.stock>0:e.product.variants.some(o=>o.stock>0):(e.product.stock||0)>0),R=x(()=>e.product.is_donatable?!0:e.product.has_variants?h.value&&h.value.stock>0:W.value),T=x(()=>{if(e.product.is_donatable)return 99;if(e.product.has_variants&&h.value)return Math.min(h.value.stock,99);if(e.product.has_variants&&!h.value){const o=Math.max(...e.product.variants.map(r=>r.stock||0));return Math.min(o,99)}return Math.min(j.value,99)}),P=x(()=>{if(e.product.is_donatable)return{type:"donation",message:"Available for donation"};if(e.product.has_variants){if(h.value)return h.value.stock>0?{type:"in-stock",message:`${h.value.stock} in stock for this variant`}:{type:"out-of-stock",message:"This variant is out of stock"};{const o=e.product.variants.filter(r=>r.stock>0);return o.length>0?{type:"variants-available",message:`${o.length} variants available (Total: ${j.value} items)`}:{type:"out-of-stock",message:"All variants are out of stock"}}}return j.value>0?{type:"in-stock",message:`${j.value} in stock`}:{type:"out-of-stock",message:"Out of stock"}}),K=x(()=>{switch(S.value){case"success":return X;case"error":return U;case"warning":return ve;default:return null}}),Y=x(()=>{const o="flex items-center space-x-2 p-3 rounded-lg text-sm font-medium";switch(S.value){case"success":return o+" bg-success/10 text-success border border-success/20";case"error":return o+" bg-destructive/10 text-destructive border border-destructive/20";case"warning":return o+" bg-warning/10 text-warning border border-warning/20";default:return o+" bg-info/10 text-info border border-info/20"}});ie(p,()=>{$.value=null});const J=o=>parseFloat(o.toString()).toFixed(2),G=o=>{p.value=o},Z=o=>{$.value=o},ee=()=>{a.value<T.value&&a.value++},te=()=>{a.value>1&&a.value--},O=(o,r)=>{I.value=o,S.value=r,r==="success"&&setTimeout(()=>{I.value="",S.value=""},3e3)},se=()=>{f(()=>{if(e.product.has_variants&&!h.value){O("Please select both color and size before adding to cart.","warning");return}C.value=!0,I.value="";const o={quantity:a.value};h.value&&(o.variant_id=h.value.id),fetch(`/cart/add/${e.product.id}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content,"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(o)}).then(async r=>{const n=await r.json();r.ok&&n.success?O(n.message||"Item added to cart successfully!","success"):O(n.message||"Failed to add item to cart.","error")}).catch(r=>{console.error("Error:",r),O("Something went wrong. Please try again.","error")}).finally(()=>{C.value=!1})},window.location.pathname)};return(o,r)=>(s(),l("div",we,[t("div",$e,[t("div",_e,[t("img",{src:e.product.image||"/placeholder.jpg",alt:e.product.name,class:"w-full h-full object-cover"},null,8,Ce),e.product.is_donatable?(s(),y(i(N),{key:0,class:"absolute top-4 right-4 bg-warning/20 text-warning"},{default:d(()=>[...r[2]||(r[2]=[b(" Donation ",-1)])]),_:1})):m("",!0)])]),t("div",Pe,[c(i(N),{variant:"outline",class:"capitalize"},{default:d(()=>[b(u(e.product.category?.name||"Uncategorized"),1)]),_:1}),t("h1",Se,u(e.product.name),1),t("div",ze,[t("span",Ne,"$"+u(J(L.value)),1),e.product.is_donatable?(s(),l("p",Ie," This is a donation item. ")):m("",!0)]),I.value?(s(),l("div",{key:0,class:w(Y.value)},[(s(),y(Q(K.value),{class:"h-4 w-4 flex-shrink-0"})),t("span",null,u(I.value),1),S.value==="error"||S.value==="warning"?(s(),l("button",{key:0,onClick:r[0]||(r[0]=n=>{I.value="",S.value=""}),class:"ml-auto"},[c(i(U),{class:"h-4 w-4"})])):m("",!0)],2)):m("",!0),k.value?m("",!0):(s(),l("div",Ve,[...r[3]||(r[3]=[t("p",{class:"text-sm text-blue-800"},[t("span",{class:"font-medium"},"Not signed in."),b(" You'll be redirected to login when adding items to cart. ")],-1)])])),e.product.has_variants&&e.product.available_colors?(s(),l("div",Ae,[r[4]||(r[4]=t("h4",{class:"font-medium"},"Color:",-1)),t("div",Me,[(s(!0),l(A,null,M(e.product.available_colors,n=>(s(),l("button",{key:n.id,onClick:ae=>G(n.id),class:w(["w-12 h-12 rounded-full border-2 transition-all",p.value===n.id?"ring-2 ring-primary ring-offset-2":"border-gray-300"]),style:le({backgroundColor:n.hex_code}),title:n.name},null,14,je))),128))]),p.value?(s(),l("p",Te," Selected: "+u(e.product.available_colors.find(n=>n.id===p.value)?.name),1)):m("",!0)])):m("",!0),e.product.has_variants&&D.value.length>0?(s(),l("div",Oe,[r[5]||(r[5]=t("h4",{class:"font-medium"},"Size:",-1)),t("div",qe,[(s(!0),l(A,null,M(D.value,n=>(s(),l("button",{key:n.id,onClick:ae=>Z(n.id),class:w(["px-4 py-2 border rounded-md transition-all",$.value===n.id?"border-primary bg-primary text-white":"border-gray-300 hover:border-primary"])},u(n.name),11,Be))),128))]),$.value?(s(),l("p",De," Selected: "+u(D.value.find(n=>n.id===$.value)?.name),1)):m("",!0)])):m("",!0),t("div",Fe,[P.value.type==="in-stock"||P.value.type==="variants-available"?(s(),l("div",Re,[r[6]||(r[6]=t("div",{class:"w-2 h-2 bg-success rounded-full"},null,-1)),t("span",Ue,u(P.value.message),1)])):P.value.type==="donation"?(s(),l("div",Ee,[r[7]||(r[7]=t("div",{class:"w-2 h-2 bg-info rounded-full"},null,-1)),t("span",Qe,u(P.value.message),1)])):P.value.type==="out-of-stock"?(s(),l("div",Xe,[r[8]||(r[8]=t("div",{class:"w-2 h-2 bg-destructive rounded-full"},null,-1)),t("span",He,u(P.value.message),1)])):m("",!0),e.product.has_variants&&(!p.value||!$.value)?(s(),l("div",Le," Please select "+u(p.value?"":"color")+u(!p.value&&!$.value?" and ":"")+u($.value?"":"size"),1)):m("",!0)]),R.value||P.value.type==="variants-available"?(s(),l("div",We,[t("div",Ke,[r[9]||(r[9]=t("label",{class:"text-sm font-medium"},"Quantity",-1)),t("div",Ye,[t("div",Je,[c(i(_),{size:"sm",variant:"ghost",onClick:te,disabled:a.value<=1||C.value,class:"h-10 w-10 p-0"},{default:d(()=>[c(i(ce),{class:"h-4 w-4"})]),_:1},8,["disabled"]),c(i(fe),{modelValue:a.value,"onUpdate:modelValue":r[1]||(r[1]=n=>a.value=n),modelModifiers:{number:!0},max:T.value,min:"1",type:"number",disabled:C.value,class:"h-10 w-16 text-center border-0"},null,8,["modelValue","max","disabled"]),c(i(_),{size:"sm",variant:"ghost",onClick:ee,disabled:a.value>=T.value||C.value,class:"h-10 w-10 p-0"},{default:d(()=>[c(i(ge),{class:"h-4 w-4"})]),_:1},8,["disabled"])]),t("span",Ge," Max: "+u(T.value),1)])]),c(i(_),{onClick:se,disabled:!R.value||C.value,size:"lg",class:w(["w-full",C.value?"opacity-75 cursor-not-allowed":""])},{default:d(()=>[C.value?(s(),l("div",Ze)):(s(),y(i(F),{key:0,class:"h-4 w-4 mr-2"})),b(" "+u(C.value?"Adding...":e.product.is_donatable?"Donate Now":"Add to Cart"),1)]),_:1},8,["disabled","class"])])):e.product.has_variants&&P.value.type==="variants-available"?(s(),l("div",et,[...r[10]||(r[10]=[t("p",{class:"text-info font-medium"},"Please select color and size to continue",-1)])])):m("",!0)])]))}}),st=H(tt,[["__scopeId","data-v-1f0aa18b"]]),at={class:"prose max-w-none"},rt={key:0},it={class:"text-muted-foreground leading-relaxed whitespace-pre-line"},lt={class:"space-y-2"},ot={class:"text-muted-foreground"},nt={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},ct={class:"text-muted-foreground font-medium"},ut={class:"font-semibold"},dt=V({__name:"ProductDescription",props:{description:{},specifications:{},features:{},className:{default:"mb-12"}},setup(e){const v=e.description||e.specifications||e.features?.length;return(k,g)=>i(v)?(s(),y(i(q),{key:0,class:w(e.className)},{default:d(()=>[c(i(B),{class:"p-6"},{default:d(()=>[t("div",at,[e.description?(s(),l("div",rt,[g[0]||(g[0]=t("h3",{class:"text-xl font-semibold mb-4"},"Product Description",-1)),t("div",it,u(e.description),1)])):m("",!0),e.features?.length?(s(),l("div",{key:1,class:w({"mt-8":e.description})},[g[2]||(g[2]=t("h4",{class:"font-semibold mb-3"},"Key Features",-1)),t("ul",lt,[(s(!0),l(A,null,M(e.features,(f,a)=>(s(),l("li",{key:a,class:"flex items-start space-x-2"},[g[1]||(g[1]=t("div",{class:"w-1.5 h-1.5 bg-primary/80 rounded-full mt-2 flex-shrink-0"},null,-1)),t("span",ot,u(f),1)]))),128))])],2)):m("",!0),e.specifications?(s(),l("div",{key:2,class:w({"mt-8":e.description||e.features?.length})},[g[3]||(g[3]=t("h4",{class:"font-semibold mb-4"},"Specifications",-1)),t("div",nt,[(s(!0),l(A,null,M(e.specifications,(f,a)=>(s(),l("div",{key:a,class:"flex justify-between items-center py-2 px-3 bg-muted/30 rounded-lg"},[t("span",ct,u(a)+":",1),t("span",ut,u(f),1)]))),128))])],2)):m("",!0)])]),_:1})]),_:1},8,["class"])):(s(),y(i(q),{key:1,class:w(e.className)},{default:d(()=>[c(i(B),{class:"p-6 text-center"},{default:d(()=>[...g[4]||(g[4]=[t("p",{class:"text-muted-foreground"},"No additional product information available.",-1)])]),_:1})]),_:1},8,["class"]))}}),mt={class:"flex items-center justify-between"},ft={class:"text-2xl font-bold"},vt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"},gt={class:"relative overflow-hidden"},ht=["src","alt"],bt={class:"absolute top-3 left-3"},yt={class:"absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-all duration-300"},pt={class:"absolute bottom-3 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300"},xt={class:"font-semibold line-clamp-2 group-hover:text-primary transition-colors"},kt=["href"],wt={class:"flex items-center justify-between"},$t={class:"flex flex-col"},_t={class:"text-lg font-bold text-primary"},Ct={key:0,class:"text-sm text-muted-foreground line-through"},Pt={class:"flex space-x-2"},St={key:0,class:"text-center"},zt=V({__name:"RelatedProducts",props:{products:{},title:{default:"Related Products"},maxItems:{default:4},className:{default:""}},setup(e){const v=g=>parseFloat(g.toString()).toFixed(2),k=e.products.slice(0,e.maxItems);return(g,f)=>e.products.length?(s(),l("div",{key:0,class:w(`space-y-6 ${e.className}`)},[t("div",mt,[t("h2",ft,u(e.title),1),e.products.length>e.maxItems?(s(),y(i(_),{key:0,variant:"outline",size:"sm",as:"a",href:"/products"},{default:d(()=>[...f[0]||(f[0]=[b(" View All ",-1)])]),_:1})):m("",!0)]),t("div",vt,[(s(!0),l(A,null,M(i(k),a=>(s(),y(i(q),{key:a.id,class:"group overflow-hidden hover:shadow-xl hover:scale-[1.02] transition-all duration-500 cursor-pointer border-0 shadow-md"},{default:d(()=>[t("div",gt,[t("img",{src:a.image||"/placeholder-product.jpg",alt:a.name,class:"h-48 w-full object-cover group-hover:scale-110 transition-transform duration-700",loading:"lazy"},null,8,ht),t("div",bt,[a.is_donatable?(s(),y(i(N),{key:0,class:"bg-warning text-warning-foreground"},{default:d(()=>[...f[1]||(f[1]=[b(" Donation ",-1)])]),_:1})):a.stock<10&&a.stock>0?(s(),y(i(N),{key:1,variant:"destructive"},{default:d(()=>[b(" Only "+u(a.stock)+" left ",1)]),_:2},1024)):a.stock===0?(s(),y(i(N),{key:2,variant:"destructive"},{default:d(()=>[...f[2]||(f[2]=[b(" Out of Stock ",-1)])]),_:1})):a.original_price&&a.original_price>a.price?(s(),y(i(N),{key:3,class:"bg-destructive/80 text-destructive-foreground"},{default:d(()=>[b(u(Math.round((a.original_price-a.price)/a.original_price*100))+"% OFF ",1)]),_:2},1024)):m("",!0)]),t("div",yt,[c(i(_),{size:"icon",variant:"secondary",class:"shadow-lg mb-2",title:"Add to wishlist"},{default:d(()=>[c(i(he),{class:"h-4 w-4"})]),_:1})]),t("div",pt,[c(i(_),{size:"sm",variant:"secondary",class:"shadow-lg",as:"a",href:`/products/${a.slug}`},{default:d(()=>[...f[3]||(f[3]=[b(" Quick View ",-1)])]),_:1},8,["href"])])]),c(i(B),{class:"p-4 space-y-3"},{default:d(()=>[t("h3",xt,[t("a",{href:`/products/${a.slug}`,class:"hover:underline"},u(a.name),9,kt)]),c(i(N),{variant:"outline",class:"text-xs capitalize"},{default:d(()=>[b(u(a.category?.name||"Uncategorized"),1)]),_:2},1024),t("div",wt,[t("div",$t,[t("span",_t," $"+u(v(a.price)),1),a.original_price&&a.original_price>a.price?(s(),l("span",Ct," $"+u(v(a.original_price)),1)):m("",!0)]),t("div",Pt,[c(i(_),{size:"sm",variant:"outline",as:"a",href:`/products/${a.slug}`,class:"hover:scale-105 transition-all duration-300"},{default:d(()=>[...f[4]||(f[4]=[b(" View ",-1)])]),_:1},8,["href"]),a.stock>0||a.is_donatable?(s(),y(i(_),{key:0,size:"sm",variant:"default",class:"hover:scale-105 transition-all duration-300",title:"Add to cart"},{default:d(()=>[c(i(F),{class:"h-4 w-4"})]),_:1})):m("",!0)])])]),_:2},1024)]),_:2},1024))),128))]),e.products.length>e.maxItems?(s(),l("div",St,[c(i(_),{variant:"outline",as:"a",href:"/products"},{default:d(()=>[b(" View More Products ("+u(e.products.length-e.maxItems)+" more) ",1)]),_:1})])):m("",!0)],2)):m("",!0)}}),Nt=H(zt,[["__scopeId","data-v-aeeffedd"]]),It={class:"min-h-screen bg-background text-foreground"},Vt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Gt=V({__name:"ProductDetail",props:{product:{type:Object,required:!0},relatedProducts:{type:Array,default:()=>[]},categories:{type:Array,default:()=>[]},auth:{type:Object,default:()=>({})},cartItems:{type:Array,default:()=>[]},settings:{type:Object,default:()=>({})}},setup(e){const v=e.settings.site_name||"Elegant Store",k=e.auth.user,g=[{label:"Home",href:"/"},{label:"Products",href:"/products"},{label:e.product.category?.name||"Uncategorized",href:`/products?category=${e.product.category?.slug}`},{label:e.product.name,isActive:!0}];return(f,a)=>(s(),l("div",It,[c(i(oe),{title:e.product.name},null,8,["title"]),c(ne,{categories:e.categories,cartItems:e.cartItems,user:i(k),siteName:i(v),settings:e.settings},null,8,["categories","cartItems","user","siteName","settings"]),t("div",Vt,[c(ue,{items:g}),c(be,{href:"/products",label:"Back to Products"}),c(ke,{icon:"cart",dismissible:!0}),c(st,{product:e.product,user:i(k)},null,8,["product","user"]),c(dt,{description:e.product.description,specifications:e.product.specifications,features:e.product.features},null,8,["description","specifications","features"]),c(Nt,{products:e.relatedProducts,title:"You might also like",maxItems:4},null,8,["products"])])]))}});export{Gt as default};
