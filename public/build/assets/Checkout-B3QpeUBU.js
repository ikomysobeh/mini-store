import{d as O,h as p,n as m,g as e,e as o,u as s,a as $,i as S,b as n,f,o as i,r as N,c as C,m as k,D as q,t as g,v as U,q as R,F as Y,p as H,k as G,l as L}from"./app-Z0p12ZY1.js";import{N as Q}from"./Navbar-Cuj9huaO.js";import{_ as b}from"./index-C6EVsNTI.js";import{S as h,U as J}from"./Separator.vue_vue_type_script_setup_true_lang-CcQ1zeyN.js";import{S as T}from"./star-AQOq2RfL.js";import{G as K}from"./gift-D0qmNzxi.js";import{H as M}from"./heart-B17uU2Pp.js";import{_ as D}from"./Input.vue_vue_type_script_setup_true_lang-DvD9KkSn.js";import{_}from"./Label.vue_vue_type_script_setup_true_lang-CRV5D4cp.js";import{a as V,_ as A}from"./CardContent.vue_vue_type_script_setup_true_lang-CQMrU5cX.js";import{a as j,_ as P}from"./CardTitle.vue_vue_type_script_setup_true_lang-CfCcFyYB.js";import{_ as z}from"./index-D-oT8fIx.js";import{M as W}from"./message-square-B1zVA09T.js";import{C as X}from"./credit-card-CGMbiSdw.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-B8VpEueL.js";import"./useForwardExpose-BHvqp7Az.js";import"./createContext-cbrDoWMw.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-DREzg87R.js";const ee={class:"w-32 h-32 bg-gradient-to-br from-muted to-muted/60 rounded-full flex items-center justify-center mx-auto mb-8 shadow-inner"},te={class:"flex flex-col sm:flex-row gap-4 justify-center mb-12"},se={class:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-3xl mx-auto"},oe={class:"text-center p-6 bg-blue-50 rounded-xl"},re={class:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4"},ae={class:"text-center p-6 bg-red-50 rounded-xl"},le={class:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},ne={class:"text-center p-6 bg-green-50 rounded-xl"},de={class:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4"},ie={class:"mt-12 p-6 bg-muted/30 rounded-xl max-w-md mx-auto"},ue={class:"flex flex-col sm:flex-row gap-2 justify-center"},ce=O({__name:"EmptyCartState",props:{className:{default:""},showDonationOption:{type:Boolean,default:!1}},setup(u){return(v,r)=>(i(),p("div",{class:m(`text-center py-20 ${u.className}`)},[e("div",ee,[o(s(h),{class:"h-16 w-16 text-muted-foreground"})]),r[13]||(r[13]=e("h2",{class:"text-3xl font-bold mb-3"},"Your cart is empty",-1)),r[14]||(r[14]=e("p",{class:"text-muted-foreground mb-8 max-w-md mx-auto"}," Add some items to your cart to proceed with checkout. Browse our collection of amazing products! ",-1)),e("div",te,[o(s(b),{as:"a",href:"/products",size:"lg",class:"min-w-48"},{default:n(()=>[o(s(h),{class:"h-5 w-5 mr-2"}),r[0]||(r[0]=f(" Start Shopping ",-1))]),_:1}),o(s(b),{variant:"outline",as:"a",href:"/products?featured=true",size:"lg"},{default:n(()=>[o(s(T),{class:"h-5 w-5 mr-2"}),r[1]||(r[1]=f(" View Featured Products ",-1))]),_:1}),u.showDonationOption?(i(),$(s(b),{key:0,variant:"outline",as:"a",href:"/products?type=donation",size:"lg",class:"border-orange-200 text-orange-700 hover:bg-orange-50"},{default:n(()=>[o(s(K),{class:"h-5 w-5 mr-2"}),r[2]||(r[2]=f(" Make a Donation ",-1))]),_:1})):S("",!0)]),e("div",se,[e("div",oe,[e("div",re,[o(s(h),{class:"h-6 w-6 text-blue-600"})]),r[3]||(r[3]=e("h3",{class:"font-semibold mb-2"},"Browse Products",-1)),r[4]||(r[4]=e("p",{class:"text-sm text-muted-foreground"},"Discover our wide range of quality products and amazing deals",-1))]),e("div",ae,[e("div",le,[o(s(M),{class:"h-6 w-6 text-red-600"})]),r[5]||(r[5]=e("h3",{class:"font-semibold mb-2"},"Check Wishlist",-1)),r[6]||(r[6]=e("p",{class:"text-sm text-muted-foreground"},"Items you've saved for later are waiting for you",-1))]),e("div",ne,[e("div",de,[o(s(T),{class:"h-6 w-6 text-green-600"})]),r[7]||(r[7]=e("h3",{class:"font-semibold mb-2"},"Featured Items",-1)),r[8]||(r[8]=e("p",{class:"text-sm text-muted-foreground"},"Our handpicked recommendations just for you",-1))])]),e("div",ie,[r[11]||(r[11]=e("h4",{class:"font-semibold mb-2"},"Need Help?",-1)),r[12]||(r[12]=e("p",{class:"text-sm text-muted-foreground mb-4"}," Contact our customer support for assistance with your order ",-1)),e("div",ue,[o(s(b),{variant:"outline",size:"sm",as:"a",href:"/contact"},{default:n(()=>[...r[9]||(r[9]=[f(" Contact Support ",-1)])]),_:1}),o(s(b),{variant:"outline",size:"sm",as:"a",href:"/help"},{default:n(()=>[...r[10]||(r[10]=[f(" View FAQ ",-1)])]),_:1})])])],2))}}),me={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},pe={class:"lg:col-span-2 space-y-8"},fe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ve={class:"flex flex-col items-center text-center space-y-4"},ge={key:0,class:"absolute top-3 right-3"},xe={class:"flex flex-col items-center text-center space-y-4"},ye={key:0,class:"absolute top-3 right-3"},be={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},he={class:"space-y-2"},we={class:"space-y-2"},_e={class:"space-y-2"},ke={key:0,class:"space-y-2"},Se={class:"space-y-2"},$e=["placeholder"],Ce={class:"lg:col-span-1"},Ie={class:"sticky top-24 space-y-6"},Ne={class:"space-y-3"},De={class:"flex items-center space-x-3"},Ve=["src","alt"],Ae={key:1,class:"w-12 h-12 bg-muted rounded flex items-center justify-center border"},je={class:"font-medium"},Pe={class:"text-muted-foreground"},Me={class:"font-bold"},Oe={class:"border-t pt-4"},Fe={class:"flex justify-between text-xl font-bold"},qe={key:0,class:"bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-lg p-4 text-center"},Ue={key:1,class:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4 text-center"},Te={key:0,class:"flex items-center"},ze={key:1,class:"flex items-center justify-center"},Ee=O({__name:"CheckoutContent",props:{cartItems:{},customer:{default:null},user:{default:null},shippingMethods:{default:()=>[]},paymentMethods:{default:()=>[]}},setup(u){const v=u,r=N(!1),a=N("purchase"),d=N({first_name:v.customer?.first_name||"",last_name:v.customer?.last_name||"",phone:v.customer?.phone||"",address:v.customer?.address||"",notes:""}),w=C(()=>v.cartItems.reduce((c,t)=>c+t.price*t.quantity,0)),y=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(c),x=c=>c.product?.name||c.product_name||"Product",I=c=>c.product?.image||null,F=C(()=>d.value.first_name&&d.value.last_name&&(a.value==="donation"||d.value.address)),E=async()=>{if(!(r.value||!F.value)){r.value=!0;try{const c=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");if(!c)throw new Error("CSRF token not found. Please refresh the page.");const t=await fetch("/orders",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":c,Accept:"application/json"},credentials:"same-origin",body:JSON.stringify({is_donation:a.value==="donation",first_name:d.value.first_name,last_name:d.value.last_name,phone:d.value.phone,address:d.value.address,notes:d.value.notes})});if(!t.ok){const B=await t.text();throw console.error("Response error:",t.status,B),new Error(`Server error: ${t.status}`)}const l=await t.json();if(l.url)window.location.href=l.url;else throw new Error("No checkout URL received")}catch(c){console.error("Order creation error:",c),alert(`Failed to create order: ${c.message}`)}finally{r.value=!1}}};return(c,t)=>(i(),p("div",me,[e("div",pe,[o(s(A),null,{default:n(()=>[o(s(j),null,{default:n(()=>[o(s(P),{class:"text-center text-xl"},{default:n(()=>[...t[7]||(t[7]=[f("Choose Your Option",-1)])]),_:1})]),_:1}),o(s(V),null,{default:n(()=>[e("div",fe,[e("label",{class:m(["relative cursor-pointer rounded-xl border-2 p-6 focus:outline-none transition-all hover:shadow-md",a.value==="purchase"?"border-blue-500 bg-blue-500 shadow-md":"border-gray-200 hover:border-blue-300 bg-white"])},[k(e("input",{type:"radio",value:"purchase","onUpdate:modelValue":t[0]||(t[0]=l=>a.value=l),class:"sr-only"},null,512),[[q,a.value]]),e("div",ve,[e("div",{class:m(["p-4 rounded-full",a.value==="purchase"?"bg-blue-600":"bg-blue-100"])},[o(s(h),{class:m(["h-8 w-8",a.value==="purchase"?"text-white":"text-blue-600"])},null,8,["class"])],2),e("div",null,[e("h3",{class:m(["font-bold text-lg transition-colors",a.value==="purchase"?"text-yellow-100":"text-gray-900"])}," Purchase Items ",2),e("p",{class:m(["text-sm transition-colors",a.value==="purchase"?"text-yellow-100":"text-gray-600"])}," Get the actual products delivered ",2)])]),e("div",{class:m(["mt-4 space-y-1 text-sm transition-colors",a.value==="purchase"?"text-yellow-100":"text-gray-600"])},[...t[8]||(t[8]=[e("p",null,"âœ“ Admin will contact you",-1),e("p",null,"âœ“ Free delivery arrangement",-1),e("p",null,"âœ“ Address required",-1)])],2),a.value==="purchase"?(i(),p("div",ge,[o(s(z),{class:"bg-yellow-200 text-blue-800 border border-yellow-300"},{default:n(()=>[...t[9]||(t[9]=[f("Selected âœ“",-1)])]),_:1})])):S("",!0)],2),e("label",{class:m(["relative cursor-pointer rounded-xl border-2 p-6 focus:outline-none transition-all hover:shadow-md",a.value==="donation"?"border-red-500 bg-red-500 shadow-md":"border-gray-200 hover:border-red-300 bg-white"])},[k(e("input",{type:"radio",value:"donation","onUpdate:modelValue":t[1]||(t[1]=l=>a.value=l),class:"sr-only"},null,512),[[q,a.value]]),e("div",xe,[e("div",{class:m(["p-4 rounded-full",a.value==="donation"?"bg-red-600":"bg-red-100"])},[o(s(M),{class:m(["h-8 w-8",a.value==="donation"?"text-white":"text-red-600"])},null,8,["class"])],2),e("div",null,[e("h3",{class:m(["font-bold text-lg transition-colors",a.value==="donation"?"text-yellow-100":"text-gray-900"])}," Donate Amount ",2),e("p",{class:m(["text-sm transition-colors",a.value==="donation"?"text-yellow-100":"text-gray-600"])}," Support our cause financially ",2)])]),e("div",{class:m(["mt-4 space-y-1 text-sm transition-colors",a.value==="donation"?"text-yellow-100":"text-gray-600"])},[...t[10]||(t[10]=[e("p",null,"â¤ï¸ Support our mission",-1),e("p",null,"ðŸ“§ Tax-exempt receipt",-1),e("p",null,"ðŸŽ¯ 100% goes to cause",-1)])],2),a.value==="donation"?(i(),p("div",ye,[o(s(z),{class:"bg-yellow-200 text-red-800 border border-yellow-300"},{default:n(()=>[...t[11]||(t[11]=[f("Selected âœ“",-1)])]),_:1})])):S("",!0)],2)])]),_:1})]),_:1}),o(s(A),null,{default:n(()=>[o(s(j),null,{default:n(()=>[o(s(P),{class:"flex items-center space-x-2"},{default:n(()=>[o(s(J),{class:"h-5 w-5"}),e("span",null,g(a.value==="donation"?"Donor":"Customer")+" Information",1)]),_:1})]),_:1}),o(s(V),{class:"space-y-4"},{default:n(()=>[e("div",be,[e("div",he,[o(s(_),{for:"first_name"},{default:n(()=>[...t[12]||(t[12]=[f("First Name *",-1)])]),_:1}),o(s(D),{id:"first_name",modelValue:d.value.first_name,"onUpdate:modelValue":t[2]||(t[2]=l=>d.value.first_name=l),required:"",placeholder:"Enter your first name"},null,8,["modelValue"])]),e("div",we,[o(s(_),{for:"last_name"},{default:n(()=>[...t[13]||(t[13]=[f("Last Name *",-1)])]),_:1}),o(s(D),{id:"last_name",modelValue:d.value.last_name,"onUpdate:modelValue":t[3]||(t[3]=l=>d.value.last_name=l),required:"",placeholder:"Enter your last name"},null,8,["modelValue"])])]),e("div",_e,[o(s(_),{for:"phone"},{default:n(()=>[...t[14]||(t[14]=[f("Phone Number",-1)])]),_:1}),o(s(D),{id:"phone",modelValue:d.value.phone,"onUpdate:modelValue":t[4]||(t[4]=l=>d.value.phone=l),type:"tel",placeholder:"Your contact number"},null,8,["modelValue"])]),a.value==="purchase"?(i(),p("div",ke,[o(s(_),{for:"address"},{default:n(()=>[...t[15]||(t[15]=[f("Delivery Address *",-1)])]),_:1}),k(e("textarea",{id:"address","onUpdate:modelValue":t[5]||(t[5]=l=>d.value.address=l),required:"",rows:"3",placeholder:"Your address in Suwayda (neighborhood like Al-Nahdah, Al-Shuhada, street & building number)",class:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[U,d.value.address]]),t[16]||(t[16]=e("p",{class:"text-sm text-blue-600 flex items-center"}," ðŸ“ž Our admin will contact you to coordinate the delivery ",-1))])):S("",!0),e("div",Se,[o(s(_),{for:"notes",class:"flex items-center space-x-2"},{default:n(()=>[o(s(W),{class:"h-4 w-4"}),t[17]||(t[17]=e("span",null,"Additional Notes (Optional)",-1))]),_:1}),k(e("textarea",{id:"notes","onUpdate:modelValue":t[6]||(t[6]=l=>d.value.notes=l),rows:"2",placeholder:a.value==="donation"?"Any message or special instructions...":"Delivery instructions, preferred time, etc...",class:"flex min-h-[60px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,8,$e),[[U,d.value.notes]])])]),_:1})]),_:1})]),e("div",Ce,[e("div",Ie,[o(s(A),null,{default:n(()=>[o(s(j),null,{default:n(()=>[o(s(P),{class:"flex items-center space-x-2"},{default:n(()=>[(i(),$(R(a.value==="donation"?s(M):s(h)),{class:"h-5 w-5"})),e("span",null,g(a.value==="donation"?"Donation":"Order")+" Summary",1)]),_:1})]),_:1}),o(s(V),{class:"space-y-4"},{default:n(()=>[e("div",Ne,[(i(!0),p(Y,null,H(u.cartItems,l=>(i(),p("div",{key:l.id,class:"flex justify-between items-center text-sm"},[e("div",De,[I(l)?(i(),p("img",{key:0,src:I(l),alt:x(l),class:"w-12 h-12 object-cover rounded border"},null,8,Ve)):(i(),p("div",Ae,[o(s(h),{class:"h-5 w-5 text-muted-foreground"})])),e("div",null,[e("p",je,g(x(l)),1),e("p",Pe,"Qty: "+g(l.quantity),1)])]),e("p",Me,g(y(l.price*l.quantity)),1)]))),128))]),e("div",Oe,[e("div",Fe,[e("span",null,g(a.value==="donation"?"Donation Amount":"Total")+":",1),e("span",null,g(y(w.value)),1)])]),a.value==="donation"?(i(),p("div",qe,[...t[18]||(t[18]=[e("p",{class:"text-sm text-red-700 font-medium"},"ðŸ™ Thank you for supporting our cause!",-1),e("p",{class:"text-xs text-red-600 mt-1"},"Tax-exempt receipt will be emailed to you",-1)])])):(i(),p("div",Ue,[...t[19]||(t[19]=[e("p",{class:"text-sm text-blue-700 font-medium"},"ðŸ“¦ Free delivery coordination",-1),e("p",{class:"text-xs text-blue-600 mt-1"},"Admin will contact you within 24-48 hours",-1)])])),o(s(b),{onClick:E,disabled:r.value||!F.value,class:m(["w-full h-14 text-lg font-bold",a.value==="donation"?"bg-red-600 hover:bg-red-700 text-white disabled:bg-red-400":"bg-blue-600 hover:bg-blue-700 text-white disabled:bg-blue-400"])},{default:n(()=>[r.value?(i(),p("div",Te,[...t[20]||(t[20]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-6 w-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("span",null,"Processing...",-1)])])):(i(),p("div",ze,[o(s(X),{class:"h-6 w-6 mr-3"}),e("span",null,g(a.value==="donation"?`Donate ${y(w.value)} via Stripe`:`Pay ${y(w.value)} via Stripe`),1)]))]),_:1},8,["disabled","class"]),t[21]||(t[21]=e("div",{class:"text-center text-xs text-muted-foreground space-y-1"},[e("p",null,"ðŸ”’ Secure payment powered by Stripe"),e("p",null,"You'll be redirected to complete your payment")],-1))]),_:1})]),_:1})])])]))}}),Be={class:"min-h-screen bg-muted/20"},Re={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Ye=O({__name:"Checkout",props:{cartItems:{type:Array,required:!0},categories:{type:Array,default:()=>[]},auth:{type:Object,default:()=>({})},settings:{type:Object,default:()=>({})},shippingMethods:{type:Array,default:()=>[{id:"standard",name:"Standard Shipping",price:0,days:"3-5 business days",description:"Free on orders over $50"},{id:"express",name:"Express Shipping",price:9.99,days:"1-2 business days",description:"Fast delivery"}]},paymentMethods:{type:Array,default:()=>["card","paypal","apple_pay"]}},setup(u){const v=u.settings.site_name||"Elegant Store",r=u.auth.user,a=C(()=>u.cartItems.length>0),d=C(()=>u.cartItems.some(x=>x.is_donatable)),w=x=>{L.delete(`/cart/remove/${x}`,{preserveState:!0})},y=()=>{console.log("Processing payment...")};return(x,I)=>(i(),p("div",Be,[o(s(G),{title:"Checkout"}),o(Q,{categories:u.categories,cartItems:u.cartItems,user:s(r),siteName:s(v),settings:u.settings},null,8,["categories","cartItems","user","siteName","settings"]),e("div",Re,[a.value?(i(),$(Ee,{key:1,cartItems:u.cartItems,user:s(r),shippingMethods:u.shippingMethods,paymentMethods:u.paymentMethods,onRemoveItem:w,onProcessPayment:y},null,8,["cartItems","user","shippingMethods","paymentMethods"])):(i(),$(ce,{key:0,showDonationOption:d.value},null,8,["showDonationOption"]))])]))}}),ut=Z(Ye,[["__scopeId","data-v-312c8402"]]);export{ut as default};
