import{d as E,E as W,r as j,c as w,h as v,i as $,F as H,p as R,n as q,g as t,a as T,q as G,t as g,e as o,u as a,o as u,b as p,f as k,w as D,k as J,l as S}from"./app-DwIQyjG_.js";import{N as K}from"./Navbar-DOteu9JP.js";import{M,_ as Z}from"./Breadcrumb.vue_vue_type_script_setup_true_lang-_uKN2B0d.js";import{X as tt,S as z,_ as et}from"./Separator.vue_vue_type_script_setup_true_lang--anB_U2L.js";import{I as st}from"./info-DpHS8VpL.js";import{T as at}from"./triangle-alert-CADpgYOV.js";import{C as ot}from"./circle-x-DsAYkyM_.js";import{C as rt}from"./circle-check-big-DSObIxGE.js";import{_}from"./index-B8m1Vjhc.js";import{_ as B}from"./index-DryFPPhI.js";import{A as nt}from"./arrow-left-BjG4jkNw.js";import{S as L}from"./star-BpIU82XN.js";import{H as it}from"./heart-BkN90LQn.js";import{_ as U,a as X}from"./CardContent.vue_vue_type_script_setup_true_lang-B84JJ7oU.js";import{T as A}from"./trash-2-CTAYMFdI.js";import{P as O}from"./plus-BTEqpmJB.js";import{_ as lt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as ct,_ as dt}from"./CardTitle.vue_vue_type_script_setup_true_lang-DZ8TnfwM.js";import{C as V}from"./credit-card-DBvzZfuF.js";import{S as ut}from"./shield-CRTT4YCq.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-kRQSDDM4.js";import"./useForwardExpose-BCzaoVI5.js";import"./createContext-kUnmDYnW.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-3YHn3GN3.js";import"./chevron-right-CniR4j3X.js";import"./house-CH9vzE5J.js";const mt={key:0,class:"space-y-4 mb-6"},pt={class:"p-4"},ft={class:"flex items-center justify-between"},gt={class:"flex items-center space-x-2"},ht=["onClick"],xt=E({__name:"FlashMessages",props:{dismissible:{type:Boolean,default:!0}},setup(r){const C=W(),s=j(new Set),h=w(()=>{const m=C.props.flash;return["success","error","warning","info"].filter(d=>m?.[d]&&!s.value.has(d)).map(d=>({type:d,message:m[d],id:`${d}-${Date.now()}`}))}),l=m=>{const f={success:{icon:rt,bgClass:"bg-green-50",borderClass:"border-green-200",iconClass:"text-green-600",textClass:"text-green-700"},error:{icon:ot,bgClass:"bg-red-50",borderClass:"border-red-200",iconClass:"text-red-600",textClass:"text-red-700"},warning:{icon:at,bgClass:"bg-orange-50",borderClass:"border-orange-200",iconClass:"text-orange-600",textClass:"text-orange-700"},info:{icon:st,bgClass:"bg-blue-50",borderClass:"border-blue-200",iconClass:"text-blue-600",textClass:"text-blue-700"}};return f[m]||f.info},y=m=>{s.value.add(m)};return(m,f)=>h.value.length>0?(u(),v("div",mt,[(u(!0),v(H,null,R(h.value,d=>(u(),v("div",{key:d.id,class:q(`${l(d.type).borderClass} ${l(d.type).bgClass} border rounded-lg`)},[t("div",pt,[t("div",ft,[t("div",gt,[(u(),T(G(l(d.type).icon),{class:q(`h-5 w-5 ${l(d.type).iconClass}`)},null,8,["class"])),t("p",{class:q(`text-sm font-medium ${l(d.type).textClass}`)},g(d.message),3)]),r.dismissible?(u(),v("button",{key:0,onClick:F=>y(d.type),class:q(`${l(d.type).iconClass} hover:opacity-70`)},[o(a(tt),{class:"h-4 w-4"})],10,ht)):$("",!0)])])],2))),128))])):$("",!0)}}),vt={class:"flex items-center justify-between mb-8"},bt={class:"text-3xl font-bold flex items-center space-x-2"},yt=E({__name:"CartPageHeader",props:{itemCount:{},isEmpty:{type:Boolean}},setup(r){return(C,s)=>(u(),v("div",vt,[t("h1",bt,[o(a(z),{class:"h-8 w-8"}),s[0]||(s[0]=t("span",null,"Shopping Cart",-1)),r.isEmpty?$("",!0):(u(),T(a(B),{key:0,variant:"outline"},{default:p(()=>[k(g(r.itemCount)+" item"+g(r.itemCount!==1?"s":""),1)]),_:1}))]),o(a(_),{variant:"outline",as:"a",href:"/products",class:"flex items-center space-x-2"},{default:p(()=>[o(a(nt),{class:"h-4 w-4"}),s[1]||(s[1]=t("span",null,"Continue Shopping",-1))]),_:1})]))}}),_t={class:"w-32 h-32 bg-gradient-to-br from-muted to-muted/60 rounded-full flex items-center justify-center mx-auto mb-8 shadow-inner"},Ct={class:"flex flex-col sm:flex-row gap-4 justify-center"},$t={class:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-6 max-w-2xl mx-auto"},wt={class:"text-center p-4"},kt={class:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3"},It={class:"text-center p-4"},St={class:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3"},qt={class:"text-center p-4"},jt={class:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3"},Et=E({__name:"EmptyCart",props:{className:{default:""}},setup(r){return(C,s)=>(u(),v("div",{class:q(`text-center py-16 ${r.className}`)},[t("div",_t,[o(a(z),{class:"h-16 w-16 text-muted-foreground"})]),s[8]||(s[8]=t("h2",{class:"text-3xl font-bold mb-3"},"Your cart is empty",-1)),s[9]||(s[9]=t("p",{class:"text-muted-foreground mb-8 max-w-md mx-auto"}," Looks like you haven't added anything to your cart yet. Start exploring our amazing products! ",-1)),t("div",Ct,[o(a(_),{as:"a",href:"/products",size:"lg",class:"min-w-48"},{default:p(()=>[o(a(z),{class:"h-5 w-5 mr-2"}),s[0]||(s[0]=k(" Start Shopping ",-1))]),_:1}),o(a(_),{variant:"outline",as:"a",href:"/products?featured=true",size:"lg"},{default:p(()=>[o(a(L),{class:"h-5 w-5 mr-2"}),s[1]||(s[1]=k(" View Featured Products ",-1))]),_:1})]),t("div",$t,[t("div",wt,[t("div",kt,[o(a(z),{class:"h-6 w-6 text-blue-600"})]),s[2]||(s[2]=t("h3",{class:"font-semibold mb-1"},"Browse Products",-1)),s[3]||(s[3]=t("p",{class:"text-sm text-muted-foreground"},"Discover our wide range of quality products",-1))]),t("div",It,[t("div",St,[o(a(it),{class:"h-6 w-6 text-red-600"})]),s[4]||(s[4]=t("h3",{class:"font-semibold mb-1"},"Check Wishlist",-1)),s[5]||(s[5]=t("p",{class:"text-sm text-muted-foreground"},"Items you've saved for later",-1))]),t("div",qt,[t("div",jt,[o(a(L),{class:"h-6 w-6 text-green-600"})]),s[6]||(s[6]=t("h3",{class:"font-semibold mb-1"},"Featured Items",-1)),s[7]||(s[7]=t("p",{class:"text-sm text-muted-foreground"},"Our handpicked recommendations",-1))])])],2))}}),Ft={class:"lg:col-span-2 space-y-4"},Qt={class:"flex justify-between items-center"},Tt={class:"text-sm text-muted-foreground"},zt={class:"p-6 flex items-center space-x-4"},Pt={class:"flex-shrink-0"},Nt=["src","alt"],At={class:"flex-grow min-w-0"},Bt={class:"font-semibold text-lg mb-1"},Dt=["href"],Mt={class:"text-muted-foreground text-sm mb-2"},Lt={class:"flex space-x-2 mb-2"},Ot={class:"sm:hidden mt-4 flex items-center justify-between"},Vt={class:"flex flex-col"},Ht={class:"text-lg font-bold text-primary"},Rt={key:0,class:"text-sm text-muted-foreground line-through"},Ut={class:"flex items-center space-x-2"},Xt={class:"flex items-center border rounded-md"},Yt=["value","onInput","disabled"],Wt={class:"hidden sm:block text-right min-w-0"},Gt={class:"text-lg font-bold text-primary"},Jt={key:0,class:"text-sm text-muted-foreground line-through"},Kt={class:"hidden sm:flex items-center border rounded-md"},Zt=["value","onInput","disabled"],te={class:"hidden sm:block text-right min-w-0"},ee={class:"text-lg font-bold"},se={key:0,class:"text-xs text-muted-foreground"},ae={class:"hidden sm:block"},oe=E({__name:"CartItemsList",props:{cartItems:{},quantities:{},updatingItems:{}},emits:["incrementQuantity","decrementQuantity","updateQuantity","removeItem","clearCart"],setup(r,{emit:C}){const s=r,h=C,l=j({});D(()=>s.cartItems,n=>{n.forEach(c=>{l.value[c.id]||(l.value[c.id]=s.quantities[c.id]||c.quantity||1)})},{immediate:!0}),D(()=>s.quantities,n=>{Object.keys(n).forEach(c=>{const e=parseInt(c);n[e]!==void 0&&(l.value[e]=n[e])})},{deep:!0});const y=n=>parseFloat(n.toString()).toFixed(2),m=n=>l.value[n.id]||n.quantity||1,f=(n,c)=>{const e=c.target,I=Math.max(1,parseInt(e.value)||1);l.value[n]=I;const b=s.cartItems.find(i=>i.id===n),P=s.quantities[n]||(b?b.quantity:1);I!==P&&h("updateQuantity",n,I)},d=n=>{const c=m(s.cartItems.find(e=>e.id===n));l.value[n]=c+1,h("incrementQuantity",n)},F=n=>{const c=m(s.cartItems.find(e=>e.id===n));c>1&&(l.value[n]=c-1,h("decrementQuantity",n))},Q=n=>{const c=m(n);return n.price*c};return(n,c)=>(u(),v("div",Ft,[t("div",Qt,[t("p",Tt,g(r.cartItems.length)+" item"+g(r.cartItems.length>1?"s":"")+" in your cart ",1),o(a(_),{variant:"outline",size:"sm",onClick:c[0]||(c[0]=e=>h("clearCart")),class:"text-destructive hover:text-destructive"},{default:p(()=>[o(a(A),{class:"h-4 w-4 mr-2"}),c[1]||(c[1]=k(" Clear All Items ",-1))]),_:1})]),o(a(U),null,{default:p(()=>[o(a(X),{class:"p-0"},{default:p(()=>[(u(!0),v(H,null,R(r.cartItems,(e,I)=>(u(),v("div",{key:e.id,class:"border-b last:border-b-0"},[t("div",zt,[t("div",Pt,[t("img",{src:e.product?.image||e.image||"/placeholder-product.jpg",alt:e.product?.name||e.name,class:"w-20 h-20 object-cover rounded-lg border"},null,8,Nt)]),t("div",At,[t("h3",Bt,[t("a",{href:`/products/${e.product?.slug||e.slug}`,class:"hover:text-primary transition-colors"},g(e.product?.name||e.name),9,Dt)]),t("p",Mt,g(e.product?.category?.name||e.category?.name||"Uncategorized"),1),t("div",Lt,[e.product?.is_donatable?(u(),T(a(B),{key:0,variant:"secondary",class:"text-xs"},{default:p(()=>[...c[2]||(c[2]=[k(" Donation Item ",-1)])]),_:1})):$("",!0),e.product?.stock!==void 0&&e.product.stock<10?(u(),T(a(B),{key:1,variant:"outline",class:"text-xs text-orange-600"},{default:p(()=>[k(" Only "+g(e.product.stock)+" left ",1)]),_:2},1024)):$("",!0)]),t("div",Ot,[t("div",Vt,[t("span",Ht," $"+g(y(e.price)),1),e.original_price&&e.original_price>e.price?(u(),v("span",Rt," $"+g(y(e.original_price)),1)):$("",!0)]),t("div",Ut,[t("div",Xt,[o(a(_),{size:"sm",variant:"ghost",onClick:b=>F(e.id),disabled:r.updatingItems.has(e.id)||m(e)<=1,class:"h-8 w-8 p-0"},{default:p(()=>[o(a(M),{class:"h-3 w-3"})]),_:1},8,["onClick","disabled"]),t("input",{value:m(e),onInput:b=>f(e.id,b),disabled:r.updatingItems.has(e.id),class:"h-8 w-12 text-center border-0 text-sm bg-transparent focus:outline-none",type:"number",min:"1",max:"99"},null,40,Yt),o(a(_),{size:"sm",variant:"ghost",onClick:b=>d(e.id),disabled:r.updatingItems.has(e.id),class:"h-8 w-8 p-0"},{default:p(()=>[o(a(O),{class:"h-3 w-3"})]),_:1},8,["onClick","disabled"])]),o(a(_),{size:"sm",variant:"ghost",onClick:b=>h("removeItem",e.id),class:"text-destructive hover:text-destructive h-8 w-8 p-0"},{default:p(()=>[o(a(A),{class:"h-3 w-3"})]),_:1},8,["onClick"])])])]),t("div",Wt,[t("div",Gt," $"+g(y(e.price)),1),e.original_price&&e.original_price>e.price?(u(),v("div",Jt," $"+g(y(e.original_price)),1)):$("",!0)]),t("div",Kt,[o(a(_),{size:"sm",variant:"ghost",onClick:b=>F(e.id),disabled:r.updatingItems.has(e.id)||m(e)<=1,class:"h-10 w-10 p-0"},{default:p(()=>[o(a(M),{class:"h-4 w-4"})]),_:1},8,["onClick","disabled"]),t("input",{value:m(e),onInput:b=>f(e.id,b),disabled:r.updatingItems.has(e.id),class:"h-10 w-16 text-center border-0 bg-transparent focus:outline-none",type:"number",min:"1",max:"99"},null,40,Zt),o(a(_),{size:"sm",variant:"ghost",onClick:b=>d(e.id),disabled:r.updatingItems.has(e.id),class:"h-10 w-10 p-0"},{default:p(()=>[o(a(O),{class:"h-4 w-4"})]),_:1},8,["onClick","disabled"])]),t("div",te,[t("div",ee," $"+g(y(Q(e))),1),r.updatingItems.has(e.id)?(u(),v("div",se," Updating... ")):$("",!0)]),t("div",ae,[o(a(_),{size:"sm",variant:"ghost",onClick:b=>h("removeItem",e.id),class:"text-destructive hover:text-destructive",title:"Remove item"},{default:p(()=>[o(a(A),{class:"h-4 w-4"})]),_:1},8,["onClick"])])])]))),128))]),_:1})]),_:1})]))}}),re=lt(oe,[["__scopeId","data-v-0e7dab40"]]),ne={class:"lg:col-span-1"},ie={class:"sticky top-24 space-y-6"},le={class:"flex justify-between text-base"},ce={class:"font-medium"},de={class:"flex justify-between text-base"},ue={class:"flex justify-between text-xl font-bold"},me={class:"text-primary"},pe={key:0,class:"text-xs text-center text-muted-foreground"},fe={class:"flex items-center justify-center space-x-2 text-xs text-muted-foreground mt-4 p-3 bg-muted/50 rounded-lg"},ge=E({__name:"OrderSummary",props:{subtotal:{},shipping:{},total:{},itemCount:{},user:{},updatingItems:{}},emits:["proceedToCheckout","applyPromoCode"],setup(r,{emit:C}){const s=r,h=C;j(""),j(!1),w(()=>s.shipping===0?100:Math.min(s.subtotal/50*100,100)),w(()=>Math.max(50-s.subtotal,0));const l=m=>parseFloat(m.toString()).toFixed(2),y=()=>{h("proceedToCheckout")};return(m,f)=>(u(),v("div",ne,[t("div",ie,[o(a(U),null,{default:p(()=>[o(a(ct),null,{default:p(()=>[o(a(dt),{class:"flex items-center space-x-2"},{default:p(()=>[o(a(V),{class:"h-5 w-5"}),f[0]||(f[0]=t("span",null,"Order Summary",-1))]),_:1})]),_:1}),o(a(X),{class:"space-y-4"},{default:p(()=>[t("div",le,[t("span",null,"Subtotal ("+g(r.itemCount)+" items)",1),t("span",ce,"$"+g(l(r.subtotal)),1)]),t("div",de,[f[1]||(f[1]=t("span",null,"Shipping",-1)),t("span",{class:q({"text-green-600 font-medium":r.shipping===0})},g(r.shipping===0?"Free":`$${l(r.shipping)}`),3)]),o(a(et)),t("div",ue,[f[2]||(f[2]=t("span",null,"Total",-1)),t("span",me,"$"+g(l(r.total)),1)]),o(a(_),{onClick:y,size:"lg",class:"w-full mt-6",disabled:r.updatingItems.size>0},{default:p(()=>[o(a(V),{class:"h-4 w-4 mr-2"}),k(" "+g(r.user?"Proceed to Checkout":"Login & Checkout"),1)]),_:1},8,["disabled"]),r.user?$("",!0):(u(),v("p",pe," You'll be redirected to login first ")),t("div",fe,[o(a(ut),{class:"h-3 w-3"}),f[3]||(f[3]=t("span",null,"256-bit SSL Secure Checkout",-1))])]),_:1})]),_:1})])]))}}),he={class:"min-h-screen"},xe={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ve={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Re=E({__name:"Cart",props:{cartItems:{type:Array,default:()=>[]},categories:{type:Array,default:()=>[]},auth:{type:Object,default:()=>({})},settings:{type:Object,default:()=>({})}},setup(r){const C=r.settings.site_name||"Elegant Store",s=r.auth.user,h=j(new Set),l=j({});r.cartItems.forEach(i=>{l.value[i.id]=i.quantity});const y=w(()=>r.cartItems.reduce((i,x)=>{const N=l.value[x.id]||x.quantity;return i+parseFloat(x.price||0)*N},0)),m=w(()=>y.value>50?0:9.99),f=w(()=>y.value),d=w(()=>r.cartItems.length===0),F=[{label:"Home",href:"/"},{label:"Shopping Cart",isActive:!0}],Q=(i,x)=>{if(x<1){e(i);return}x>99&&(x=99),l.value[i]=x,h.value.add(i),setTimeout(()=>{S.patch(`/cart/update/${i}`,{quantity:x},{preserveState:!0,preserveScroll:!0,onFinish:()=>{h.value.delete(i)},onError:N=>{console.error("Failed to update quantity:",N),l.value[i]=r.cartItems.find(Y=>Y.id===i)?.quantity||1,h.value.delete(i)}})},500)},n=i=>{const x=l.value[i]||1;Q(i,x+1)},c=i=>{const x=l.value[i]||1;Q(i,x-1)},e=i=>{confirm("Remove this item from your cart?")&&S.delete(`/cart/remove/${i}`,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{delete l.value[i]},onError:x=>{console.error("Failed to remove item:",x)}})},I=()=>{confirm("Are you sure you want to clear your entire cart?")&&S.delete("/cart/clear",{preserveState:!0,onSuccess:()=>{l.value={}},onError:i=>{console.error("Failed to clear cart:",i)}})},b=()=>{s?S.visit("/checkout"):S.visit("/login?redirect=checkout")},P=i=>{S.post("/cart/apply-promo",{code:i},{preserveState:!0,preserveScroll:!0})};return(i,x)=>(u(),v("div",he,[o(a(J),{title:"Shopping Cart"}),o(K,{categories:r.categories,cartItems:r.cartItems,user:a(s),siteName:a(C),settings:r.settings},null,8,["categories","cartItems","user","siteName","settings"]),t("div",xe,[o(xt,{dismissible:!0}),o(Z,{items:F}),o(yt,{itemCount:r.cartItems.length,isEmpty:d.value},null,8,["itemCount","isEmpty"]),d.value?(u(),T(Et,{key:0})):(u(),v("div",ve,[o(re,{cartItems:r.cartItems,quantities:l.value,updatingItems:h.value,onIncrementQuantity:n,onDecrementQuantity:c,onUpdateQuantity:Q,onRemoveItem:e,onClearCart:I},null,8,["cartItems","quantities","updatingItems"]),o(ge,{subtotal:y.value,shipping:m.value,total:f.value,itemCount:r.cartItems.length,user:a(s),updatingItems:h.value,onProceedToCheckout:b,onApplyPromoCode:P},null,8,["subtotal","shipping","total","itemCount","user","updatingItems"])]))])]))}});export{Re as default};
