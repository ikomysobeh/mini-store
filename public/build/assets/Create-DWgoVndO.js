import{d as k,w as M,c as b,a as C,u as t,b as n,e as a,f as p,g as r,h as x,i as _,n as I,t as d,o as g,j as W,r as q,k as R,l as G}from"./app-CdWJsdjD.js";import{_ as E}from"./Input.vue_vue_type_script_setup_true_lang-CvImpZJx.js";import{_ as y}from"./Label.vue_vue_type_script_setup_true_lang-Dw-cLlbn.js";import{_ as D,a as S,c as H,b as z}from"./index-D4dNSDEJ.js";import{_ as U,a as L}from"./CardTitle.vue_vue_type_script_setup_true_lang-Dv_0XedS.js";import{_ as Z}from"./Checkbox.vue_vue_type_script_setup_true_lang-BQT0AJ_2.js";import{I as J}from"./info-D7s-uXl0.js";import{_ as K}from"./PageHeader.vue_vue_type_script_setup_true_lang-CMEsGzwi.js";import{_ as Q}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Dug9UArH.js";import{S as T}from"./save-RhsHaTJG.js";import{P as X}from"./package-xfYG3Vt-.js";import"./index-DJvGgQ0r.js";import"./useForwardExpose-DBYrSc0H.js";import"./Presence-CWY0QQDo.js";import"./createContext-ApIAYh1H.js";import"./VisuallyHidden-BmnEWwTb.js";import"./check-J28NhSpr.js";import"./arrow-left-M2U0K44Y.js";import"./Separator.vue_vue_type_script_setup_true_lang-BwArgNY3.js";import"./heart-BdaRE3aN.js";import"./chevron-down-BxqV3mpS.js";import"./search-NPnSUXo7.js";import"./house-BQ0UKFGz.js";import"./chevron-right-BRnWapLW.js";const Y={class:"space-y-2"},ee={key:0,class:"text-sm text-destructive"},te={class:"space-y-2"},se={key:0,class:"text-sm text-destructive"},ae={class:"space-y-2"},re={class:"flex"},ne={class:"text-xs text-muted-foreground"},ie={key:0,class:"text-sm text-destructive"},oe={class:"space-y-2"},le=["value","maxlength"],de={class:"text-xs text-muted-foreground"},ce={key:0,class:"text-sm text-destructive"},ue={class:"space-y-2"},me=["value","maxlength"],ge={class:"text-xs text-muted-foreground"},pe={key:0,class:"text-sm text-destructive"},fe=k({__name:"BasicInformationForm",props:{nameEn:{},nameAr:{},descriptionEn:{},descriptionAr:{},name:{default:""},slug:{default:""},description:{default:""},errors:{},autoGenerateSlug:{type:Boolean,default:!0},maxDescriptionLength:{default:500}},emits:["update:nameEn","update:nameAr","update:descriptionEn","update:descriptionAr","update:name","update:slug","update:description"],setup(s,{emit:f}){const e=s,m=f,c=i=>i?i.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"):"";M(()=>e.nameEn,i=>{e.autoGenerateSlug&&i&&m("update:slug",c(i))});const u=b(()=>e.slug||c(e.nameEn)||"category-slug"),h=b(()=>e.descriptionEn?.length||0),P=b(()=>e.descriptionAr?.length||0),O=i=>{m("update:nameEn",i)},N=i=>{m("update:nameAr",i)},V=i=>{i.length<=e.maxDescriptionLength&&m("update:descriptionEn",i)},B=i=>{i.length<=e.maxDescriptionLength&&m("update:descriptionAr",i)},F=i=>{m("update:slug",i)};return(i,o)=>(g(),C(t(D),null,{default:n(()=>[a(t(L),null,{default:n(()=>[a(t(U),null,{default:n(()=>[...o[2]||(o[2]=[p("Basic Information",-1)])]),_:1})]),_:1}),a(t(S),{class:"space-y-6"},{default:n(()=>[r("div",Y,[a(t(y),{for:"name_en"},{default:n(()=>[...o[3]||(o[3]=[p(" Category Name (English) ",-1),r("span",{class:"text-destructive"},"*",-1)])]),_:1}),a(t(E),{id:"name_en","model-value":s.nameEn,"onUpdate:modelValue":O,placeholder:"Electronics, Clothing, Books...",class:I(["text-lg",{"border-destructive":s.errors.name_en}])},null,8,["model-value","class"]),s.errors.name_en?(g(),x("p",ee,d(s.errors.name_en),1)):_("",!0)]),r("div",te,[a(t(y),{for:"name_ar"},{default:n(()=>[...o[4]||(o[4]=[p(" Category Name (Arabic) - اسم الفئة ",-1),r("span",{class:"text-destructive"},"*",-1)])]),_:1}),a(t(E),{id:"name_ar","model-value":s.nameAr,"onUpdate:modelValue":N,placeholder:"أدخل اسم الفئة بالعربية",dir:"rtl",class:I(["text-lg",{"border-destructive":s.errors.name_ar}])},null,8,["model-value","class"]),s.errors.name_ar?(g(),x("p",se,d(s.errors.name_ar),1)):_("",!0)]),r("div",ae,[a(t(y),{for:"slug"},{default:n(()=>[...o[5]||(o[5]=[p("Category URL Slug",-1)])]),_:1}),r("div",re,[o[6]||(o[6]=r("span",{class:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-input bg-muted text-sm text-muted-foreground"}," /categories/ ",-1)),a(t(E),{id:"slug","model-value":s.slug,"onUpdate:modelValue":F,placeholder:c(s.nameEn)||"category-slug",class:I(["rounded-l-none",{"border-destructive":s.errors.slug}])},null,8,["model-value","placeholder","class"])]),r("p",ne," Preview: /categories/"+d(u.value),1),s.errors.slug?(g(),x("p",ie,d(s.errors.slug),1)):_("",!0)]),r("div",oe,[a(t(y),{for:"description_en"},{default:n(()=>[...o[7]||(o[7]=[p("Description (English)",-1)])]),_:1}),r("textarea",{id:"description_en",value:s.descriptionEn,onInput:o[0]||(o[0]=w=>V(w.target.value)),placeholder:"Describe this category and what products it contains...",rows:"4",maxlength:s.maxDescriptionLength,class:"flex min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,40,le),r("p",de,d(h.value)+"/"+d(s.maxDescriptionLength)+" characters ",1),s.errors.description_en?(g(),x("p",ce,d(s.errors.description_en),1)):_("",!0)]),r("div",ue,[a(t(y),{for:"description_ar"},{default:n(()=>[...o[8]||(o[8]=[p("Description (Arabic) - الوصف",-1)])]),_:1}),r("textarea",{id:"description_ar",value:s.descriptionAr,onInput:o[1]||(o[1]=w=>B(w.target.value)),placeholder:"وصف الفئة بالعربية...",dir:"rtl",rows:"4",maxlength:s.maxDescriptionLength,class:"flex min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,40,me),r("p",ge,d(P.value)+"/"+d(s.maxDescriptionLength)+" characters ",1),s.errors.description_ar?(g(),x("p",pe,d(s.errors.description_ar),1)):_("",!0)])]),_:1})]),_:1}))}});/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=H("FolderPlusIcon",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),ve={class:"flex items-center space-x-2"},_e={key:0,class:"p-3 bg-orange-50 border border-orange-200 rounded-lg"},xe={class:"flex items-start space-x-2"},he=k({__name:"PublishingOptions",props:{isActive:{type:Boolean},showDraftWarning:{type:Boolean,default:!0},title:{default:"Publishing"},activeLabel:{default:"Active (Visible to customers)"}},emits:["update:isActive"],setup(s,{emit:f}){const e=f,m=c=>{e("update:isActive",c)};return(c,u)=>(g(),C(t(D),null,{default:n(()=>[a(t(L),null,{default:n(()=>[a(t(U),null,{default:n(()=>[p(d(s.title),1)]),_:1})]),_:1}),a(t(S),{class:"space-y-4"},{default:n(()=>[r("div",ve,[a(t(Z),{checked:s.isActive,"onUpdate:checked":m},null,8,["checked"]),a(t(y),{class:"cursor-pointer"},{default:n(()=>[p(d(s.activeLabel),1)]),_:1})]),!s.isActive&&s.showDraftWarning?(g(),x("div",_e,[r("div",xe,[a(t(J),{class:"h-4 w-4 text-orange-600 mt-0.5 flex-shrink-0"}),u[0]||(u[0]=r("div",{class:"text-sm text-orange-700"},[r("p",{class:"font-medium"},"Draft Mode"),r("p",{class:"text-xs"},"This item will not be visible to customers")],-1))])])):_("",!0)]),_:1})]),_:1}))}}),be={class:"space-y-2"},ye={key:0,class:"text-xs text-muted-foreground"},we=k({__name:"OrganizationSettings",props:{sortOrder:{},title:{default:"Organization"},helpText:{default:"Lower numbers appear first in listings"}},emits:["update:sortOrder"],setup(s,{emit:f}){const e=f,m=c=>{const u=c.target,h=parseInt(u.value)||0;e("update:sortOrder",h)};return(c,u)=>(g(),C(t(D),null,{default:n(()=>[a(t(L),null,{default:n(()=>[a(t(U),null,{default:n(()=>[p(d(s.title),1)]),_:1})]),_:1}),a(t(S),{class:"space-y-4"},{default:n(()=>[r("div",be,[a(t(y),{for:"sort_order"},{default:n(()=>[...u[0]||(u[0]=[p("Sort Order",-1)])]),_:1}),a(t(E),{id:"sort_order",value:s.sortOrder,onInput:m,type:"number",min:"0",placeholder:"0"},null,8,["value"]),s.helpText?(g(),x("p",ye,d(s.helpText),1)):_("",!0)])]),_:1})]),_:1}))}}),Ae={key:0,class:"aspect-video"},$e=["src","alt"],ke={class:"space-y-3"},Ce={class:"font-semibold text-lg"},Ee={key:0,class:"text-sm text-muted-foreground leading-relaxed"},De={class:"flex items-center space-x-2 text-xs"},Se={class:"bg-muted px-2 py-1 rounded text-xs font-mono"},Ue=k({__name:"LivePreview",props:{name:{},slug:{},description:{},imagePreview:{},title:{default:"Preview"},baseUrl:{default:"/categories"}},setup(s){const f=s,e=u=>u?u.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"):"",m=b(()=>f.slug||e(f.name)||"category-slug"),c=b(()=>`${f.baseUrl}/${m.value}`);return(u,h)=>s.name?(g(),C(t(D),{key:0},{default:n(()=>[a(t(L),null,{default:n(()=>[a(t(U),{class:"text-lg"},{default:n(()=>[p(d(s.title),1)]),_:1})]),_:1}),a(t(S),{class:"space-y-4"},{default:n(()=>[s.imagePreview?(g(),x("div",Ae,[r("img",{src:s.imagePreview,alt:`${s.name} preview`,class:"w-full h-full object-cover rounded-lg border"},null,8,$e)])):_("",!0),r("div",ke,[r("h3",Ce,d(s.name),1),s.description?(g(),x("p",Ee,d(s.description),1)):_("",!0),r("div",De,[h[0]||(h[0]=r("span",{class:"text-muted-foreground"},"URL:",-1)),r("code",Se,d(c.value),1)])])]),_:1})]),_:1})):_("",!0)}}),Le={class:"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Pe={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 bg-background text-foreground"},Oe={class:"lg:col-span-2 space-y-8"},Ne={class:"lg:col-span-1 space-y-6"},Ve={class:"lg:hidden fixed bottom-0 left-0 right-0 bg-background border-t p-4 shadow-lg z-50"},Be={class:"flex space-x-3"},ot=k({__name:"Create",setup(s){const f=[{label:"Categories",href:"/admin/categories"},{label:"Create Category",isActive:!0}],e=W({name_en:"",name_ar:"",description_en:"",description_ar:"",name:"",slug:"",description:"",image:null,is_active:!0,sort_order:0}),m=q(null),c=b(()=>e.name_en&&e.name_en.trim().length>0&&e.name_ar&&e.name_ar.trim().length>0),u=b(()=>[{label:"Save as Draft",variant:"outline",icon:j,disabled:e.processing||!c.value,loading:e.processing,onClick:o},{label:"Save & Publish",variant:"default",icon:T,disabled:e.processing||!c.value,loading:e.processing,onClick:w}]);b(()=>[{label:c.value?"Form is valid":"Category names (EN & AR) are required",color:c.value?"green":"red",active:!0},{label:e.is_active?"Will be published":"Will be saved as draft",color:e.is_active?"blue":"gray",active:!0}]);const h=l=>{e.name_en=l,e.name=l},P=l=>{e.name_ar=l},O=l=>{e.slug=l},N=l=>{e.description_en=l,e.description=l},V=l=>{e.description_ar=l},B=l=>{e.is_active=l},F=l=>{e.sort_order=l},i=(l=!1)=>{if(!c.value){alert("Category names (English and Arabic) are required");return}!e.slug&&e.name_en&&(e.slug=e.name_en.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")),e.name=e.name_en,e.description=e.description_en;const A={...e.data()};if(l&&(A.is_active=!1),e.image){const $=new FormData;Object.keys(A).forEach(v=>{v==="image"&&e.image?$.append("image",e.image):v==="is_active"?$.append(v,!l&&e[v]?"1":"0"):A[v]!==null&&A[v]!==""&&$.append(v,A[v].toString())}),G.post("/admin/categories",$,{forceFormData:!0,onSuccess:()=>{},onError:v=>{console.error("Form submission errors:",v)}})}else l&&(e.is_active=!1),e.post("/admin/categories",{onSuccess:()=>{},onError:$=>{console.error("Form submission errors:",$)}})},o=()=>{i(!0)},w=()=>{i(!1)};return(l,A)=>(g(),C(Q,{title:"Create Category",breadcrumbs:f},{default:n(()=>[a(t(R),{title:"Create Category"}),a(K,{title:"Create New Category",description:"Add a new category to organize your products",icon:t(X),"icon-color":"text-primary",actions:u.value},null,8,["icon","actions"]),r("div",Le,[r("div",Pe,[r("div",Oe,[a(fe,{"name-en":t(e).name_en,"name-ar":t(e).name_ar,"description-en":t(e).description_en,"description-ar":t(e).description_ar,slug:t(e).slug,errors:t(e).errors,"auto-generate-slug":!0,"max-description-length":500,"onUpdate:nameEn":h,"onUpdate:nameAr":P,"onUpdate:slug":O,"onUpdate:descriptionEn":N,"onUpdate:descriptionAr":V},null,8,["name-en","name-ar","description-en","description-ar","slug","errors"])]),r("div",Ne,[a(he,{"is-active":t(e).is_active,"show-draft-warning":!0,title:"Publishing","active-label":"Active (Visible to customers)","onUpdate:isActive":B},null,8,["is-active"]),a(we,{"sort-order":t(e).sort_order,title:"Organization","help-text":"Lower numbers appear first in category listings","onUpdate:sortOrder":F},null,8,["sort-order"]),a(Ue,{name:t(e).name_en,slug:t(e).slug,description:t(e).description_en,"image-preview":m.value,title:"Preview","base-url":"/categories"},null,8,["name","slug","description","image-preview"])])])]),r("div",Ve,[r("div",Be,[a(t(z),{onClick:o,variant:"outline",disabled:t(e).processing||!c.value,class:"flex-1"},{default:n(()=>[a(t(j),{class:"h-4 w-4 mr-2"}),p(" "+d(t(e).processing?"Saving...":"Save Draft"),1)]),_:1},8,["disabled"]),a(t(z),{onClick:w,disabled:t(e).processing||!c.value,class:"flex-1"},{default:n(()=>[a(t(T),{class:"h-4 w-4 mr-2"}),p(" "+d(t(e).processing?"Publishing...":"Publish"),1)]),_:1},8,["disabled"])])])]),_:1}))}});export{ot as default};
