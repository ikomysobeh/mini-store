import{d as H,h as y,g as i,f as c,i as v,t as x,o as d,c as L,e as a,u as t,b as o,a as b,n as j,F as V,p as G,r as P,B as E,l as A,w as Q,k as W,M as X}from"./app-BS883H4x.js";import{N as J}from"./Navbar-bg91PXkv.js";import{b as _,_ as M,a as q}from"./index-B4wAO7Ak.js";import{_ as K}from"./Input.vue_vue_type_script_setup_true_lang-B45G8T1E.js";import{_ as w}from"./index-5MKLnkoc.js";import{_ as O,X as Y,S as ee}from"./Separator.vue_vue_type_script_setup_true_lang-D5CIuwO1.js";import{_ as te,a as se,b as ae,c as le,d as N}from"./SelectValue.vue_vue_type_script_setup_true_lang-nMnwDZxa.js";import{_ as U}from"./Checkbox.vue_vue_type_script_setup_true_lang-xNIcqSZn.js";import{_ as F}from"./Label.vue_vue_type_script_setup_true_lang-n0lNNZfv.js";import{F as oe}from"./filter-CBKalrHf.js";import{S as I}from"./search-9aZBX7bq.js";import{G as Z}from"./gift-joOoTU0_.js";import{S as R}from"./star-ILV77NA4.js";import{H as ie}from"./heart-BW9ee5RA.js";import{_ as re}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-CPRK794B.js";import"./useForwardExpose-R4vxUxbc.js";import"./index-BbFCoLec.js";import"./createContext-5tUwy04C.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-DwMIGd_H.js";import"./house-C47ehVE_.js";import"./Presence-2UzLjPAb.js";import"./Teleport-CNALwBwM.js";import"./chevron-down-Wqrx1rtw.js";import"./check-DtuqfzQa.js";const ne={class:"mb-8"},ce={class:"text-muted-foreground"},de={key:0,class:"ml-2"},ue={class:"capitalize font-medium"},fe=H({__name:"PageHeader",props:{totalProducts:{},selectedCategory:{},categories:{}},setup(l){const $=p=>{const u=l.categories.find(f=>f.slug===p);return u?u.name:p};return(p,u)=>(d(),y("div",ne,[u[1]||(u[1]=i("h1",{class:"text-3xl font-bold mb-2"},"All Products",-1)),i("p",ce,[c(x(l.totalProducts.toLocaleString())+" products found ",1),l.selectedCategory?(d(),y("span",de,[u[0]||(u[0]=c(" in ",-1)),i("span",ue,x($(l.selectedCategory)),1)])):v("",!0)])]))}}),me={class:"sticky top-24 space-y-6"},ge={class:"lg:hidden"},ve={class:"flex items-center space-x-2"},ye={class:"space-y-2"},pe={class:"relative"},he={class:"space-y-3"},xe={class:"space-y-2 max-h-64 overflow-y-auto"},ke={class:"flex items-center space-x-2"},be={class:"flex items-center space-x-2"},_e={class:"space-y-3"},we={class:"space-y-2"},Ce={class:"flex items-center space-x-2"},Fe={class:"space-y-3"},$e={key:1,class:"text-xs text-muted-foreground"},Se={class:"flex flex-wrap gap-2"},Te=H({__name:"ProductFilters",props:{categories:{},searchTerm:{},selectedCategory:{},onlyDonatable:{type:Boolean},sortBy:{},showFilters:{type:Boolean}},emits:["update:searchTerm","update:selectedCategory","update:onlyDonatable","update:sortBy","toggleFilters","clearFilters"],setup(l,{emit:$}){const p=l,u=$,f=L(()=>p.searchTerm||p.selectedCategory||p.onlyDonatable),h=L(()=>(p.searchTerm?1:0)+(p.selectedCategory?1:0)+(p.onlyDonatable?1:0)),k=r=>{const e=r.target;console.log("Search input changed to:",e.value),u("update:searchTerm",e.value)},C=()=>{console.log("All Categories clicked"),u("update:selectedCategory","")},D=r=>{console.log("Category clicked:",r),p.selectedCategory===r?u("update:selectedCategory",""):u("update:selectedCategory",r)},B=r=>{const e=r===!0||r==="true";console.log("Donatable changed to:",e),u("update:onlyDonatable",e)},S=r=>{console.log("Sort changed to:",r),u("update:sortBy",r)},T=()=>{u("toggleFilters")},z=()=>{u("clearFilters")};return(r,e)=>(d(),y("div",me,[i("div",ge,[a(t(_),{variant:"outline",onClick:T,class:"w-full justify-between"},{default:o(()=>[i("div",ve,[a(t(oe),{class:"h-4 w-4"}),e[3]||(e[3]=i("span",null,"Filters",-1))]),f.value?(d(),b(t(w),{key:0,variant:"secondary"},{default:o(()=>[c(x(h.value),1)]),_:1})):v("",!0)]),_:1})]),a(t(M),{class:j({"hidden lg:block":!l.showFilters})},{default:o(()=>[a(t(q),{class:"p-6 space-y-6"},{default:o(()=>[i("div",ye,[a(t(F),{for:"search"},{default:o(()=>[...e[4]||(e[4]=[c("Search Products",-1)])]),_:1}),i("div",pe,[a(t(I),{class:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a(t(K),{id:"search",value:l.searchTerm,onInput:k,placeholder:"Search products...",class:"pl-10"},null,8,["value"])])]),a(t(O)),i("div",he,[a(t(F),null,{default:o(()=>[...e[5]||(e[5]=[c("Categories",-1)])]),_:1}),i("div",xe,[i("div",ke,[a(t(U),{checked:l.selectedCategory==="",onClick:C,id:"all-categories"},null,8,["checked"]),a(t(F),{for:"all-categories",class:"text-sm font-normal cursor-pointer",onClick:C},{default:o(()=>[...e[6]||(e[6]=[c(" All Categories ",-1)])]),_:1})]),(d(!0),y(V,null,G(l.categories,s=>(d(),y("div",{key:s.id,class:"flex items-center justify-between space-x-2"},[i("div",be,[a(t(U),{checked:l.selectedCategory===s.slug,onClick:()=>D(s.slug),id:`category-${s.id}`},null,8,["checked","onClick","id"]),a(t(F),{for:`category-${s.id}`,class:"text-sm font-normal cursor-pointer capitalize",onClick:()=>D(s.slug)},{default:o(()=>[c(x(s.name),1)]),_:2},1032,["for","onClick"])]),s.products_count?(d(),b(t(w),{key:0,variant:"outline",class:"text-xs"},{default:o(()=>[c(x(s.products_count),1)]),_:2},1024)):v("",!0)]))),128))])]),a(t(O)),i("div",_e,[a(t(F),null,{default:o(()=>[...e[7]||(e[7]=[c("Product Type",-1)])]),_:1}),i("div",we,[i("div",Ce,[a(t(U),{checked:l.onlyDonatable,"onUpdate:checked":B,id:"donations-only"},null,8,["checked"]),a(t(F),{for:"donations-only",class:"text-sm font-normal cursor-pointer"},{default:o(()=>[...e[8]||(e[8]=[c(" Donations Only ",-1)])]),_:1})])])]),a(t(O)),i("div",Fe,[a(t(F),{for:"sort"},{default:o(()=>[...e[9]||(e[9]=[c("Sort By",-1)])]),_:1}),a(t(te),{value:l.sortBy,"onUpdate:value":S},{default:o(()=>[a(t(se),null,{default:o(()=>[a(t(ae),{placeholder:"Sort products"})]),_:1}),a(t(le),null,{default:o(()=>[a(t(N),{value:"name"},{default:o(()=>[...e[10]||(e[10]=[c("Name (A-Z)",-1)])]),_:1}),a(t(N),{value:"name_desc"},{default:o(()=>[...e[11]||(e[11]=[c("Name (Z-A)",-1)])]),_:1}),a(t(N),{value:"price_asc"},{default:o(()=>[...e[12]||(e[12]=[c("Price (Low to High)",-1)])]),_:1}),a(t(N),{value:"price_desc"},{default:o(()=>[...e[13]||(e[13]=[c("Price (High to Low)",-1)])]),_:1}),a(t(N),{value:"newest"},{default:o(()=>[...e[14]||(e[14]=[c("Newest First",-1)])]),_:1}),a(t(N),{value:"featured"},{default:o(()=>[...e[15]||(e[15]=[c("Featured First",-1)])]),_:1})]),_:1})]),_:1},8,["value"])]),a(t(O)),f.value?(d(),b(t(_),{key:0,variant:"outline",onClick:z,class:"w-full"},{default:o(()=>[a(t(Y),{class:"h-4 w-4 mr-2"}),e[16]||(e[16]=c(" Clear All Filters ",-1))]),_:1})):v("",!0),f.value?(d(),y("div",$e,x(h.value)+" active filter"+x(h.value>1?"s":""),1)):v("",!0)]),_:1})]),_:1},8,["class"]),a(t(M),{class:"lg:block hidden"},{default:o(()=>[a(t(q),{class:"p-4"},{default:o(()=>[a(t(F),{class:"text-sm font-medium mb-3 block"},{default:o(()=>[...e[17]||(e[17]=[c("Quick Filters",-1)])]),_:1}),i("div",Se,[a(t(_),{variant:"outline",size:"sm",onClick:e[0]||(e[0]=s=>B(!l.onlyDonatable)),class:j({"bg-warning/10 text-warning":l.onlyDonatable})},{default:o(()=>[...e[18]||(e[18]=[c(" Donations ",-1)])]),_:1},8,["class"]),a(t(_),{variant:"outline",size:"sm",onClick:e[1]||(e[1]=s=>S("price_asc")),class:j({"bg-success/10 text-success":l.sortBy==="price_asc"})},{default:o(()=>[...e[19]||(e[19]=[c(" Low Price ",-1)])]),_:1},8,["class"]),a(t(_),{variant:"outline",size:"sm",onClick:e[2]||(e[2]=s=>S("newest")),class:j({"bg-info/10 text-info":l.sortBy==="newest"})},{default:o(()=>[...e[20]||(e[20]=[c(" New Arrivals ",-1)])]),_:1},8,["class"])])]),_:1})]),_:1})]))}}),Pe={class:"space-y-6"},Ae={key:0,class:"flex flex-wrap gap-2"},De={class:"capitalize"},Be={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},ze={class:"relative overflow-hidden"},Ne=["src","alt"],je={class:"absolute top-3 left-3 flex flex-col space-y-2"},Le={class:"absolute top-3 right-3 flex flex-col space-y-2 opacity-0 group-hover:opacity-100 transition-all duration-300"},Oe={class:"absolute bottom-3 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-all duration-300"},He={class:"flex items-start justify-between"},Ue={class:"font-semibold line-clamp-2 group-hover:text-primary transition-colors flex-1"},Ve=["href"],Ge={key:0,class:"flex items-center space-x-1 ml-2"},Me={class:"text-xs text-muted-foreground"},qe={class:"text-xs"},Ie={key:0,class:"text-success font-medium"},Ee={key:1,class:"text-destructive font-medium"},Qe={key:2,class:"text-info font-medium"},Ze={class:"flex items-center justify-between pt-2"},Re={class:"flex flex-col"},We={class:"text-xl font-bold text-primary"},Xe={key:0,class:"text-sm text-muted-foreground line-through"},Je={class:"flex space-x-2"},Ke={key:2,class:"text-center py-16"},Ye={class:"w-24 h-24 bg-muted rounded-full flex items-center justify-center mx-auto mb-6"},et={class:"text-muted-foreground mb-6"},tt={class:"flex flex-col sm:flex-row gap-3 justify-center"},st={key:3,class:"flex justify-center mt-8"},at={class:"flex space-x-2"},lt=H({__name:"ProductsGrid",props:{products:{},paginationLinks:{},hasActiveFilters:{type:Boolean},activeFilters:{},categories:{},user:{}},emits:["clearFilters","goToPage"],setup(l,{emit:$}){const p=l,u=$,f=P(new Set),h=P(new Set),k=r=>parseFloat(r.toString()).toFixed(2),C=r=>{const e=p.categories.find(s=>s.slug===r);return e?e.name:r},D=r=>{if(!p.user){A.visit("/login");return}f.value.has(r)?f.value.delete(r):f.value.add(r),A.post("/wishlist/toggle",{product_id:r},{preserveState:!0,preserveScroll:!0})},B=r=>{if(!p.user){A.visit("/login");return}h.value.add(r),A.post(`/cart/add/${r}`,{quantity:1},{preserveState:!0,preserveScroll:!0,onFinish:()=>{h.value.delete(r)}})},S=r=>{r&&u("goToPage",r)},T=()=>{u("clearFilters")},z=(r,e)=>Math.round((r-e)/r*100);return(r,e)=>(d(),y("div",Pe,[l.hasActiveFilters?(d(),y("div",Ae,[l.activeFilters.search?(d(),b(t(w),{key:0,variant:"secondary",class:"px-3 py-1"},{default:o(()=>[a(t(I),{class:"h-3 w-3 mr-1"}),c(" Search: "+x(l.activeFilters.search),1)]),_:1})):v("",!0),l.activeFilters.category?(d(),b(t(w),{key:1,variant:"secondary",class:"px-3 py-1 capitalize"},{default:o(()=>[i("span",De,x(C(l.activeFilters.category)),1)]),_:1})):v("",!0),l.activeFilters.donatable?(d(),b(t(w),{key:2,variant:"secondary",class:"px-3 py-1"},{default:o(()=>[a(t(Z),{class:"h-3 w-3 mr-1"}),e[0]||(e[0]=c(" Donations Only ",-1))]),_:1})):v("",!0),a(t(_),{variant:"ghost",size:"sm",onClick:T,class:"h-6 px-2 text-xs"},{default:o(()=>[...e[1]||(e[1]=[c(" Clear all ",-1)])]),_:1})])):v("",!0),l.products.length?(d(),y("div",Be,[(d(!0),y(V,null,G(l.products,s=>(d(),b(t(M),{key:s.id,class:"group overflow-hidden hover:shadow-xl hover:scale-[1.02] transition-all duration-500 cursor-pointer border-0 shadow-md"},{default:o(()=>[i("div",ze,[i("img",{src:s.image||"/placeholder-product.jpg",alt:s.name,class:"h-48 w-full object-full group-hover:scale-110 transition-transform duration-700",loading:"lazy"},null,8,Ne),e[6]||(e[6]=i("div",{class:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1)),i("div",je,[s.is_donatable?(d(),b(t(w),{key:0,class:"bg-warning text-warning-foreground"},{default:o(()=>[a(t(Z),{class:"h-3 w-3 mr-1"}),e[2]||(e[2]=c(" Donation ",-1))]),_:1})):v("",!0),s.is_featured?(d(),b(t(w),{key:1,class:"bg-info text-info-foreground"},{default:o(()=>[a(t(R),{class:"h-3 w-3 mr-1"}),e[3]||(e[3]=c(" Featured ",-1))]),_:1})):v("",!0),s.stock<10&&s.stock>0?(d(),b(t(w),{key:2,variant:"destructive"},{default:o(()=>[c(" Only "+x(s.stock)+" left ",1)]),_:2},1024)):v("",!0),s.stock===0&&!s.is_donatable?(d(),b(t(w),{key:3,variant:"destructive"},{default:o(()=>[...e[4]||(e[4]=[c(" Out of Stock ",-1)])]),_:1})):v("",!0),s.original_price&&s.original_price>s.price?(d(),b(t(w),{key:4,class:"bg-destructive/80 text-destructive-foreground"},{default:o(()=>[c(x(z(s.original_price,s.price))+"% OFF ",1)]),_:2},1024)):v("",!0)]),i("div",Le,[a(t(_),{size:"icon",variant:"secondary",class:"hover:scale-110 shadow-lg",onClick:E(n=>D(s.id),["stop"]),title:f.value.has(s.id)?"Remove from wishlist":"Add to wishlist"},{default:o(()=>[a(t(ie),{class:j([{"fill-current text-red-500":f.value.has(s.id)},"h-4 w-4"])},null,8,["class"])]),_:2},1032,["onClick","title"]),s.stock>0||s.is_donatable?(d(),b(t(_),{key:0,size:"icon",variant:"secondary",class:"hover:scale-110 shadow-lg",onClick:E(n=>B(s.id),["stop"]),disabled:h.value.has(s.id),title:"Add to cart"},{default:o(()=>[a(t(ee),{class:"h-4 w-4"})]),_:1},8,["onClick","disabled"])):v("",!0)]),i("div",Oe,[a(t(_),{size:"sm",variant:"secondary",class:"shadow-lg",as:"a",href:`/products/${s.slug}`},{default:o(()=>[...e[5]||(e[5]=[c(" Quick View ",-1)])]),_:1},8,["href"])])]),a(t(q),{class:"p-4 space-y-3"},{default:o(()=>[i("div",He,[i("h3",Ue,[i("a",{href:`/products/${s.slug}`,class:"hover:underline"},x(s.name),9,Ve)]),s.rating?(d(),y("div",Ge,[a(t(R),{class:"h-3 w-3 fill-warning text-warning"}),i("span",Me,x(s.rating),1)])):v("",!0)]),a(t(w),{variant:"outline",class:"text-xs capitalize"},{default:o(()=>[c(x(s.category?.name||"Uncategorized"),1)]),_:2},1024),i("div",qe,[s.stock>0?(d(),y("span",Ie,x(s.stock)+" in stock ",1)):s.is_donatable?(d(),y("span",Qe," Available for donation ")):(d(),y("span",Ee," Out of stock "))]),i("div",Ze,[i("div",Re,[i("span",We," $"+x(k(s.price)),1),s.original_price&&s.original_price>s.price?(d(),y("span",Xe," $"+x(k(s.original_price)),1)):v("",!0)]),i("div",Je,[a(t(_),{size:"sm",variant:"outline",class:"hover:scale-105 transition-all duration-300",as:"a",href:`/products/${s.slug}`},{default:o(()=>[...e[7]||(e[7]=[c(" View ",-1)])]),_:1},8,["href"])])])]),_:2},1024)]),_:2},1024))),128))])):(d(),y("div",Ke,[i("div",Ye,[a(t(I),{class:"h-12 w-12 text-muted-foreground"})]),e[10]||(e[10]=i("h3",{class:"text-2xl font-semibold mb-2"},"No products found",-1)),i("p",et,x(l.hasActiveFilters?"Try adjusting your search or filter criteria":"No products are available at the moment"),1),i("div",tt,[l.hasActiveFilters?(d(),b(t(_),{key:0,variant:"outline",onClick:T},{default:o(()=>[...e[8]||(e[8]=[c(" Clear Filters ",-1)])]),_:1})):v("",!0),a(t(_),{as:"a",href:"/products"},{default:o(()=>[...e[9]||(e[9]=[c(" Browse All Products ",-1)])]),_:1})])])),l.paginationLinks&&l.paginationLinks.length>3?(d(),y("div",st,[i("div",at,[(d(!0),y(V,null,G(l.paginationLinks,s=>(d(),b(t(_),{key:s.label,variant:s.active?"default":"outline",disabled:!s.url,onClick:n=>S(s.url),size:"sm",innerHTML:s.label,class:"min-w-10"},null,8,["variant","disabled","onClick","innerHTML"]))),128))])])):v("",!0)]))}}),ot=re(lt,[["__scopeId","data-v-91ca292a"]]),it={class:"min-h-screen bg-background text-foreground"},rt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},nt={class:"grid grid-cols-1 lg:grid-cols-4 gap-8"},ct={class:"lg:col-span-1"},dt={class:"lg:col-span-3"},Lt=H({__name:"Products",props:{products:{type:Object,required:!0},categories:{type:Array,required:!0},filters:{type:Object,default:()=>({})},auth:{type:Object,default:()=>({})},cartItems:{type:Array,default:()=>[]},settings:{type:Object,default:()=>({})}},setup(l){const $=l.settings.site_name||"Elegant Store",p=l.auth.user,u=P(l.filters.search||""),f=P(l.filters.category||""),h=P(l.filters.donatable||!1),k=P(l.filters.sort||"name"),C=P(!1),D=L(()=>u.value||f.value||h.value),B=L(()=>{const n={};return u.value&&(n.search=u.value),f.value&&(n.category=f.value),h.value&&(n.donatable=h.value),n}),S=L(()=>{let n=l.products.data||[];switch(k.value){case"price_asc":n=[...n].sort((m,g)=>parseFloat(m.price)-parseFloat(g.price));break;case"price_desc":n=[...n].sort((m,g)=>parseFloat(g.price)-parseFloat(m.price));break;case"name":n=[...n].sort((m,g)=>m.name.localeCompare(g.name));break;case"name_desc":n=[...n].sort((m,g)=>g.name.localeCompare(m.name));break;case"newest":n=[...n].sort((m,g)=>new Date(g.created_at)-new Date(m.created_at));break;case"featured":n=[...n].sort((m,g)=>(g.is_featured?1:0)-(m.is_featured?1:0));break}return n}),T=()=>{console.log("Applying filters:",{search:u.value,category:f.value,donatable:h.value,sort:k.value});const n={};u.value&&(n.search=u.value),f.value&&(n.category=f.value),h.value&&(n.donatable=!0),k.value&&k.value!=="name"&&(n.sort=k.value),A.get("/products",n,{preserveState:!0,preserveScroll:!0})},z=()=>{console.log("Clearing all filters"),u.value="",f.value="",h.value=!1,k.value="name",X(()=>{console.log("After clearing - values:",{search:u.value,category:f.value,donatable:h.value,sort:k.value}),A.get("/products",{},{preserveState:!1,preserveScroll:!1})})},r=()=>{C.value=!C.value},e=n=>{n&&A.visit(n,{preserveState:!0,preserveScroll:!1})};let s;return Q(u,n=>{console.log("Search term changed to:",n),clearTimeout(s),s=setTimeout(()=>{T()},500)}),Q([f,h,k],([n,m,g])=>{console.log("Filters changed:",{category:n,donatable:m,sort:g}),T()}),(n,m)=>(d(),y("div",it,[a(t(W),{title:"Products"}),a(J,{categories:l.categories,cartItems:l.cartItems,user:t(p),siteName:t($),settings:l.settings},null,8,["categories","cartItems","user","siteName","settings"]),i("div",rt,[a(fe,{totalProducts:l.products.total||0,selectedCategory:f.value,categories:l.categories},null,8,["totalProducts","selectedCategory","categories"]),i("div",nt,[i("div",ct,[a(Te,{categories:l.categories,searchTerm:u.value,"onUpdate:searchTerm":m[0]||(m[0]=g=>u.value=g),selectedCategory:f.value,"onUpdate:selectedCategory":m[1]||(m[1]=g=>f.value=g),onlyDonatable:h.value,"onUpdate:onlyDonatable":m[2]||(m[2]=g=>h.value=g),sortBy:k.value,"onUpdate:sortBy":m[3]||(m[3]=g=>k.value=g),showFilters:C.value,onToggleFilters:r,onClearFilters:z},null,8,["categories","searchTerm","selectedCategory","onlyDonatable","sortBy","showFilters"])]),i("div",dt,[a(ot,{products:S.value,paginationLinks:l.products.links,hasActiveFilters:D.value,activeFilters:B.value,categories:l.categories,user:t(p),onClearFilters:z,onGoToPage:e},null,8,["products","paginationLinks","hasActiveFilters","activeFilters","categories","user"])])])])]))}});export{Lt as default};
