import{d as P,a as $,u as a,b as x,g as e,h as c,i as y,e as i,t as m,n as H,f as h,o as r,F as T,p as R,x as E,l as A,r as S,w as O,m as j,s as z,q as G,E as X,c as C,k as J}from"./app-BIsdkUFR.js";import{N as K}from"./Navbar-DPxRyVQk.js";import{c as W,_ as M,b as F,a as B}from"./index-1wb7NqwU.js";import{_ as q}from"./index-BCDJER87.js";import{H as L}from"./heart-Zb1J_MV3.js";import{C as Z}from"./calendar-DShC2aLC.js";import{P as Y}from"./package-DtQNl1ka.js";import{P as ee}from"./palette-NUWZ8d2F.js";import{R as te}from"./ruler-BwAit9gb.js";import{S as V,X as se}from"./Separator.vue_vue_type_script_setup_true_lang-BCygaSuc.js";import{a as ae,_ as oe}from"./CardTitle.vue_vue_type_script_setup_true_lang-BbzwQhHq.js";import{_ as re}from"./Input.vue_vue_type_script_setup_true_lang-2lXwBhL7.js";import{_ as D}from"./Label.vue_vue_type_script_setup_true_lang-6xkc7M51.js";import{F as le}from"./filter-CpwJ4dWv.js";import{S as ne}from"./search-B8PsoUUd.js";import{D as ie,T as de}from"./trending-up-DXGEkCto.js";import{C as ue}from"./chevron-right-ChP98AYB.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-CzDr19WN.js";import"./useForwardExpose-DfRgSPHl.js";import"./createContext-Cq00W1KP.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-D3UVaXd0.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=W("ChevronLeftIcon",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),pe={class:"p-6"},me={class:"flex items-start justify-between mb-4"},ve={class:"flex items-center space-x-3 mb-2"},fe={class:"text-lg font-semibold text-foreground"},ge={class:"flex items-center text-sm text-muted-foreground space-x-4"},xe={class:"flex items-center"},ye={class:"flex items-center"},he={key:0,class:"flex items-center"},be={class:"text-right"},_e={class:"text-2xl font-bold text-foreground"},ke={class:"space-y-3 mb-6"},we={class:"flex-shrink-0"},$e=["src","alt"],Se={class:"flex-1 min-w-0"},Ce={class:"font-medium text-foreground truncate"},Fe={key:0,class:"flex items-center space-x-3 mt-1"},Te={key:0,class:"flex items-center space-x-1"},De={class:"text-xs text-muted-foreground"},Oe={key:1,class:"flex items-center space-x-1"},Re={class:"text-xs text-muted-foreground"},Pe={key:1,class:"mt-1"},Ue={class:"flex items-center space-x-2 mt-1"},Ne={class:"text-sm text-muted-foreground"},qe={class:"text-sm font-medium text-foreground"},Ae={class:"text-right"},Ie={class:"font-semibold text-foreground"},je={key:0,class:"text-center py-2"},ze={class:"text-sm text-muted-foreground"},Le={key:0,class:"mb-4 p-3 bg-info/10 rounded-lg"},Ve={class:"flex flex-wrap gap-2"},Me={class:"text-info"},Ee={class:"text-info/80"},He={class:"flex items-center justify-between pt-4 border-t border-border"},Be={class:"text-sm text-muted-foreground"},Ye={class:"flex space-x-3"},Qe=P({__name:"OrderCard",props:{order:{}},setup(s){const _=u=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(u),b=u=>new Date(u).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric"}),v=u=>({pending:"bg-warning/20 text-warning",processing:"bg-info/20 text-info",shipped:"bg-purple-500/20 text-purple-700 dark:text-purple-400",delivered:"bg-success/20 text-success",cancelled:"bg-destructive/20 text-destructive"})[u]||"bg-gray-100 text-gray-800",g=()=>{s.order.is_donation||A.post(`/my-orders/${s.order.id}/reorder`,{},{preserveScroll:!0,onSuccess:()=>{},onError:()=>{}})},l=s.order.items.filter(u=>u.variant_display).length,p=s.order.items.reduce((u,f)=>u+f.quantity,0);return(u,f)=>(r(),$(a(M),{class:"overflow-hidden hover:shadow-lg transition-shadow duration-200"},{default:x(()=>[e("div",pe,[e("div",me,[e("div",null,[e("div",ve,[e("h3",fe," Order #"+m(s.order.id),1),i(a(q),{class:H(v(s.order.status))},{default:x(()=>[h(m(s.order.status.charAt(0).toUpperCase()+s.order.status.slice(1)),1)]),_:1},8,["class"]),s.order.is_donation?(r(),$(a(q),{key:0,class:"bg-warning/20 text-warning"},{default:x(()=>[i(a(L),{class:"h-3 w-3 mr-1"}),f[0]||(f[0]=h(" Donation ",-1))]),_:1})):y("",!0)]),e("div",ge,[e("div",xe,[i(a(Z),{class:"h-4 w-4 mr-1"}),h(" "+m(b(s.order.created_at)),1)]),e("div",ye,[i(a(Y),{class:"h-4 w-4 mr-1"}),h(" "+m(s.order.items.length)+" items ("+m(a(p))+" qty) ",1)]),a(l)>0?(r(),c("div",he,[i(a(ee),{class:"h-4 w-4 mr-1"}),h(" "+m(a(l))+" variants ",1)])):y("",!0)])]),e("div",be,[e("div",_e,m(_(s.order.total)),1)])]),e("div",ke,[(r(!0),c(T,null,R(s.order.items.slice(0,3),(n,k)=>(r(),c("div",{key:n.id,class:"flex items-center space-x-3 p-3 bg-muted/30 rounded-lg"},[e("div",we,[e("img",{src:n.product?.image_url||"/placeholder-product.jpg",alt:n.display_name||n.product_name,class:"w-12 h-12 object-cover rounded border"},null,8,$e)]),e("div",Se,[e("h4",Ce,m(n.display_name||n.product_name),1),n.variant_display?(r(),c("div",Fe,[n.variant_display.color?(r(),c("div",Te,[e("div",{class:"w-3 h-3 rounded-full border border-gray-300",style:E({backgroundColor:n.variant_display.color.hex_code})},null,4),e("span",De,m(n.variant_display.color.name),1)])):y("",!0),n.variant_display.size?(r(),c("div",Oe,[i(a(te),{class:"h-3 w-3 text-muted-foreground"}),e("span",Re,m(n.variant_display.size.name),1)])):y("",!0)])):(r(),c("div",Pe,[i(a(q),{variant:"outline",class:"text-xs"},{default:x(()=>[...f[1]||(f[1]=[h(" Standard Product ",-1)])]),_:1})])),e("div",Ue,[e("span",Ne," Qty: "+m(n.quantity),1),e("span",qe,m(_(n.price))+" each ",1),n.is_donation_item?(r(),$(a(q),{key:0,variant:"outline",class:"text-xs"},{default:x(()=>[i(a(L),{class:"h-3 w-3 mr-1 text-red-500"}),f[2]||(f[2]=h(" Donation ",-1))]),_:1})):y("",!0)])]),e("div",Ae,[e("div",Ie,m(_(n.price*n.quantity)),1)])]))),128)),s.order.items.length>3?(r(),c("div",je,[e("span",ze," + "+m(s.order.items.length-3)+" more items ",1)])):y("",!0)]),a(l)>0?(r(),c("div",Le,[f[3]||(f[3]=e("h5",{class:"text-sm font-medium text-info mb-2"},"Variant Summary:",-1)),e("div",Ve,[(r(!0),c(T,null,R(s.order.items.filter(n=>n.variant_display),n=>(r(),c("div",{key:n.id,class:"flex items-center space-x-2 bg-card px-2 py-1 rounded text-xs"},[n.variant_display?.color?(r(),c("div",{key:0,class:"w-3 h-3 rounded-full border",style:E({backgroundColor:n.variant_display.color.hex_code})},null,4)):y("",!0),e("span",Me,m(n.variant_display?.color?.name||"No Color")+" / "+m(n.variant_display?.size?.name||"No Size"),1),e("span",Ee,"(Ã—"+m(n.quantity)+")",1)]))),128))])])):y("",!0),e("div",He,[e("div",Be,m(a(p))+" items â€¢ "+m(a(l))+" with variants ",1),e("div",Ye,[s.order.is_donation?y("",!0):(r(),$(a(F),{key:0,variant:"default",size:"sm",onClick:g},{default:x(()=>[i(a(V),{class:"h-4 w-4 mr-2"}),f[4]||(f[4]=h(" Reorder ",-1))]),_:1}))])])])]),_:1}))}}),Ge={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-4"},Xe={class:"space-y-2"},Je={class:"relative"},Ke={class:"space-y-2"},We={class:"space-y-2"},Ze={class:"space-y-2"},et={class:"space-y-2"},tt={class:"flex space-x-2"},st={key:0,class:"mt-4 pt-4 border-t border-border"},at={class:"flex items-center space-x-2 text-sm text-muted-foreground"},ot={class:"flex flex-wrap gap-2"},rt={key:0,class:"px-2 py-1 bg-info/20 text-info rounded text-xs"},lt={key:1,class:"px-2 py-1 bg-success/20 text-success rounded text-xs"},nt={key:2,class:"px-2 py-1 bg-primary/20 text-primary rounded text-xs"},it={key:3,class:"px-2 py-1 bg-warning/20 text-warning rounded text-xs"},dt=P({__name:"OrderFilters",props:{search:{type:String,default:""},status:{type:String,default:""},type:{type:String,default:""},dateRange:{type:String,default:""}},emits:["update:search","update:status","update:type","update:date-range","apply","clear"],setup(s,{emit:_}){const b=s,v=_,g=S(b.search),l=S(b.status),p=S(b.type),u=S(b.dateRange);O(()=>b.search,o=>g.value=o),O(()=>b.status,o=>l.value=o),O(()=>b.type,o=>p.value=o),O(()=>b.dateRange,o=>u.value=o);const f=o=>{console.log("ðŸ” Search updated:",o),g.value=o,v("update:search",o)},n=o=>{console.log("ðŸ“Š Status updated:",o),l.value=o,v("update:status",o)},k=o=>{console.log("ðŸ·ï¸ Type updated:",o),p.value=o,v("update:type",o)},w=o=>{console.log("ðŸ“… Date range updated:",o),u.value=o,v("update:date-range",o)},I=()=>{console.log("ðŸš€ Apply filters clicked with values:",{search:g.value,status:l.value,type:p.value,dateRange:u.value}),v("update:search",g.value),v("update:status",l.value),v("update:type",p.value),v("update:date-range",u.value),setTimeout(()=>{v("apply")},10)},U=()=>{console.log("ðŸ§¹ Clear filters clicked"),g.value="",l.value="",p.value="",u.value="",v("update:search",""),v("update:status",""),v("update:type",""),v("update:date-range",""),setTimeout(()=>{v("clear")},10)},N=()=>{const o=g.value||l.value||p.value||u.value;return console.log("ðŸŽ¯ Has active filters:",o,{search:g.value,status:l.value,type:p.value,dateRange:u.value}),o};return(o,t)=>(r(),$(a(M),null,{default:x(()=>[i(a(ae),null,{default:x(()=>[i(a(oe),{class:"flex items-center"},{default:x(()=>[i(a(le),{class:"h-5 w-5 mr-2"}),t[8]||(t[8]=h(" Filter Orders ",-1))]),_:1})]),_:1}),i(a(B),{class:"p-4"},{default:x(()=>[e("div",Ge,[e("div",Xe,[i(a(D),{for:"search"},{default:x(()=>[...t[9]||(t[9]=[h("Search Orders",-1)])]),_:1}),e("div",Je,[i(a(ne),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i(a(re),{id:"search",modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=d=>g.value=d),onInput:t[1]||(t[1]=d=>f(g.value)),placeholder:"Order ID, product name...",class:"pl-10"},null,8,["modelValue"])])]),e("div",Ke,[i(a(D),{for:"status"},{default:x(()=>[...t[10]||(t[10]=[h("Status",-1)])]),_:1}),j(e("select",{id:"status","onUpdate:modelValue":t[2]||(t[2]=d=>l.value=d),onChange:t[3]||(t[3]=d=>n(l.value)),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[...t[11]||(t[11]=[e("option",{value:""},"All Statuses",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"processing"},"Processing",-1),e("option",{value:"shipped"},"Shipped",-1),e("option",{value:"delivered"},"Delivered",-1),e("option",{value:"cancelled"},"Cancelled",-1)])],544),[[z,l.value]])]),e("div",We,[i(a(D),{for:"type"},{default:x(()=>[...t[12]||(t[12]=[h("Order Type",-1)])]),_:1}),j(e("select",{id:"type","onUpdate:modelValue":t[4]||(t[4]=d=>p.value=d),onChange:t[5]||(t[5]=d=>k(p.value)),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[...t[13]||(t[13]=[e("option",{value:""},"All Orders",-1),e("option",{value:"purchase"},"Purchases",-1),e("option",{value:"donation"},"Donations",-1)])],544),[[z,p.value]])]),e("div",Ze,[i(a(D),{for:"dateRange"},{default:x(()=>[...t[14]||(t[14]=[h("Date Range",-1)])]),_:1}),j(e("select",{id:"dateRange","onUpdate:modelValue":t[6]||(t[6]=d=>u.value=d),onChange:t[7]||(t[7]=d=>w(u.value)),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[...t[15]||(t[15]=[e("option",{value:""},"All Time",-1),e("option",{value:"last_month"},"Last Month",-1),e("option",{value:"last_3_months"},"Last 3 Months",-1),e("option",{value:"last_year"},"Last Year",-1),e("option",{value:"this_year"},"This Year",-1)])],544),[[z,u.value]])]),e("div",et,[i(a(D),{class:"invisible"},{default:x(()=>[...t[16]||(t[16]=[h("Actions",-1)])]),_:1}),e("div",tt,[i(a(F),{onClick:I,class:"flex-1",size:"sm"},{default:x(()=>[...t[17]||(t[17]=[h(" Apply ",-1)])]),_:1}),i(a(F),{onClick:U,variant:"outline",size:"sm",disabled:!N()},{default:x(()=>[i(a(se),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])]),N()?(r(),c("div",st,[e("div",at,[t[18]||(t[18]=e("span",null,"Active filters:",-1)),e("div",ot,[g.value?(r(),c("span",rt,' Search: "'+m(g.value)+'" ',1)):y("",!0),l.value?(r(),c("span",lt," Status: "+m(l.value.charAt(0).toUpperCase()+l.value.slice(1)),1)):y("",!0),p.value?(r(),c("span",nt," Type: "+m(p.value.charAt(0).toUpperCase()+p.value.slice(1)),1)):y("",!0),u.value?(r(),c("span",it," Range: "+m(u.value.replace("_"," ").replace(/\b\w/g,d=>d.toUpperCase())),1)):y("",!0)])])])):y("",!0)]),_:1})]),_:1}))}}),ut={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4"},ct={class:"flex items-center justify-between"},pt={class:"text-sm text-muted-foreground mb-1"},mt={class:"text-xl font-bold"},vt=P({__name:"OrderStats",props:{stats:{type:Object,required:!0}},setup(s){const _=v=>`$${parseFloat(v||0).toFixed(2)}`,b=[{label:"Total Orders",value:s.stats.total_orders,icon:V,color:"text-info"},{label:"Purchases",value:s.stats.total_purchases,icon:V,color:"text-success"},{label:"Donations",value:s.stats.total_donations,icon:L,color:"text-warning"},{label:"Total Spent",value:_(s.stats.total_spent),icon:ie,color:"text-primary"},{label:"This Year",value:_(s.stats.this_year_spent),icon:de,color:"text-secondary"}];return(v,g)=>(r(),c("div",ut,[(r(),c(T,null,R(b,l=>i(a(M),{key:l.label,class:"hover:shadow-sm transition-shadow"},{default:x(()=>[i(a(B),{class:"p-4"},{default:x(()=>[e("div",ct,[e("div",null,[e("p",pt,m(l.label),1),e("p",mt,m(l.value),1)]),(r(),$(G(l.icon),{class:H(`h-8 w-8 ${l.color}`)},null,8,["class"]))])]),_:2},1024)]),_:2},1024)),64))]))}}),ft={key:0,class:"flex items-center justify-between"},gt={class:"flex items-center space-x-1"},xt=P({__name:"Pagination",props:{links:{type:Array,required:!0}},emits:["go-to-page"],setup(s,{emit:_}){const b=_,v=g=>{g&&b("go-to-page",g)};return(g,l)=>s.links.length>3?(r(),c("div",ft,[i(a(F),{disabled:!s.links[0].url,variant:"outline",size:"sm",onClick:l[0]||(l[0]=p=>v(s.links[0].url))},{default:x(()=>[i(a(ce),{class:"h-4 w-4 mr-2"}),l[2]||(l[2]=h(" Previous ",-1))]),_:1},8,["disabled"]),e("div",gt,[(r(!0),c(T,null,R(s.links,(p,u)=>(r(),c(T,{key:u},[u!==0&&u!==s.links.length-1?(r(),$(a(F),{key:0,variant:p.active?"default":"outline",size:"sm",disabled:!p.url,onClick:f=>v(p.url),innerHTML:p.label},null,8,["variant","disabled","onClick","innerHTML"])):y("",!0)],64))),128))]),i(a(F),{disabled:!s.links[s.links.length-1].url,variant:"outline",size:"sm",onClick:l[1]||(l[1]=p=>v(s.links[s.links.length-1].url))},{default:x(()=>[l[3]||(l[3]=h(" Next ",-1)),i(a(ue),{class:"h-4 w-4 ml-2"})]),_:1},8,["disabled"])])):y("",!0)}}),yt={class:"min-h-screen bg-background"},ht={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},bt={class:"space-y-6"},_t={key:0,class:"text-center py-12 bg-card rounded-lg border border-border"},kt={class:"text-muted-foreground mb-4"},wt={key:1},$t={key:0,class:"mt-8"},Qt=P({__name:"Index",props:{orders:{type:Object,required:!0},stats:{type:Object,required:!0},filters:{type:Object,default:()=>({})}},setup(s){console.log("ðŸ” Orders Index - Initial Data:",{orders:s.orders,stats:s.stats,filters:s.filters});const _=X(),b=C(()=>_.props.auth),v=C(()=>b.value?.user),g=C(()=>_.props.cartItems||[]),l=C(()=>_.props.categories||[]),p=C(()=>_.props.settings||{}),u=C(()=>p.value.site_name||"Elegant Store"),f=S(s.filters.search||""),n=S(s.filters.status||""),k=S(s.filters.type||""),w=S(s.filters.date_range||"");O([f,n,k,w],([o,t,d,Q])=>{console.log("ðŸ”„ Filter values changed:",{search:o,status:t,type:d,dateRange:Q})},{deep:!0});const I=()=>{const o={};f.value&&(o.search=f.value),n.value&&(o.status=n.value),k.value&&(o.type=k.value),w.value&&(o.date_range=w.value),console.log("ðŸš€ Applying filters with params:",o),console.log("ðŸŒ Current URL params will be:",new URLSearchParams(o).toString()),A.get("/my-orders",o,{preserveState:!0,preserveScroll:!0,onStart:()=>{console.log("ðŸ”„ Filter request started")},onSuccess:t=>{console.log("âœ… Filter request successful:",t.props)},onError:t=>{console.error("âŒ Filter request failed:",t)},onFinish:()=>{console.log("ðŸ Filter request finished")}})},U=()=>{console.log("ðŸ§¹ Clearing all filters"),f.value="",n.value="",k.value="",w.value="",A.get("/my-orders",{},{onSuccess:()=>{console.log("âœ… Filters cleared successfully")}})},N=o=>{o&&(console.log("ðŸ“„ Navigating to page:",o),A.visit(o,{preserveState:!0,preserveScroll:!1}))};return(o,t)=>(r(),c("div",yt,[i(a(J),{title:"My Orders"}),i(K,{categories:l.value,cartItems:g.value,user:v.value,siteName:u.value,settings:p.value},null,8,["categories","cartItems","user","siteName","settings"]),e("div",ht,[t[5]||(t[5]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-foreground mb-2"},"My Orders"),e("p",{class:"text-muted-foreground"},"Track and manage your order history")],-1)),i(vt,{stats:s.stats,class:"mb-8"},null,8,["stats"]),i(dt,{search:f.value,"onUpdate:search":t[0]||(t[0]=d=>f.value=d),status:n.value,"onUpdate:status":t[1]||(t[1]=d=>n.value=d),type:k.value,"onUpdate:type":t[2]||(t[2]=d=>k.value=d),"date-range":w.value,"onUpdate:dateRange":t[3]||(t[3]=d=>w.value=d),onApply:I,onClear:U,class:"mb-8"},null,8,["search","status","type","date-range"]),e("div",bt,[s.orders.data.length===0?(r(),c("div",_t,[i(a(Y),{class:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),t[4]||(t[4]=e("h3",{class:"text-lg font-medium text-card-foreground mb-2"},"No Orders Found",-1)),e("p",kt,m(Object.values(s.filters).some(d=>d)?"No orders match your current filters.":"You haven't placed any orders yet."),1),Object.values(s.filters).some(d=>d)?(r(),c("button",{key:0,onClick:U,class:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90"}," Clear Filters ")):y("",!0)])):(r(),c("div",wt,[(r(!0),c(T,null,R(s.orders.data,d=>(r(),$(Qe,{key:d.id,order:d},null,8,["order"]))),128))]))]),s.orders.data.length>0?(r(),c("div",$t,[i(xt,{links:s.orders.links,onGoToPage:N},null,8,["links"])])):y("",!0)])]))}});export{Qt as default};
