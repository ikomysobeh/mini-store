import{d as E,j as M,r as y,c as T,w as U,a as w,b as a,e as s,g as r,u as e,k as j,y as F,i as b,h as v,f as u,o as m,t as g}from"./app-Z0p12ZY1.js";import{_ as D}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CjSncbLu.js";import{_ as q}from"./PageHeader.vue_vue_type_script_setup_true_lang-C7xCooLo.js";import{_ as H,a as I,b as L,c as G}from"./VariantMatrix.vue_vue_type_script_setup_true_lang-CIxOBoVp.js";import{_ as p,a as f}from"./CardContent.vue_vue_type_script_setup_true_lang-CQMrU5cX.js";import{a as h,_ as x}from"./CardTitle.vue_vue_type_script_setup_true_lang-CfCcFyYB.js";import{_ as z}from"./index-C6EVsNTI.js";import{A as J}from"./arrow-left-C7wE9jPO.js";import{P as C}from"./package-NI0p2es3.js";import"./Input.vue_vue_type_script_setup_true_lang-DvD9KkSn.js";import"./Separator.vue_vue_type_script_setup_true_lang-CcQ1zeyN.js";import"./heart-B17uU2Pp.js";import"./chevron-down-C4YX7wvQ.js";import"./search-TGeXU5Yb.js";import"./eye-BtYLyr3j.js";import"./house-3MHY2EkL.js";import"./chevron-right-zplc0Vtq.js";import"./Label.vue_vue_type_script_setup_true_lang-CRV5D4cp.js";import"./useForwardExpose-BHvqp7Az.js";import"./plus-BfDFAFPT.js";import"./trash-2-DG6Polf9.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-BjWbS_21.js";import"./createContext-cbrDoWMw.js";import"./index-D-oT8fIx.js";import"./eye-off-C_XkJPFs.js";import"./refresh-cw-DmoQ71s3.js";const K={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},O={key:0,class:"text-red-600 text-sm flex items-center mt-1"},Q={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},R={class:"text-sm text-muted-foreground"},W={class:"text-sm text-muted-foreground"},X={class:"text-sm text-muted-foreground"},Y={key:0,class:"text-red-600 text-sm flex items-center mt-1"},Z={class:"text-gray-500"},ee={class:"flex justify-end space-x-4 pt-6"},te={key:0,class:"flex items-center"},se={key:1},Ne=E({__name:"Create",props:{categories:{type:Array,required:!0}},setup($){const o=M({name:"",description:"",price:0,stock:0,category_id:"",is_active:!0,is_donatable:!1,image:null,colors:[],sizes:[],variants:[]}),i=y([]),n=y([]),c=y([]),_=T(()=>i.value.length>0&&n.value.length>0),P=[{label:"Back to Products",href:"/admin/products",icon:J,variant:"outline"}];U([i,n],()=>{_.value&&V()},{deep:!0});const V=()=>{const l=[];i.value.forEach(t=>{n.value.forEach(d=>{c.value.find(k=>k.color_id===t.id&&k.size_id===d.id)||l.push({color_id:t.id,size_id:d.id,color_name:t.name,color_hex:t.hex,size_name:d.name,stock:0,price_adjustment:0,is_active:!0})})}),c.value=[...c.value,...l],c.value=c.value.filter(t=>i.value.some(d=>d.id===t.color_id)&&n.value.some(d=>d.id===t.size_id))},B=l=>{i.value=l,o.colors=l},N=l=>{n.value=l,o.sizes=l},A=l=>{c.value=l,o.variants=l},S=()=>{o.clearErrors(),_.value||(o.variants=[]),console.log("Creating product with data:",{name:o.name,price:o.price,stock:o.stock,category_id:o.category_id,has_variants:_.value,variants_count:o.variants.length}),o.post("/admin/products",{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{console.log("Product created successfully")},onError:l=>{console.log("Product creation errors:",l),window.scrollTo({top:0,behavior:"smooth"})}})};return(l,t)=>(m(),w(D,{title:"Create Product"},{default:a(()=>[s(e(j),{title:"Create Product"}),s(q,{title:"Create New Product",description:"Add a new product with colors and sizes",icon:e(C),"icon-color":"text-green-600",actions:P},null,8,["icon"]),r("div",K,[r("form",{onSubmit:F(S,["prevent"]),class:"space-y-8"},[s(e(p),null,{default:a(()=>[s(e(h),null,{default:a(()=>[s(e(x),null,{default:a(()=>[...t[1]||(t[1]=[u("Basic Product Information",-1)])]),_:1}),e(o).errors.name||e(o).errors.price||e(o).errors.stock||e(o).errors.category_id||e(o).errors.description||e(o).errors.image?(m(),v("div",O,[...t[2]||(t[2]=[r("svg",{class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[r("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),u(" Please check the fields below for errors ",-1)])])):b("",!0)]),_:1}),s(e(f),null,{default:a(()=>[s(H,{form:e(o),categories:$.categories},null,8,["form","categories"])]),_:1})]),_:1}),r("div",Q,[s(e(p),null,{default:a(()=>[s(e(h),null,{default:a(()=>[s(e(x),null,{default:a(()=>[...t[3]||(t[3]=[u("Colors",-1)])]),_:1}),r("p",R,g(i.value.length>0?`${i.value.length} colors selected`:"No colors selected - optional"),1)]),_:1}),s(e(f),null,{default:a(()=>[s(I,{colors:i.value,"onUpdate:colors":B},null,8,["colors"])]),_:1})]),_:1}),s(e(p),null,{default:a(()=>[s(e(h),null,{default:a(()=>[s(e(x),null,{default:a(()=>[...t[4]||(t[4]=[u("Sizes",-1)])]),_:1}),r("p",W,g(n.value.length>0?`${n.value.length} sizes selected`:"No sizes selected - optional"),1)]),_:1}),s(e(f),null,{default:a(()=>[s(L,{sizes:n.value,"onUpdate:sizes":N},null,8,["sizes"])]),_:1})]),_:1})]),_.value?(m(),w(e(p),{key:0},{default:a(()=>[s(e(h),null,{default:a(()=>[s(e(x),null,{default:a(()=>[...t[5]||(t[5]=[u("Product Variants",-1)])]),_:1}),r("p",X," Configure stock and pricing for each color and size combination ("+g(c.value.length)+" variants) ",1),e(o).errors.variants?(m(),v("div",Y,[t[6]||(t[6]=r("svg",{class:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[r("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),u(" "+g(e(o).errors.variants),1)])):b("",!0)]),_:1}),s(e(f),null,{default:a(()=>[s(G,{variants:c.value,"base-price":e(o).price,"onUpdate:variants":A},null,8,["variants","base-price"])]),_:1})]),_:1})):i.value.length===0&&n.value.length===0?(m(),w(e(p),{key:1},{default:a(()=>[s(e(f),{class:"text-center py-8"},{default:a(()=>[r("div",Z,[s(e(C),{class:"mx-auto h-12 w-12 mb-4"}),t[7]||(t[7]=r("h3",{class:"text-lg font-medium mb-2"},"Single Product",-1)),t[8]||(t[8]=r("p",{class:"text-sm"},"This product will be created without variants. The base price and stock will be used.",-1))])]),_:1})]),_:1})):b("",!0),r("div",ee,[s(e(z),{type:"button",variant:"outline",disabled:e(o).processing,onClick:t[0]||(t[0]=d=>l.$inertia.visit("/admin/products"))},{default:a(()=>[...t[9]||(t[9]=[u(" Cancel ",-1)])]),_:1},8,["disabled"]),s(e(z),{type:"submit",disabled:e(o).processing,class:"min-w-[120px]"},{default:a(()=>[e(o).processing?(m(),v("div",te,[...t[10]||(t[10]=[r("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24"},[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),u(" Creating... ",-1)])])):(m(),v("span",se,"Create Product"))]),_:1},8,["disabled"])])],32)])]),_:1}))}});export{Ne as default};
