import{d as Q,r as C,c as W,a as y,b as a,e as s,g as l,u as e,k as Y,i as $,o as m,f as i,t as n,s as q,h as x,F as V,p as A,m as G,x as J,n as X,l as p}from"./app-BKweO40s.js";import{U as Z,_ as tt}from"./AdminLayout.vue_vue_type_script_setup_true_lang-mn-52ggw.js";import{b as v,_ as g,a as _,E as et}from"./index-BUn4p9PZ.js";import{_ as st}from"./Input.vue_vue_type_script_setup_true_lang-DwSrJP0f.js";import{_ as U,a as M,b as N,c as z,d as f}from"./SelectValue.vue_vue_type_script_setup_true_lang-Bk3gok3-.js";import{a as w,_ as k}from"./CardTitle.vue_vue_type_script_setup_true_lang-qkb6-055.js";import{_ as lt}from"./index-CHtoCzq_.js";import{H as B}from"./heart-DaFaWVIT.js";import{T as H}from"./trash-2-CBrDwKxt.js";import{D as at}from"./dollar-sign-Chr1_-Ig.js";import{T as ot}from"./trending-up-DeMieXKl.js";import{C as nt}from"./calendar-B6i7Wtgm.js";import{F as dt}from"./filter-6-HApOH5.js";import{S as it}from"./search-BJ4ITgyn.js";import"./Separator.vue_vue_type_script_setup_true_lang-Du-ouKc9.js";import"./chevron-down-Dbn6uNN7.js";import"./house-CE27jCRI.js";import"./package-BB5zXADH.js";import"./chevron-right-DsnNsYDb.js";import"./index-DIkixBaz.js";import"./Presence-DAj5VCPq.js";import"./Teleport-d-jZSRnp.js";import"./createContext-vVEoiJUg.js";import"./useForwardExpose-D5hPEdrU.js";import"./VisuallyHidden-COgZJn4v.js";import"./check-DNlA4CwW.js";const ut={class:"space-y-6"},rt={class:"flex items-center justify-between"},mt={class:"text-3xl font-bold flex items-center space-x-3"},ft={class:"flex space-x-3"},ct={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},xt={class:"text-2xl font-bold"},pt={class:"text-2xl font-bold"},vt={class:"text-xs text-green-600 mt-1"},gt={class:"text-2xl font-bold"},_t={class:"text-xs text-muted-foreground mt-1"},ht={class:"text-2xl font-bold text-yellow-600"},bt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},yt={class:"md:col-span-2"},wt={class:"relative"},kt={class:"flex space-x-2 mt-4"},Dt={class:"overflow-x-auto"},St={class:"w-full"},Ct={class:"bg-muted/50"},$t={class:"p-4 text-left"},Tt=["checked"],Vt={class:"p-4"},At=["value"],Ft={class:"p-4 font-mono text-sm"},jt={class:"p-4 font-medium"},Ut={class:"p-4 text-sm text-muted-foreground"},Mt={class:"p-4 font-bold text-lg"},Nt={class:"p-4"},zt={class:"p-4 text-sm text-muted-foreground"},Bt={class:"p-4"},Ht={class:"flex space-x-2"},It={key:0,class:"text-center py-12"},Lt={class:"text-muted-foreground"},Et={key:1,class:"border-t p-4"},Ot={class:"flex items-center justify-between"},Pt={class:"text-sm text-muted-foreground"},Kt={class:"flex space-x-2"},ge=Q({__name:"Index",props:{donations:Object,filters:Object,statuses:Array,stats:Object},setup(d){const c=d,r=C([]),D=C(c.filters?.search||""),h=C(c.filters?.status||"all"),b=C(c.filters?.date_range||"all"),F=W(()=>c.donations.data.length>0&&r.value.length===c.donations.data.length),T=u=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(u),I=u=>new Date(u).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),L=u=>({pending:"bg-yellow-500/20 text-yellow-700",completed:"bg-green-500/20 text-green-700",failed:"bg-red-500/20 text-red-700"})[u]||"bg-gray-500/20 text-gray-700",E=()=>{F.value?r.value=[]:r.value=c.donations.data.map(u=>u.id)},j=()=>{p.get("/admin/donations",{search:D.value,status:h.value==="all"?"":h.value,date_range:b.value==="all"?"":b.value},{preserveState:!0,preserveScroll:!0})},O=()=>{D.value="",h.value="all",b.value="all",p.get("/admin/donations")},P=u=>{p.get(`/admin/donations/${u}`)},K=u=>{confirm("Are you sure you want to delete this donation?")&&p.delete(`/admin/donations/${u}`,{preserveScroll:!0})},R=()=>{r.value.length!==0&&confirm(`Delete ${r.value.length} selected donations?`)&&p.post("/admin/donations/bulk-delete",{donation_ids:r.value},{preserveScroll:!0,onSuccess:()=>{r.value=[]}})};return(u,t)=>(m(),y(tt,null,{default:a(()=>[s(e(Y),{title:"Manage Donations"}),l("div",ut,[l("div",rt,[l("div",null,[l("h1",mt,[s(e(B),{class:"h-8 w-8 text-red-500"}),t[4]||(t[4]=l("span",null,"Donations",-1))]),t[5]||(t[5]=l("p",{class:"text-muted-foreground mt-1"}," Manage and track all donation contributions ",-1))]),l("div",ft,[r.value.length>0?(m(),y(e(v),{key:0,onClick:R,variant:"destructive"},{default:a(()=>[s(e(H),{class:"h-4 w-4 mr-2"}),i(" Delete ("+n(r.value.length)+") ",1)]),_:1})):$("",!0)])]),l("div",ct,[s(e(g),null,{default:a(()=>[s(e(w),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(e(k),{class:"text-sm font-medium"},{default:a(()=>[...t[6]||(t[6]=[i("Total Donations",-1)])]),_:1}),s(e(Z),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(_),null,{default:a(()=>[l("div",xt,n(d.stats.total),1),t[7]||(t[7]=l("p",{class:"text-xs text-muted-foreground mt-1"}," All time contributions ",-1))]),_:1})]),_:1}),s(e(g),null,{default:a(()=>[s(e(w),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(e(k),{class:"text-sm font-medium"},{default:a(()=>[...t[8]||(t[8]=[i("Total Revenue",-1)])]),_:1}),s(e(at),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(_),null,{default:a(()=>[l("div",pt,n(T(d.stats.total_revenue)),1),l("p",vt," From "+n(d.stats.completed)+" completed ",1)]),_:1})]),_:1}),s(e(g),null,{default:a(()=>[s(e(w),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(e(k),{class:"text-sm font-medium"},{default:a(()=>[...t[9]||(t[9]=[i("This Month",-1)])]),_:1}),s(e(ot),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(_),null,{default:a(()=>[l("div",gt,n(T(d.stats.this_month_revenue)),1),l("p",_t,n(d.stats.this_month)+" donations ",1)]),_:1})]),_:1}),s(e(g),null,{default:a(()=>[s(e(w),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(e(k),{class:"text-sm font-medium"},{default:a(()=>[...t[10]||(t[10]=[i("Pending",-1)])]),_:1}),s(e(nt),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(_),null,{default:a(()=>[l("div",ht,n(d.stats.pending),1),t[11]||(t[11]=l("p",{class:"text-xs text-muted-foreground mt-1"}," Awaiting payment ",-1))]),_:1})]),_:1})]),s(e(g),null,{default:a(()=>[s(e(w),null,{default:a(()=>[s(e(k),{class:"flex items-center space-x-2"},{default:a(()=>[s(e(dt),{class:"h-5 w-5"}),t[12]||(t[12]=l("span",null,"Filters",-1))]),_:1})]),_:1}),s(e(_),null,{default:a(()=>[l("div",bt,[l("div",yt,[l("div",wt,[s(e(it),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s(e(st),{modelValue:D.value,"onUpdate:modelValue":t[0]||(t[0]=o=>D.value=o),placeholder:"Search by name, phone, or ID...",class:"pl-10",onKeyup:q(j,["enter"])},null,8,["modelValue"])])]),s(e(U),{modelValue:h.value,"onUpdate:modelValue":t[1]||(t[1]=o=>h.value=o)},{default:a(()=>[s(e(M),null,{default:a(()=>[s(e(N),{placeholder:"All Statuses"})]),_:1}),s(e(z),null,{default:a(()=>[s(e(f),{value:"all"},{default:a(()=>[...t[13]||(t[13]=[i("All Statuses",-1)])]),_:1}),(m(!0),x(V,null,A(d.statuses,o=>(m(),y(e(f),{key:o.value,value:o.value},{default:a(()=>[i(n(o.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),s(e(U),{modelValue:b.value,"onUpdate:modelValue":t[2]||(t[2]=o=>b.value=o)},{default:a(()=>[s(e(M),null,{default:a(()=>[s(e(N),{placeholder:"All Time"})]),_:1}),s(e(z),null,{default:a(()=>[s(e(f),{value:"all"},{default:a(()=>[...t[14]||(t[14]=[i("All Time",-1)])]),_:1}),s(e(f),{value:"today"},{default:a(()=>[...t[15]||(t[15]=[i("Today",-1)])]),_:1}),s(e(f),{value:"week"},{default:a(()=>[...t[16]||(t[16]=[i("This Week",-1)])]),_:1}),s(e(f),{value:"month"},{default:a(()=>[...t[17]||(t[17]=[i("This Month",-1)])]),_:1}),s(e(f),{value:"year"},{default:a(()=>[...t[18]||(t[18]=[i("This Year",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),l("div",kt,[s(e(v),{onClick:j},{default:a(()=>[...t[19]||(t[19]=[i("Apply Filters",-1)])]),_:1}),s(e(v),{onClick:O,variant:"outline"},{default:a(()=>[...t[20]||(t[20]=[i("Clear",-1)])]),_:1})])]),_:1})]),_:1}),s(e(g),null,{default:a(()=>[s(e(_),{class:"p-0"},{default:a(()=>[l("div",Dt,[l("table",St,[l("thead",Ct,[l("tr",null,[l("th",$t,[l("input",{type:"checkbox",checked:F.value,onChange:E,class:"rounded"},null,40,Tt)]),t[21]||(t[21]=l("th",{class:"p-4 text-left font-medium"},"ID",-1)),t[22]||(t[22]=l("th",{class:"p-4 text-left font-medium"},"Donor",-1)),t[23]||(t[23]=l("th",{class:"p-4 text-left font-medium"},"Phone",-1)),t[24]||(t[24]=l("th",{class:"p-4 text-left font-medium"},"Amount",-1)),t[25]||(t[25]=l("th",{class:"p-4 text-left font-medium"},"Status",-1)),t[26]||(t[26]=l("th",{class:"p-4 text-left font-medium"},"Date",-1)),t[27]||(t[27]=l("th",{class:"p-4 text-left font-medium"},"Actions",-1))])]),l("tbody",null,[(m(!0),x(V,null,A(d.donations.data,o=>(m(),x("tr",{key:o.id,class:"border-t hover:bg-muted/30 transition-colors"},[l("td",Vt,[G(l("input",{type:"checkbox",value:o.id,"onUpdate:modelValue":t[3]||(t[3]=S=>r.value=S),class:"rounded"},null,8,At),[[J,r.value]])]),l("td",Ft,"#"+n(o.id),1),l("td",jt,n(o.name),1),l("td",Ut,n(o.phone),1),l("td",Mt,n(T(o.value)),1),l("td",Nt,[s(e(lt),{class:X(L(o.status))},{default:a(()=>[i(n(o.status),1)]),_:2},1032,["class"])]),l("td",zt,n(I(o.created_at)),1),l("td",Bt,[l("div",Ht,[s(e(v),{onClick:S=>P(o.id),variant:"outline",size:"sm"},{default:a(()=>[s(e(et),{class:"h-4 w-4"})]),_:1},8,["onClick"]),o.status!=="completed"?(m(),y(e(v),{key:0,onClick:S=>K(o.id),variant:"destructive",size:"sm"},{default:a(()=>[s(e(H),{class:"h-4 w-4"})]),_:1},8,["onClick"])):$("",!0)])])]))),128))])])]),d.donations.data.length===0?(m(),x("div",It,[s(e(B),{class:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),t[28]||(t[28]=l("h3",{class:"text-lg font-medium mb-2"},"No donations found",-1)),l("p",Lt,n(d.filters.search||d.filters.status?"Try adjusting your filters":"Donations will appear here when received"),1)])):$("",!0),d.donations.data.length>0?(m(),x("div",Et,[l("div",Ot,[l("div",Pt," Showing "+n(d.donations.from)+" to "+n(d.donations.to)+" of "+n(d.donations.total)+" donations ",1),l("div",Kt,[(m(!0),x(V,null,A(d.donations.links,o=>(m(),y(e(v),{key:o.label,onClick:S=>e(p).get(o.url),variant:o.active?"default":"outline",disabled:!o.url,size:"sm",innerHTML:o.label},null,8,["onClick","variant","disabled","innerHTML"]))),128))])])])):$("",!0)]),_:1})]),_:1})])]),_:1}))}});export{ge as default};
