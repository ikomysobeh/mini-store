import{d as $,h as g,F as N,p as M,e as a,b as f,u as l,g as e,t as m,n as D,a as y,o as c,q as B,i as b,f as x,c as A,A as K,r as R,l as w,w as L,k as W}from"./app-DG6fpS92.js";import{_ as Y}from"./PageHeader.vue_vue_type_script_setup_true_lang-BAGwoxep.js";import{c as ee,a as I,_ as O,b as k,E as te}from"./index-rJrtJV58.js";import{U as q,_ as se}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BzvN7O1h.js";import{C as H,_ as le}from"./SuccessAlert.vue_vue_type_script_setup_true_lang-CWxI9BFV.js";import{U as G}from"./Separator.vue_vue_type_script_setup_true_lang-VJD1MfJp.js";import{C as Q}from"./circle-check-big-DEs-UTSH.js";import{_ as ae}from"./Input.vue_vue_type_script_setup_true_lang-B4mfe0DQ.js";import{_ as re,a as oe}from"./CardTitle.vue_vue_type_script_setup_true_lang-CmiIU-xo.js";import{S as ne}from"./search-CyxV4OwX.js";import{_ as ie}from"./BulkActions.vue_vue_type_script_setup_true_lang-NVeBYsQM.js";import{_ as z}from"./index-CJps7SWr.js";import{_ as de,a as ce}from"./AvatarFallback.vue_vue_type_script_setup_true_lang-CYXR-HLV.js";import{_ as ue}from"./AvatarImage.vue_vue_type_script_setup_true_lang-dBLPjrrN.js";import{A as J}from"./arrow-up-down-DRxWTEDb.js";import{C as me}from"./circle-x-CdTM9Y8m.js";import{P as fe,M as pe}from"./phone-B01sg6Xv.js";import{U as he}from"./user-plus-Cm3MmqMP.js";import{T as X}from"./trash-2-rFXAYnZK.js";import{_ as ve}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{F as _e}from"./filter-DkspWkcR.js";import{R as ge}from"./refresh-cw-C67tX5Mf.js";import"./arrow-left-Ur-634Dr.js";import"./heart-CgnPYxdA.js";import"./chevron-down-Dk_zugsV.js";import"./house-DYss74kv.js";import"./package-0QTcnlsj.js";import"./chevron-right-BMw6j1MR.js";import"./info-BjpzKIO-.js";import"./triangle-alert-DGya6llZ.js";import"./index-Dr3Q-WtY.js";import"./useForwardExpose-Db3ZbfVU.js";import"./createContext-Ds8J2HMm.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=ee("FileSpreadsheetIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]),be={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},ye={class:"flex items-center justify-between"},Ue={class:"text-sm text-muted-foreground"},ke={class:"text-2xl font-bold"},we=$({__name:"UserStats",props:{users:{},totalUsers:{}},setup(o){const h=o.users.filter(p=>p.is_admin).length,r=o.users.filter(p=>!p.is_admin).length,d=o.users.filter(p=>p.email_verified_at).length,_=[{label:"Total Users",value:o.totalUsers,icon:q,color:"blue"},{label:"Administrators",value:h,icon:H,color:"purple"},{label:"Regular Users",value:r,icon:G,color:"green"},{label:"Email Verified",value:d,icon:Q,color:"emerald"}],U=p=>{const n={blue:"bg-blue-100 text-blue-600",purple:"bg-purple-100 text-purple-600",green:"bg-green-100 text-green-600",emerald:"bg-emerald-100 text-emerald-600"};return n[p]||n.blue};return(p,n)=>(c(),g("div",be,[(c(),g(N,null,M(_,u=>a(l(O),{key:u.label},{default:f(()=>[a(l(I),{class:"p-6"},{default:f(()=>[e("div",ye,[e("div",null,[e("p",Ue,m(u.label),1),e("p",ke,m(u.value.toLocaleString()),1)]),e("div",{class:D(`p-3 rounded-full ${U(u.color)}`)},[(c(),y(B(u.icon),{class:"h-5 w-5"}))],2)])]),_:2},1024)]),_:2},1024)),64))]))}}),$e={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Ce={class:"space-y-2"},Se={class:"relative"},Fe={class:"space-y-2"},Te=["value"],Re=["value"],Ae={class:"space-y-2"},De={class:"flex flex-wrap gap-2"},Ne={class:"space-y-2"},Me=$({__name:"UserFilters",props:{searchTerm:{},selectedRole:{},showFilters:{type:Boolean}},emits:["update:searchTerm","update:selectedRole","clearFilters","applyFilters"],setup(o,{emit:h}){const r=h,d=[{value:"",label:"All Roles"},{value:"1",label:"Administrators Only"},{value:"0",label:"Regular Users Only"}],_=()=>{r("update:selectedRole","1"),r("applyFilters")},U=()=>{r("update:selectedRole","0"),r("applyFilters")};return(p,n)=>o.showFilters?(c(),y(l(O),{key:0,class:"mb-6"},{default:f(()=>[a(l(oe),null,{default:f(()=>[a(l(re),{class:"text-lg"},{default:f(()=>[...n[3]||(n[3]=[x("Filters & Search",-1)])]),_:1})]),_:1}),a(l(I),{class:"space-y-4"},{default:f(()=>[e("div",$e,[e("div",Ce,[n[4]||(n[4]=e("label",{class:"text-sm font-medium"},"Search Users",-1)),e("div",Se,[a(l(ne),{class:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a(l(ae),{value:o.searchTerm,onInput:n[0]||(n[0]=u=>r("update:searchTerm",u.target.value)),placeholder:"Name, email...",class:"pl-10"},null,8,["value"])])]),e("div",Fe,[n[5]||(n[5]=e("label",{class:"text-sm font-medium"},"User Role",-1)),e("select",{value:o.selectedRole,onChange:n[1]||(n[1]=u=>r("update:selectedRole",u.target.value)),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm"},[(c(),g(N,null,M(d,u=>e("option",{key:u.value,value:u.value},m(u.label),9,Re)),64))],40,Te)]),e("div",Ae,[n[8]||(n[8]=e("label",{class:"text-sm font-medium"},"Quick Filters",-1)),e("div",De,[a(l(k),{variant:"outline",size:"sm",onClick:_},{default:f(()=>[a(l(H),{class:"h-3 w-3 mr-1"}),n[6]||(n[6]=x(" Admins ",-1))]),_:1}),a(l(k),{variant:"outline",size:"sm",onClick:U},{default:f(()=>[a(l(G),{class:"h-3 w-3 mr-1"}),n[7]||(n[7]=x(" Users ",-1))]),_:1})])]),e("div",Ne,[n[10]||(n[10]=e("label",{class:"text-sm font-medium"},"Â ",-1)),a(l(k),{variant:"outline",onClick:n[2]||(n[2]=u=>r("clearFilters")),class:"w-full"},{default:f(()=>[...n[9]||(n[9]=[x(" Clear All Filters ",-1)])]),_:1})])])]),_:1})]),_:1})):b("",!0)}}),Pe={class:"overflow-x-auto"},Ee={class:"w-full"},Ve={class:"border-b bg-muted/30"},je={class:"p-4 text-left"},Le=["checked","indeterminate"],ze={class:"p-4 text-left"},Be={class:"p-4 text-left"},Ie={class:"p-4"},Oe=["checked","onChange"],qe={class:"p-4"},He={class:"flex items-center space-x-3"},Ge={class:"font-medium"},Je={class:"flex items-center space-x-2"},Qe={class:"text-sm text-muted-foreground"},Xe={class:"p-4"},Ze={class:"text-sm"},Ke={class:"font-medium"},We={class:"text-muted-foreground space-y-0.5"},Ye={key:0,class:"flex items-center space-x-1"},et={key:1,class:"flex items-center space-x-1"},tt={class:"truncate max-w-32"},st={key:0,class:"mt-1"},lt={class:"flex items-center space-x-2"},at={class:"w-16 bg-muted rounded-full h-1"},rt={class:"text-xs text-muted-foreground"},ot={class:"p-4"},nt={class:"space-y-2"},it={class:"text-xs text-muted-foreground"},dt={class:"p-4"},ct={key:0,class:"text-sm"},ut={class:"font-medium"},mt={class:"text-muted-foreground"},ft={key:0,class:"text-xs text-green-600 font-medium"},pt={key:1,class:"text-sm"},ht={class:"p-4"},vt={class:"text-sm"},_t={class:"text-xs text-muted-foreground"},gt={class:"p-4 text-right"},xt={class:"flex items-center justify-end space-x-2"},bt={key:0,class:"text-center py-12"},yt={class:"w-20 h-20 bg-muted rounded-full flex items-center justify-center mx-auto mb-4"},Ut={class:"text-muted-foreground mb-6"},kt={class:"flex justify-center space-x-3"},wt=$({__name:"UsersTable",props:{users:{},selectedUsers:{},searchTerm:{},selectedRole:{},locale:{default:"nl-NL"}},emits:["update:selectedUsers","toggleSort","updateUserRole","deleteUser","clearFilters","exportUsers"],setup(o,{emit:h}){const r=o,d=h,_=i=>i?new Date(i).toLocaleDateString(r.locale,{day:"2-digit",month:"short",year:"numeric"}):"Never",U=i=>i?new Date(i).toLocaleDateString(r.locale,{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Never",p=i=>i.name?i.name.split(" ").map(t=>t[0]).join("").toUpperCase().substring(0,2):i.email?.charAt(0).toUpperCase()||"U",n=i=>i.customer?.first_name&&i.customer?.last_name?`${i.customer.first_name} ${i.customer.last_name}`:i.name,u=i=>i?"bg-purple-100 text-purple-800 border-purple-200":"bg-blue-100 text-blue-800 border-blue-200",C=i=>i?H:G,P=i=>i?"text-green-600":"text-red-600",S=i=>{if(!i.customer)return 0;let t=0;return["first_name","last_name","phone","address"].forEach(v=>{i.customer?.[v]&&(t+=25)}),t},F=A(()=>r.users.length>0&&r.selectedUsers.length===r.users.length),E=A(()=>r.selectedUsers.length>0&&r.selectedUsers.length<r.users.length),T=A(()=>r.searchTerm||r.selectedRole!==""),V=()=>{F.value?d("update:selectedUsers",[]):d("update:selectedUsers",r.users.map(i=>i.id))},j=i=>{const t=[...r.selectedUsers],s=t.indexOf(i);s>-1?t.splice(s,1):t.push(i),d("update:selectedUsers",t)};return(i,t)=>(c(),y(l(O),{class:"shadow-sm"},{default:f(()=>[a(l(I),{class:"p-0"},{default:f(()=>[e("div",Pe,[e("table",Ee,[e("thead",Ve,[e("tr",null,[e("th",je,[e("input",{type:"checkbox",checked:F.value,indeterminate:E.value,onChange:V,class:"rounded border-border"},null,40,Le)]),e("th",ze,[e("button",{onClick:t[0]||(t[0]=s=>d("toggleSort","name")),class:"flex items-center space-x-1 hover:text-primary font-medium group"},[t[4]||(t[4]=e("span",null,"User",-1)),a(l(J),{class:"h-4 w-4 opacity-0 group-hover:opacity-100 transition-opacity"})])]),t[6]||(t[6]=e("th",{class:"p-4 text-left font-medium"},"Profile Info",-1)),t[7]||(t[7]=e("th",{class:"p-4 text-left font-medium"},"Role & Status",-1)),t[8]||(t[8]=e("th",{class:"p-4 text-left font-medium"},"Customer Data",-1)),e("th",Be,[e("button",{onClick:t[1]||(t[1]=s=>d("toggleSort","created_at")),class:"flex items-center space-x-1 hover:text-primary font-medium group"},[t[5]||(t[5]=e("span",null,"Joined",-1)),a(l(J),{class:"h-4 w-4 opacity-0 group-hover:opacity-100 transition-opacity"})])]),t[9]||(t[9]=e("th",{class:"p-4 text-right font-medium"},"Actions",-1))])]),e("tbody",null,[(c(!0),g(N,null,M(o.users,s=>(c(),g("tr",{key:s.id,class:"border-b hover:bg-muted/30 transition-colors"},[e("td",Ie,[e("input",{type:"checkbox",checked:o.selectedUsers.includes(s.id),onChange:v=>j(s.id),class:"rounded border-border"},null,40,Oe)]),e("td",qe,[e("div",He,[a(l(de),{class:"h-10 w-10"},{default:f(()=>[s.avatar?(c(),y(l(ue),{key:0,src:s.avatar,alt:s.name},null,8,["src","alt"])):b("",!0),a(l(ce),{class:"bg-primary/10 text-primary"},{default:f(()=>[x(m(p(s)),1)]),_:2},1024)]),_:2},1024),e("div",null,[e("p",Ge,m(s.name),1),e("div",Je,[e("p",Qe,m(s.email),1),(c(),y(B(s.email_verified_at?l(Q):l(me)),{class:D([P(!!s.email_verified_at),"h-3 w-3"]),title:s.email_verified_at?"Email Verified":"Email Not Verified"},null,8,["class","title"]))])])])]),e("td",Xe,[e("div",Ze,[e("p",Ke,[x(m(n(s))+" ",1),s.name!==n(s)?(c(),y(l(z),{key:0,variant:"outline",class:"ml-1 text-xs"},{default:f(()=>[...t[10]||(t[10]=[x(" Full Profile ",-1)])]),_:1})):b("",!0)]),e("div",We,[s.customer?.phone?(c(),g("div",Ye,[a(l(fe),{class:"h-3 w-3"}),e("span",null,m(s.customer.phone),1)])):b("",!0),s.customer?.address?(c(),g("div",et,[a(l(pe),{class:"h-3 w-3"}),e("span",tt,m(s.customer.address),1)])):b("",!0)]),s.customer?(c(),g("div",st,[e("div",lt,[e("div",at,[e("div",{class:"bg-primary h-1 rounded-full transition-all",style:K({width:S(s)+"%"})},null,4)]),e("span",rt,m(S(s))+"% ",1)])])):b("",!0)])]),e("td",ot,[e("div",nt,[a(l(z),{class:D([u(s.is_admin),"text-xs px-2 py-1 border flex items-center w-fit"])},{default:f(()=>[(c(),y(B(C(s.is_admin)),{class:"h-3 w-3 mr-1"})),x(" "+m(s.is_admin?"Admin":"User"),1)]),_:2},1032,["class"]),e("div",it," ID: #"+m(s.id),1)])]),e("td",dt,[s.customer?(c(),g("div",ct,[e("p",ut,m(s.customer.orders_count||0)+" orders",1),e("p",mt," Customer since "+m(_(s.customer.created_at||s.created_at)),1),s.customer.total_spent?(c(),g("div",ft," $"+m((s.customer.total_spent||0).toLocaleString())+" spent ",1)):b("",!0)])):(c(),g("div",pt,[a(l(z),{variant:"outline",class:"text-xs"},{default:f(()=>[a(l(he),{class:"h-3 w-3 mr-1"}),t[11]||(t[11]=x(" No Customer Profile ",-1))]),_:1})]))]),e("td",ht,[e("div",vt,m(_(s.created_at)),1),e("div",_t,m(U(s.created_at)),1)]),e("td",gt,[e("div",xt,[a(l(k),{variant:"ghost",size:"sm",as:"a",href:`/admin/users/${s.id}`,title:"View & Edit User",class:"h-8 w-8 p-0"},{default:f(()=>[a(l(te),{class:"h-4 w-4"})]),_:1},8,["href"]),a(l(k),{variant:"ghost",size:"sm",onClick:v=>d("deleteUser",s.id,s.name),class:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete User"},{default:f(()=>[a(l(X),{class:"h-4 w-4"})]),_:1},8,["onClick"])])])]))),128))])]),o.users.length===0?(c(),g("div",bt,[e("div",yt,[a(l(q),{class:"h-10 w-10 text-muted-foreground"})]),t[14]||(t[14]=e("h3",{class:"text-lg font-semibold mb-2"},"No users found",-1)),e("p",Ut,m(T.value?"Try adjusting your search filters":"No users have registered yet"),1),e("div",kt,[T.value?(c(),y(l(k),{key:0,variant:"outline",onClick:t[2]||(t[2]=s=>d("clearFilters"))},{default:f(()=>[...t[12]||(t[12]=[x(" Clear Filters ",-1)])]),_:1})):b("",!0),a(l(k),{onClick:t[3]||(t[3]=s=>d("exportUsers"))},{default:f(()=>[a(l(xe),{class:"h-4 w-4 mr-2"}),t[13]||(t[13]=x(" Export Data ",-1))]),_:1})])])):b("",!0)])]),_:1})]),_:1}))}}),$t=ve(wt,[["__scopeId","data-v-5d81ee4f"]]),Ct={class:"flex space-x-2"},St=$({__name:"Pagination",props:{links:{},className:{default:"flex justify-center mt-8"}},emits:["goToPage"],setup(o,{emit:h}){const r=h,d=_=>{_&&r("goToPage",_)};return(_,U)=>o.links&&o.links.length>3?(c(),g("div",{key:0,class:D(o.className)},[e("div",Ct,[(c(!0),g(N,null,M(o.links,(p,n)=>(c(),y(l(k),{key:`${p.label}-${n}`,variant:p.active?"default":"outline",disabled:!p.url,onClick:u=>d(p.url),size:"sm",innerHTML:p.label,class:"min-w-10"},null,8,["variant","disabled","onClick","innerHTML"]))),128))])],2)):b("",!0)}}),Ft={class:"min-h-screen bg-muted/20"},Tt={class:"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Rt={class:"flex justify-between items-center mt-4 text-sm text-muted-foreground"},cs=$({__name:"Index",props:{users:{type:Object,required:!0},filters:{type:Object,default:()=>({})}},setup(o){const h=R(o.filters.search||""),r=R(o.filters.is_admin!==void 0?o.filters.is_admin:""),d=R([]),_=R(!1),U=A(()=>o.users.total||o.users.data.length),p=[{label:_.value?"Hide":"Show Filters",icon:_e,variant:"outline",onClick:()=>{_.value=!_.value}},{label:"Refresh",icon:ge,variant:"outline",onClick:()=>u()},{label:"Add User",href:"/admin/users/create"}],n=[{label:"Delete Selected",icon:X,variant:"destructive",destructive:!0,onClick:E}];function u(){const t={};h.value&&(t.search=h.value),r.value!==""&&(t.is_admin=r.value),w.get("/admin/users",t,{preserveState:!0,preserveScroll:!0})}function C(){h.value="",r.value="",w.get("/admin/users")}function P(t){console.log("Sort by:",t),u()}function S(t,s){const v=o.users.data.find(Z=>Z.id===t);v&&w.patch(`/admin/users/${t}`,{name:v.name,email:v.email,is_admin:s,first_name:v.customer?.first_name||"",last_name:v.customer?.last_name||"",phone:v.customer?.phone||"",address:v.customer?.address||""},{preserveScroll:!0})}function F(t,s){confirm(`Are you sure you want to delete user "${s}"? This action cannot be undone.`)&&w.delete(`/admin/users/${t}`,{preserveScroll:!0})}function E(){d.value.length!==0&&confirm(`Are you sure you want to delete ${d.value.length} users? This action cannot be undone.`)&&d.value.forEach(t=>{w.delete(`/admin/users/${t}`,{preserveScroll:!0,onSuccess:()=>{d.value=d.value.filter(s=>s!==t)}})})}function T(t){t&&w.visit(t,{preserveState:!0,preserveScroll:!1})}function V(){const t=new URLSearchParams;h.value&&t.append("search",h.value),r.value!==""&&t.append("is_admin",r.value),window.open(`/admin/users/export?${t.toString()}`)}function j(){d.value=[]}let i;return L(h,t=>{clearTimeout(i),i=setTimeout(()=>{u()},500)}),L(r,()=>{u()}),L(_,t=>{p[0].label=t?"Hide Filters":"Show Filters"}),(t,s)=>(c(),y(se,{title:"Orders Management",breadcrumbs:t.breadcrumbs},{default:f(()=>[e("div",Ft,[a(l(W),{title:"Users Management"}),a(Y,{title:"Users Management",description:"Manage user accounts, profiles and permissions",icon:l(q),"icon-color":"text-green-600",actions:p},null,8,["icon"]),e("div",Tt,[a(we,{users:o.users.data,"total-users":U.value},null,8,["users","total-users"]),a(le),a(Me,{"search-term":h.value,"onUpdate:searchTerm":s[0]||(s[0]=v=>h.value=v),"selected-role":r.value,"onUpdate:selectedRole":s[1]||(s[1]=v=>r.value=v),"show-filters":_.value,onClearFilters:C,onApplyFilters:u},null,8,["search-term","selected-role","show-filters"]),a(ie,{"selected-count":d.value.length,"item-name":"user",actions:n,onCancel:j},null,8,["selected-count"]),a($t,{users:o.users.data,"selected-users":d.value,"onUpdate:selectedUsers":s[2]||(s[2]=v=>d.value=v),"search-term":h.value,"selected-role":r.value,locale:"en-US",onToggleSort:P,onUpdateUserRole:S,onDeleteUser:F,onClearFilters:C,onExportUsers:V},null,8,["users","selected-users","search-term","selected-role"]),a(St,{links:o.users.links,onGoToPage:T},null,8,["links"]),e("div",Rt,[e("p",null," Showing "+m(o.users.from||1)+" to "+m(o.users.to||o.users.data.length)+" of "+m(o.users.total||o.users.data.length)+" users ",1),e("p",null,m(d.value.length)+" selected ",1)])])])]),_:1},8,["breadcrumbs"]))}});export{cs as default};
