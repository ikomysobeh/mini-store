import{d as P,j,r as L,c as F,a as V,b as i,g as a,e as o,u as t,k as N,f as l,t as c,i as g,o as u,h as y,n as S,m as E,v as T,l as x}from"./app-DPOYb9G5.js";import{c as M,b as f,E as B,_ as p,a as _}from"./index-BIDGme3r.js";import{_ as b}from"./Input.vue_vue_type_script_setup_true_lang-DqAzkM1F.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-DLLlf-T1.js";import{a as h,_ as w}from"./CardTitle.vue_vue_type_script_setup_true_lang-DBHYC2vi.js";import{_ as z}from"./Separator.vue_vue_type_script_setup_true_lang-f3rsktJi.js";import{_ as O}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CX0Ujydx.js";import{A as q}from"./arrow-left-BPlYSbta.js";import{S as H}from"./save-BtdvfK-d.js";import{T as J}from"./trash-2-D983NLJK.js";import{I as D}from"./info-tm8mBZ45.js";import"./index-Cg8e5mr3.js";import"./useForwardExpose-CElbg2eD.js";import"./heart-By6OfRag.js";import"./chevron-down-C6W4hZ5f.js";import"./search-DZ1fqCf5.js";import"./house-BEkyIQfJ.js";import"./package-CSx4-A5u.js";import"./chevron-right-BqFrrGfz.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=M("FolderPenIcon",[["path",{d:"M2 11.5V5a2 2 0 0 1 2-2h3.9c.7 0 1.3.3 1.7.9l.8 1.2c.4.6 1 .9 1.7.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-9.5",key:"a8xqs0"}],["path",{d:"M11.378 13.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1saktj"}]]),Y={class:"min-h-screen bg-background text-foreground"},G={class:"border-b bg-card"},K={class:"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8"},Q={class:"flex items-center justify-between h-16"},W={class:"flex items-center space-x-4"},X={class:"flex items-center space-x-3"},Z={class:"p-2 bg-primary/10 rounded-lg"},ee={class:"flex items-center space-x-3"},te={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},se={class:"flex items-center space-x-2"},ae={class:"flex items-center space-x-2"},oe={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},re={class:"lg:col-span-2 space-y-8"},ie={class:"space-y-2"},ne={key:0,class:"text-sm text-destructive"},le={class:"space-y-2"},de={key:0,class:"text-sm text-destructive"},ce={class:"space-y-2"},ue={class:"flex"},me={class:"text-xs text-muted-foreground"},ge={key:0,class:"text-sm text-destructive"},fe={class:"space-y-2"},pe={class:"text-xs text-muted-foreground"},_e={class:"space-y-2"},ve={class:"text-xs text-muted-foreground"},ye={class:"lg:col-span-1 space-y-6"},xe={class:"flex items-center space-x-2"},be=["checked"],he={key:0,class:"p-3 bg-orange-50 border border-orange-200 rounded-lg"},we={class:"flex items-start space-x-2"},ke={class:"space-y-2"},Ce={class:"space-y-3 text-sm"},Ve={class:"flex justify-between"},Se={class:"font-medium"},De={class:"flex justify-between"},$e={class:"flex justify-between"},Ue={class:"flex justify-between"},Fe={class:"space-y-2"},Qe=P({__name:"Edit",props:{category:{type:Object,required:!0}},setup(r){const e=j({name_en:r.category.name_en||r.category.name||"",name_ar:r.category.name_ar||"",description_en:r.category.description_en||r.category.description||"",description_ar:r.category.description_ar||"",name:r.category.name||"",slug:r.category.slug||"",description:r.category.description||"",image:null,is_active:r.category.is_active!==void 0?!!r.category.is_active:!0,sort_order:r.category.sort_order||0,remove_image:!1,_method:"PUT"});L(r.category.image||null),r.category.image;const $=F(()=>e.name_en&&e.name_en.trim().length>0&&e.name_ar&&e.name_ar.trim().length>0),k=F(()=>e.name_en!==(r.category.name_en||r.category.name||"")||e.name_ar!==(r.category.name_ar||"")||e.description_en!==(r.category.description_en||r.category.description||"")||e.description_ar!==(r.category.description_ar||"")||e.slug!==r.category.slug||e.is_active!==!!r.category.is_active||e.sort_order!==(r.category.sort_order||0)||e.image!==null||e.remove_image===!0),v=d=>d?d.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"):"",A=()=>{e.name_en&&!e.slug&&(e.slug=v(e.name_en))},U=(d=!1)=>{if(console.log("=== Form Submission Debug ==="),console.log("Form is_active before submission:",e.is_active,typeof e.is_active),console.log("Draft mode:",d),!$.value){alert("Category names (English and Arabic) are required");return}!e.slug&&e.name_en&&(e.slug=v(e.name_en)),e.name=e.name_en,e.description=e.description_en;const s=e.is_active;if(d&&(e.is_active=!1),console.log("Form data before submission:",e.data()),e.image){const n=new FormData;n.append("name_en",e.name_en),n.append("name_ar",e.name_ar),n.append("description_en",e.description_en||""),n.append("description_ar",e.description_ar||""),n.append("name",e.name_en),n.append("slug",e.slug||""),n.append("description",e.description_en||""),n.append("sort_order",e.sort_order.toString()),n.append("is_active",e.is_active?"1":"0"),n.append("remove_image",e.remove_image?"1":"0"),n.append("image",e.image),n.append("_method","PUT"),console.log("Submitting FormData with is_active:",e.is_active?"1":"0"),x.post(`/admin/categories/${r.category.id}`,n,{forceFormData:!0,onSuccess:()=>{console.log("Update successful")},onError:C=>{console.error("Form submission errors:",C),e.is_active=s},onFinish:()=>{d&&(e.is_active=s)}})}else{const n={name_en:e.name_en,name_ar:e.name_ar,description_en:e.description_en||"",description_ar:e.description_ar||"",name:e.name_en,slug:e.slug||"",description:e.description_en||"",sort_order:parseInt(e.sort_order.toString())||0,is_active:!!e.is_active,remove_image:!!e.remove_image};console.log("Submitting JSON data:",n),x.put(`/admin/categories/${r.category.id}`,n,{onSuccess:()=>{console.log("Update successful")},onError:C=>{console.error("Form submission errors:",C),e.is_active=s},onFinish:()=>{d&&(e.is_active=s)}})}},I=()=>{const d=r.category.products_count>0;let s=`Are you sure you want to delete "${r.category.name}"?`;d&&(s+=`

This category has ${r.category.products_count} product(s). They will become uncategorized.`),s+=`

This action cannot be undone.`,confirm(s)&&x.delete(`/admin/categories/${r.category.id}`,{onSuccess:()=>{x.visit("/admin/categories")}})};return(d,s)=>(u(),V(O,{title:"Orders Management",breadcrumbs:d.breadcrumbs},{default:i(()=>[a("div",Y,[o(t(N),{title:`Edit ${r.category.name}`},null,8,["title"]),a("div",G,[a("div",K,[a("div",Q,[a("div",W,[o(t(f),{variant:"ghost",as:"a",href:"/admin/categories",class:"p-2"},{default:i(()=>[o(t(q),{class:"h-5 w-5"})]),_:1}),a("div",X,[a("div",Z,[o(t(R),{class:"h-6 w-6 text-primary"})]),s[9]||(s[9]=a("div",null,[a("h1",{class:"text-2xl font-bold text-foreground"},"Edit Category"),a("p",{class:"text-sm text-muted-foreground"}," Update category information ")],-1))])]),a("div",ee,[o(t(f),{variant:"outline",as:"a",href:`/products?category=${r.category.slug}`,target:"_blank"},{default:i(()=>[o(t(B),{class:"h-4 w-4 mr-2"}),s[10]||(s[10]=l(" View Category ",-1))]),_:1},8,["href"]),o(t(f),{variant:"outline",onClick:s[0]||(s[0]=n=>U(!0)),disabled:t(e).processing||!k.value},{default:i(()=>[...s[11]||(s[11]=[l(" Save as Draft ",-1)])]),_:1},8,["disabled"]),o(t(f),{onClick:s[1]||(s[1]=n=>U(!1)),disabled:t(e).processing||!$.value||!k.value},{default:i(()=>[o(t(H),{class:"h-4 w-4 mr-2"}),l(" "+c(t(e).processing?"Updating...":"Update Category"),1)]),_:1},8,["disabled"]),o(t(f),{variant:"destructive",onClick:I},{default:i(()=>[o(t(J),{class:"h-4 w-4 mr-2"}),s[12]||(s[12]=l(" Delete ",-1))]),_:1})])])])]),a("div",te,[r.category.is_active?g("",!0):(u(),V(t(p),{key:0,class:"mb-6 bg-destructive/20 border-destructive/50"},{default:i(()=>[o(t(_),{class:"p-4"},{default:i(()=>[a("div",se,[o(t(D),{class:"h-4 w-4 text-destructive"}),s[13]||(s[13]=a("p",{class:"text-sm text-destructive font-medium"}," This category is currently inactive and not visible to customers. ",-1))])]),_:1})]),_:1})),k.value?(u(),V(t(p),{key:1,class:"mb-6 bg-primary/10 border-primary/20"},{default:i(()=>[o(t(_),{class:"p-4"},{default:i(()=>[a("div",ae,[o(t(D),{class:"h-4 w-4 text-primary"}),s[14]||(s[14]=a("p",{class:"text-sm text-primary font-medium"}," You have unsaved changes. Don't forget to update the category. ",-1))])]),_:1})]),_:1})):g("",!0),a("div",oe,[a("div",re,[o(t(p),null,{default:i(()=>[o(t(h),null,{default:i(()=>[o(t(w),null,{default:i(()=>[...s[15]||(s[15]=[l("Basic Information",-1)])]),_:1})]),_:1}),o(t(_),{class:"space-y-6"},{default:i(()=>[a("div",ie,[o(t(m),{for:"name_en"},{default:i(()=>[...s[16]||(s[16]=[l(" Category Name (English) ",-1),a("span",{class:"text-destructive"},"*",-1)])]),_:1}),o(t(b),{id:"name_en",modelValue:t(e).name_en,"onUpdate:modelValue":s[2]||(s[2]=n=>t(e).name_en=n),onInput:A,placeholder:"Electronics, Clothing, Books...",class:S(["text-lg",{"border-destructive":t(e).errors.name_en}])},null,8,["modelValue","class"]),t(e).errors.name_en?(u(),y("p",ne,c(t(e).errors.name_en),1)):g("",!0)]),a("div",le,[o(t(m),{for:"name_ar"},{default:i(()=>[...s[17]||(s[17]=[l(" Category Name (Arabic) - اسم الفئة ",-1),a("span",{class:"text-destructive"},"*",-1)])]),_:1}),o(t(b),{id:"name_ar",modelValue:t(e).name_ar,"onUpdate:modelValue":s[3]||(s[3]=n=>t(e).name_ar=n),placeholder:"أدخل اسم الفئة بالعربية",dir:"rtl",class:S(["text-lg",{"border-destructive":t(e).errors.name_ar}])},null,8,["modelValue","class"]),t(e).errors.name_ar?(u(),y("p",de,c(t(e).errors.name_ar),1)):g("",!0)]),a("div",ce,[o(t(m),{for:"slug"},{default:i(()=>[...s[18]||(s[18]=[l("Category URL Slug",-1)])]),_:1}),a("div",ue,[s[19]||(s[19]=a("span",{class:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-input bg-muted text-sm text-muted-foreground"}," /categories/ ",-1)),o(t(b),{id:"slug",modelValue:t(e).slug,"onUpdate:modelValue":s[4]||(s[4]=n=>t(e).slug=n),placeholder:v(t(e).name_en)||"category-slug",class:"rounded-l-none"},null,8,["modelValue","placeholder"])]),a("p",me," Preview: /categories/"+c(t(e).slug||v(t(e).name_en)||"category-slug"),1),t(e).errors.slug?(u(),y("p",ge,c(t(e).errors.slug),1)):g("",!0)]),a("div",fe,[o(t(m),{for:"description_en"},{default:i(()=>[...s[20]||(s[20]=[l("Description (English)",-1)])]),_:1}),E(a("textarea",{id:"description_en","onUpdate:modelValue":s[5]||(s[5]=n=>t(e).description_en=n),placeholder:"Describe this category and what products it contains...",rows:"4",maxlength:"500",class:"flex min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[T,t(e).description_en]]),a("p",pe,c(t(e).description_en?.length||0)+"/500 characters ",1)]),a("div",_e,[o(t(m),{for:"description_ar"},{default:i(()=>[...s[21]||(s[21]=[l("Description (Arabic) - الوصف",-1)])]),_:1}),E(a("textarea",{id:"description_ar","onUpdate:modelValue":s[6]||(s[6]=n=>t(e).description_ar=n),placeholder:"وصف الفئة بالعربية...",dir:"rtl",rows:"4",maxlength:"500",class:"flex min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[T,t(e).description_ar]]),a("p",ve,c(t(e).description_ar?.length||0)+"/500 characters ",1)])]),_:1})]),_:1})]),a("div",ye,[o(t(p),null,{default:i(()=>[o(t(h),null,{default:i(()=>[o(t(w),null,{default:i(()=>[...s[22]||(s[22]=[l("Publishing",-1)])]),_:1})]),_:1}),o(t(_),{class:"space-y-4"},{default:i(()=>[a("div",xe,[a("input",{type:"checkbox",checked:t(e).is_active,onChange:s[7]||(s[7]=n=>{t(e).is_active=n.target.checked,console.log("Checkbox changed to:",n.target.checked,"Form is_active now:",t(e).is_active)}),id:"is_active",class:"rounded border-border"},null,40,be),o(t(m),{for:"is_active",class:"cursor-pointer"},{default:i(()=>[...s[23]||(s[23]=[l(" Active (Visible to customers) ",-1)])]),_:1})]),t(e).is_active?g("",!0):(u(),y("div",he,[a("div",we,[o(t(D),{class:"h-4 w-4 text-orange-600 mt-0.5"}),s[24]||(s[24]=a("div",{class:"text-sm text-orange-700"},[a("p",{class:"font-medium"},"Draft Mode"),a("p",{class:"text-xs"},"This category will not be visible to customers")],-1))])]))]),_:1})]),_:1}),o(t(p),null,{default:i(()=>[o(t(h),null,{default:i(()=>[o(t(w),null,{default:i(()=>[...s[25]||(s[25]=[l("Organization",-1)])]),_:1})]),_:1}),o(t(_),{class:"space-y-4"},{default:i(()=>[a("div",ke,[o(t(m),{for:"sort_order"},{default:i(()=>[...s[26]||(s[26]=[l("Sort Order",-1)])]),_:1}),o(t(b),{id:"sort_order",modelValue:t(e).sort_order,"onUpdate:modelValue":s[8]||(s[8]=n=>t(e).sort_order=n),type:"number",min:"0",placeholder:"0"},null,8,["modelValue"]),s[27]||(s[27]=a("p",{class:"text-xs text-muted-foreground"}," Lower numbers appear first in category listings ",-1))])]),_:1})]),_:1}),o(t(p),null,{default:i(()=>[o(t(h),null,{default:i(()=>[o(t(w),{class:"text-lg"},{default:i(()=>[...s[28]||(s[28]=[l("Category Stats",-1)])]),_:1})]),_:1}),o(t(_),{class:"space-y-3"},{default:i(()=>[a("div",Ce,[a("div",Ve,[s[29]||(s[29]=a("span",{class:"text-muted-foreground"},"Products:",-1)),a("span",Se,c(r.category.products_count||0),1)]),a("div",De,[s[30]||(s[30]=a("span",{class:"text-muted-foreground"},"Created:",-1)),a("span",null,c(new Date(r.category.created_at).toLocaleDateString()),1)]),a("div",$e,[s[31]||(s[31]=a("span",{class:"text-muted-foreground"},"Updated:",-1)),a("span",null,c(new Date(r.category.updated_at).toLocaleDateString()),1)]),a("div",Ue,[s[32]||(s[32]=a("span",{class:"text-muted-foreground"},"Status:",-1)),a("span",{class:S(r.category.is_active?"text-green-600":"text-red-600")},c(r.category.is_active?"Active":"Inactive"),3)])]),o(t(z)),a("div",Fe,[o(t(f),{variant:"outline",size:"sm",class:"w-full",as:"a",href:`/products?category=${r.category.slug}`,target:"_blank"},{default:i(()=>[o(t(B),{class:"h-4 w-4 mr-2"}),s[33]||(s[33]=l(" View Category Page ",-1))]),_:1},8,["href"])])]),_:1})]),_:1})])])])])]),_:1},8,["breadcrumbs"]))}});export{Qe as default};
