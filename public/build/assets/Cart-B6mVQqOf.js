import{d as j,D as W,r as q,c as w,h as v,i as $,F as H,p as R,n as z,g as t,a as E,q as G,t as g,e as r,u as a,o as u,b as p,f as k,w as B,k as J,l as S}from"./app-CquFscMv.js";import{N as K}from"./Navbar-DRDsg9wO.js";import{M,_ as Z}from"./Breadcrumb.vue_vue_type_script_setup_true_lang-CLJdds2H.js";import{X as tt,S as F,_ as et}from"./Separator.vue_vue_type_script_setup_true_lang-CuEErp7v.js";import{I as st}from"./info-XW_7k5u_.js";import{T as at}from"./triangle-alert-DvjMfOnG.js";import{C as rt}from"./circle-x-Dq6IGc6b.js";import{C as ot}from"./circle-check-big-DC01gkMb.js";import{b as _,_ as U,a as X}from"./index-C8XNpwXW.js";import{_ as D}from"./index-DJlmEF29.js";import{A as nt}from"./arrow-left-qRp1-vdV.js";import{S as L}from"./star-CgDAzaJH.js";import{H as it}from"./heart-tfGn5AUz.js";import{T as A}from"./trash-2-DLej6b6q.js";import{P as O}from"./plus-DcIPP0TL.js";import{_ as lt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as ct,_ as dt}from"./CardTitle.vue_vue_type_script_setup_true_lang-11A-AHFQ.js";import{C as V}from"./credit-card-DJQMKoiP.js";import{S as ut}from"./shield-1XNs8_aI.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-DlnGV4fu.js";import"./useForwardExpose-Dr09vZbh.js";import"./createContext-DpB6vTL0.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-Cz_M8Xge.js";import"./chevron-right-B-597vJJ.js";import"./house-BAQU5jRm.js";const mt={key:0,class:"space-y-4 mb-6"},pt={class:"p-4"},ft={class:"flex items-center justify-between"},gt={class:"flex items-center space-x-2"},ht=["onClick"],xt=j({__name:"FlashMessages",props:{dismissible:{type:Boolean,default:!0}},setup(o){const C=W(),s=q(new Set),f=w(()=>{const m=C.props.flash;return["success","error","warning","info"].filter(d=>m?.[d]&&!s.value.has(d)).map(d=>({type:d,message:m[d],id:`${d}-${Date.now()}`}))}),l=m=>{const h={success:{icon:ot,bgClass:"bg-primary/10",borderClass:"border-primary/20",iconClass:"text-primary",textClass:"text-primary-foreground"},error:{icon:rt,bgClass:"bg-destructive/10",borderClass:"border-destructive/20",iconClass:"text-destructive",textClass:"text-destructive"},warning:{icon:at,bgClass:"bg-warning/10",borderClass:"border-warning/20",iconClass:"text-warning",textClass:"text-warning"},info:{icon:st,bgClass:"bg-secondary/10",borderClass:"border-secondary/20",iconClass:"text-secondary",textClass:"text-secondary"}};return h[m]||h.info},y=m=>{s.value.add(m)};return(m,h)=>f.value.length>0?(u(),v("div",mt,[(u(!0),v(H,null,R(f.value,d=>(u(),v("div",{key:d.id,class:z(`${l(d.type).borderClass} ${l(d.type).bgClass} border rounded-lg`)},[t("div",pt,[t("div",ft,[t("div",gt,[(u(),E(G(l(d.type).icon),{class:z(`h-5 w-5 ${l(d.type).iconClass}`)},null,8,["class"])),t("p",{class:z(`text-sm font-medium ${l(d.type).textClass}`)},g(d.message),3)]),o.dismissible?(u(),v("button",{key:0,onClick:Q=>y(d.type),class:z(`${l(d.type).iconClass} hover:opacity-70`)},[r(a(tt),{class:"h-4 w-4"})],10,ht)):$("",!0)])])],2))),128))])):$("",!0)}}),vt={class:"flex items-center justify-between mb-8"},bt={class:"text-3xl font-bold flex items-center space-x-2"},yt=j({__name:"CartPageHeader",props:{itemCount:{},isEmpty:{type:Boolean}},setup(o){return(C,s)=>(u(),v("div",vt,[t("h1",bt,[r(a(F),{class:"h-8 w-8"}),s[0]||(s[0]=t("span",null,"Shopping Cart",-1)),o.isEmpty?$("",!0):(u(),E(a(D),{key:0,variant:"outline"},{default:p(()=>[k(g(o.itemCount)+" item"+g(o.itemCount!==1?"s":""),1)]),_:1}))]),r(a(_),{variant:"outline",as:"a",href:"/products",class:"flex items-center space-x-2"},{default:p(()=>[r(a(nt),{class:"h-4 w-4"}),s[1]||(s[1]=t("span",null,"Continue Shopping",-1))]),_:1})]))}}),_t={class:"w-32 h-32 bg-gradient-to-br from-muted to-muted/60 rounded-full flex items-center justify-center mx-auto mb-8 shadow-inner"},Ct={class:"flex flex-col sm:flex-row gap-4 justify-center"},$t={class:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-6 max-w-2xl mx-auto"},wt={class:"text-center p-4"},kt={class:"w-12 h-12 bg-primary/20 rounded-full flex items-center justify-center mx-auto mb-3"},It={class:"text-center p-4"},St={class:"w-12 h-12 bg-destructive/20 rounded-full flex items-center justify-center mx-auto mb-3"},qt={class:"text-center p-4"},jt={class:"w-12 h-12 bg-secondary/20 rounded-full flex items-center justify-center mx-auto mb-3"},Qt=j({__name:"EmptyCart",props:{className:{default:""}},setup(o){return(C,s)=>(u(),v("div",{class:z(`text-center py-16 ${o.className}`)},[t("div",_t,[r(a(F),{class:"h-16 w-16 text-muted-foreground"})]),s[8]||(s[8]=t("h2",{class:"text-3xl font-bold mb-3"},"Your cart is empty",-1)),s[9]||(s[9]=t("p",{class:"text-muted-foreground mb-8 max-w-md mx-auto"}," Looks like you haven't added anything to your cart yet. Start exploring our amazing products! ",-1)),t("div",Ct,[r(a(_),{as:"a",href:"/products",size:"lg",class:"min-w-48"},{default:p(()=>[r(a(F),{class:"h-5 w-5 mr-2"}),s[0]||(s[0]=k(" Start Shopping ",-1))]),_:1}),r(a(_),{variant:"outline",as:"a",href:"/products?featured=true",size:"lg"},{default:p(()=>[r(a(L),{class:"h-5 w-5 mr-2"}),s[1]||(s[1]=k(" View Featured Products ",-1))]),_:1})]),t("div",$t,[t("div",wt,[t("div",kt,[r(a(F),{class:"h-6 w-6 text-primary"})]),s[2]||(s[2]=t("h3",{class:"font-semibold mb-1"},"Browse Products",-1)),s[3]||(s[3]=t("p",{class:"text-sm text-muted-foreground"},"Discover our wide range of quality products",-1))]),t("div",It,[t("div",St,[r(a(it),{class:"h-6 w-6 text-destructive"})]),s[4]||(s[4]=t("h3",{class:"font-semibold mb-1"},"Check Wishlist",-1)),s[5]||(s[5]=t("p",{class:"text-sm text-muted-foreground"},"Items you've saved for later",-1))]),t("div",qt,[t("div",jt,[r(a(L),{class:"h-6 w-6 text-secondary"})]),s[6]||(s[6]=t("h3",{class:"font-semibold mb-1"},"Featured Items",-1)),s[7]||(s[7]=t("p",{class:"text-sm text-muted-foreground"},"Our handpicked recommendations",-1))])])],2))}}),Tt={class:"lg:col-span-2 space-y-4"},zt={class:"flex justify-between items-center"},Et={class:"text-sm text-muted-foreground"},Ft={class:"p-6 flex items-center space-x-4"},Pt={class:"flex-shrink-0"},Nt=["src","alt"],At={class:"flex-grow min-w-0"},Dt={class:"font-semibold text-lg mb-1"},Bt=["href"],Mt={class:"text-muted-foreground text-sm mb-2"},Lt={class:"flex space-x-2 mb-2"},Ot={class:"sm:hidden mt-4 flex items-center justify-between"},Vt={class:"flex flex-col"},Ht={class:"text-lg font-bold text-primary"},Rt={key:0,class:"text-sm text-muted-foreground line-through"},Ut={class:"flex items-center space-x-2"},Xt={class:"flex items-center border rounded-md"},Yt=["value","onInput","disabled"],Wt={class:"hidden sm:block text-right min-w-0"},Gt={class:"text-lg font-bold text-primary"},Jt={key:0,class:"text-sm text-muted-foreground line-through"},Kt={class:"hidden sm:flex items-center border rounded-md"},Zt=["value","onInput","disabled"],te={class:"hidden sm:block text-right min-w-0"},ee={class:"text-lg font-bold"},se={key:0,class:"text-xs text-muted-foreground"},ae={class:"hidden sm:block"},re=j({__name:"CartItemsList",props:{cartItems:{},quantities:{},updatingItems:{}},emits:["incrementQuantity","decrementQuantity","updateQuantity","removeItem","clearCart"],setup(o,{emit:C}){const s=o,f=C,l=q({});B(()=>s.cartItems,n=>{n.forEach(c=>{l.value[c.id]||(l.value[c.id]=s.quantities[c.id]||c.quantity||1)})},{immediate:!0}),B(()=>s.quantities,n=>{Object.keys(n).forEach(c=>{const e=parseInt(c);n[e]!==void 0&&(l.value[e]=n[e])})},{deep:!0});const y=n=>parseFloat(n.toString()).toFixed(2),m=n=>l.value[n.id]||n.quantity||1,h=(n,c)=>{const e=c.target,I=Math.max(1,parseInt(e.value)||1);l.value[n]=I;const b=s.cartItems.find(i=>i.id===n),P=s.quantities[n]||(b?b.quantity:1);I!==P&&f("updateQuantity",n,I)},d=n=>{const c=m(s.cartItems.find(e=>e.id===n));l.value[n]=c+1,f("incrementQuantity",n)},Q=n=>{const c=m(s.cartItems.find(e=>e.id===n));c>1&&(l.value[n]=c-1,f("decrementQuantity",n))},T=n=>{const c=m(n);return n.price*c};return(n,c)=>(u(),v("div",Tt,[t("div",zt,[t("p",Et,g(o.cartItems.length)+" item"+g(o.cartItems.length>1?"s":"")+" in your cart ",1),r(a(_),{variant:"outline",size:"sm",onClick:c[0]||(c[0]=e=>f("clearCart")),class:"text-destructive hover:text-destructive"},{default:p(()=>[r(a(A),{class:"h-4 w-4 mr-2"}),c[1]||(c[1]=k(" Clear All Items ",-1))]),_:1})]),r(a(U),null,{default:p(()=>[r(a(X),{class:"p-0"},{default:p(()=>[(u(!0),v(H,null,R(o.cartItems,(e,I)=>(u(),v("div",{key:e.id,class:"border-b last:border-b-0"},[t("div",Ft,[t("div",Pt,[t("img",{src:e.product?.image||e.image||"/placeholder-product.jpg",alt:e.product?.name||e.name,class:"w-20 h-20 object-cover rounded-lg border"},null,8,Nt)]),t("div",At,[t("h3",Dt,[t("a",{href:`/products/${e.product?.slug||e.slug}`,class:"hover:text-primary transition-colors"},g(e.product?.name||e.name),9,Bt)]),t("p",Mt,g(e.product?.category?.name||e.category?.name||"Uncategorized"),1),t("div",Lt,[e.product?.is_donatable?(u(),E(a(D),{key:0,variant:"secondary",class:"text-xs"},{default:p(()=>[...c[2]||(c[2]=[k(" Donation Item ",-1)])]),_:1})):$("",!0),e.product?.stock!==void 0&&e.product.stock<10?(u(),E(a(D),{key:1,variant:"outline",class:"text-xs text-orange-600"},{default:p(()=>[k(" Only "+g(e.product.stock)+" left ",1)]),_:2},1024)):$("",!0)]),t("div",Ot,[t("div",Vt,[t("span",Ht," $"+g(y(e.price)),1),e.original_price&&e.original_price>e.price?(u(),v("span",Rt," $"+g(y(e.original_price)),1)):$("",!0)]),t("div",Ut,[t("div",Xt,[r(a(_),{size:"sm",variant:"ghost",onClick:b=>Q(e.id),disabled:o.updatingItems.has(e.id)||m(e)<=1,class:"h-8 w-8 p-0"},{default:p(()=>[r(a(M),{class:"h-3 w-3"})]),_:1},8,["onClick","disabled"]),t("input",{value:m(e),onInput:b=>h(e.id,b),disabled:o.updatingItems.has(e.id),class:"h-8 w-12 text-center border-0 text-sm bg-transparent focus:outline-none",type:"number",min:"1",max:"99"},null,40,Yt),r(a(_),{size:"sm",variant:"ghost",onClick:b=>d(e.id),disabled:o.updatingItems.has(e.id),class:"h-8 w-8 p-0"},{default:p(()=>[r(a(O),{class:"h-3 w-3"})]),_:1},8,["onClick","disabled"])]),r(a(_),{size:"sm",variant:"ghost",onClick:b=>f("removeItem",e.id),class:"text-destructive hover:text-destructive h-8 w-8 p-0"},{default:p(()=>[r(a(A),{class:"h-3 w-3"})]),_:1},8,["onClick"])])])]),t("div",Wt,[t("div",Gt," $"+g(y(e.price)),1),e.original_price&&e.original_price>e.price?(u(),v("div",Jt," $"+g(y(e.original_price)),1)):$("",!0)]),t("div",Kt,[r(a(_),{size:"sm",variant:"ghost",onClick:b=>Q(e.id),disabled:o.updatingItems.has(e.id)||m(e)<=1,class:"h-10 w-10 p-0"},{default:p(()=>[r(a(M),{class:"h-4 w-4"})]),_:1},8,["onClick","disabled"]),t("input",{value:m(e),onInput:b=>h(e.id,b),disabled:o.updatingItems.has(e.id),class:"h-10 w-16 text-center border-0 bg-transparent focus:outline-none",type:"number",min:"1",max:"99"},null,40,Zt),r(a(_),{size:"sm",variant:"ghost",onClick:b=>d(e.id),disabled:o.updatingItems.has(e.id),class:"h-10 w-10 p-0"},{default:p(()=>[r(a(O),{class:"h-4 w-4"})]),_:1},8,["onClick","disabled"])]),t("div",te,[t("div",ee," $"+g(y(T(e))),1),o.updatingItems.has(e.id)?(u(),v("div",se," Updating... ")):$("",!0)]),t("div",ae,[r(a(_),{size:"sm",variant:"ghost",onClick:b=>f("removeItem",e.id),class:"text-destructive hover:text-destructive",title:"Remove item"},{default:p(()=>[r(a(A),{class:"h-4 w-4"})]),_:1},8,["onClick"])])])]))),128))]),_:1})]),_:1})]))}}),oe=lt(re,[["__scopeId","data-v-0e7dab40"]]),ne={class:"lg:col-span-1"},ie={class:"sticky top-24 space-y-6"},le={class:"flex justify-between text-base"},ce={class:"font-medium"},de={class:"flex justify-between text-xl font-bold"},ue={class:"text-primary"},me={key:0,class:"text-xs text-center text-muted-foreground"},pe={class:"flex items-center justify-center space-x-2 text-xs text-muted-foreground mt-4 p-3 bg-muted/50 rounded-lg"},fe=j({__name:"OrderSummary",props:{subtotal:{},shipping:{},total:{},itemCount:{},user:{},updatingItems:{}},emits:["proceedToCheckout","applyPromoCode"],setup(o,{emit:C}){const s=o,f=C;q(""),q(!1),w(()=>s.shipping===0?100:Math.min(s.subtotal/50*100,100)),w(()=>Math.max(50-s.subtotal,0));const l=m=>parseFloat(m.toString()).toFixed(2),y=()=>{f("proceedToCheckout")};return(m,h)=>(u(),v("div",ne,[t("div",ie,[r(a(U),null,{default:p(()=>[r(a(ct),null,{default:p(()=>[r(a(dt),{class:"flex items-center space-x-2"},{default:p(()=>[r(a(V),{class:"h-5 w-5"}),h[0]||(h[0]=t("span",null,"Order Summary",-1))]),_:1})]),_:1}),r(a(X),{class:"space-y-4"},{default:p(()=>[t("div",le,[t("span",null,"Subtotal ("+g(o.itemCount)+" items)",1),t("span",ce,"$"+g(l(o.subtotal)),1)]),r(a(et)),t("div",de,[h[1]||(h[1]=t("span",null,"Total",-1)),t("span",ue,"$"+g(l(o.total)),1)]),r(a(_),{onClick:y,size:"lg",class:"w-full mt-6",disabled:o.updatingItems.size>0},{default:p(()=>[r(a(V),{class:"h-4 w-4 mr-2"}),k(" "+g(o.user?"Proceed to Checkout":"Login & Checkout"),1)]),_:1},8,["disabled"]),o.user?$("",!0):(u(),v("p",me," You'll be redirected to login first ")),t("div",pe,[r(a(ut),{class:"h-3 w-3"}),h[2]||(h[2]=t("span",null,"256-bit SSL Secure Checkout",-1))])]),_:1})]),_:1})])]))}}),ge={class:"min-h-screen bg-background text-foreground"},he={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},xe={class:"text-muted-foreground"},ve={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},be={class:"bg-card text-card-foreground p-6 rounded-lg border border-border lg:col-span-2"},ye={class:"bg-card text-card-foreground p-6 rounded-lg border border-border"},Ue=j({__name:"Cart",props:{cartItems:{type:Array,default:()=>[]},categories:{type:Array,default:()=>[]},auth:{type:Object,default:()=>({})},settings:{type:Object,default:()=>({})}},setup(o){const C=o.settings.site_name||"Elegant Store",s=o.auth.user,f=q(new Set),l=q({});o.cartItems.forEach(i=>{l.value[i.id]=i.quantity});const y=w(()=>o.cartItems.reduce((i,x)=>{const N=l.value[x.id]||x.quantity;return i+parseFloat(x.price||0)*N},0)),m=w(()=>y.value>50?0:9.99),h=w(()=>y.value),d=w(()=>o.cartItems.length===0),Q=[{label:"Home",href:"/"},{label:"Shopping Cart",isActive:!0}],T=(i,x)=>{if(x<1){e(i);return}x>99&&(x=99),l.value[i]=x,f.value.add(i),setTimeout(()=>{S.patch(`/cart/update/${i}`,{quantity:x},{preserveState:!0,preserveScroll:!0,onFinish:()=>{f.value.delete(i)},onError:N=>{console.error("Failed to update quantity:",N),l.value[i]=o.cartItems.find(Y=>Y.id===i)?.quantity||1,f.value.delete(i)}})},500)},n=i=>{const x=l.value[i]||1;T(i,x+1)},c=i=>{const x=l.value[i]||1;T(i,x-1)},e=i=>{confirm("Remove this item from your cart?")&&S.delete(`/cart/remove/${i}`,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{delete l.value[i]},onError:x=>{console.error("Failed to remove item:",x)}})},I=()=>{confirm("Are you sure you want to clear your entire cart?")&&S.delete("/cart/clear",{preserveState:!0,onSuccess:()=>{l.value={}},onError:i=>{console.error("Failed to clear cart:",i)}})},b=()=>{s?S.visit("/checkout"):S.visit("/login?redirect=checkout")},P=i=>{S.post("/cart/apply-promo",{code:i},{preserveState:!0,preserveScroll:!0})};return(i,x)=>(u(),v("div",ge,[r(a(J),{title:"Shopping Cart"}),r(K,{categories:o.categories,cartItems:o.cartItems,user:a(s),siteName:a(C),settings:o.settings},null,8,["categories","cartItems","user","siteName","settings"]),t("div",he,[r(xt,{dismissible:!0}),t("div",xe,[r(Z,{items:Q})]),r(yt,{itemCount:o.cartItems.length,isEmpty:d.value},null,8,["itemCount","isEmpty"]),d.value?(u(),E(Qt,{key:0})):(u(),v("div",ve,[t("div",be,[r(oe,{cartItems:o.cartItems,quantities:l.value,updatingItems:f.value,onIncrementQuantity:n,onDecrementQuantity:c,onUpdateQuantity:T,onRemoveItem:e,onClearCart:I},null,8,["cartItems","quantities","updatingItems"])]),t("div",ye,[r(fe,{subtotal:y.value,shipping:m.value,total:h.value,itemCount:o.cartItems.length,user:a(s),updatingItems:f.value,onProceedToCheckout:b,onApplyPromoCode:P},null,8,["subtotal","shipping","total","itemCount","user","updatingItems"])])]))])]))}});export{Ue as default};
