import{d as z,E as W,r as j,c as k,h,i as C,F as U,p as R,n as E,g as t,a as Q,q as G,t as v,e as a,u as s,o as c,b as g,f as I,w as D,B as J,k as Z,l as q}from"./app-SjLUGOZr.js";import{N as tt}from"./Navbar-R4jjqAnd.js";import{M as O,_ as et}from"./Breadcrumb.vue_vue_type_script_setup_true_lang-DTR5mLIU.js";import{X as st,S as T,_ as at}from"./Separator.vue_vue_type_script_setup_true_lang-BZDczlZu.js";import{I as ot}from"./info-4skxA9Wu.js";import{T as rt}from"./triangle-alert-FY0Yk6Wt.js";import{C as nt}from"./circle-x-FOVfB1zg.js";import{C as it}from"./circle-check-big-CHZW6zmj.js";import{b as $,_ as X,a as Y}from"./index-BrapZYxY.js";import{_ as M}from"./index-CVt7A2K-.js";import{A as lt}from"./arrow-left-YyXXM2dU.js";import{S as L}from"./star-DdQOHXA9.js";import{H as ct}from"./heart-7zeck1Uh.js";import{T as A}from"./trash-2-B7MAuCon.js";import{P as V}from"./plus-D--wltrC.js";import{_ as dt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as ut,_ as mt}from"./CardTitle.vue_vue_type_script_setup_true_lang-DuRW2HGp.js";import{C as H}from"./credit-card-9K74hJGo.js";import{S as pt}from"./shield-B2-PHcil.js";import"./AvatarFallback.vue_vue_type_script_setup_true_lang-Dht7uqjh.js";import"./useForwardExpose-BQPLfNwB.js";import"./index-CcgqDx5H.js";import"./createContext-Bi0Gw4MR.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-BTLyLvfZ.js";import"./house-DBR-gnoZ.js";import"./chevron-right-wp2OarNp.js";const ft={key:0,class:"space-y-4 mb-6"},vt={class:"p-4"},gt={class:"flex items-center justify-between"},ht={class:"flex items-center space-x-2"},xt=["onClick"],_t=z({__name:"FlashMessages",props:{dismissible:{type:Boolean,default:!0}},setup(r){const x=W(),o=j(new Set),y=k(()=>{const u=x.props.flash;return["success","error","warning","info"].filter(m=>u?.[m]&&!o.value.has(m)).map(m=>({type:m,message:u[m],id:`${m}-${Date.now()}`}))}),d=u=>{const _={success:{icon:it,bgClass:"bg-primary/10",borderClass:"border-primary/20",iconClass:"text-primary",textClass:"text-primary-foreground"},error:{icon:nt,bgClass:"bg-destructive/10",borderClass:"border-destructive/20",iconClass:"text-destructive",textClass:"text-destructive"},warning:{icon:rt,bgClass:"bg-warning/10",borderClass:"border-warning/20",iconClass:"text-warning",textClass:"text-warning"},info:{icon:ot,bgClass:"bg-secondary/10",borderClass:"border-secondary/20",iconClass:"text-secondary",textClass:"text-secondary"}};return _[u]||_.info},p=u=>{o.value.add(u)};return(u,_)=>y.value.length>0?(c(),h("div",ft,[(c(!0),h(U,null,R(y.value,m=>(c(),h("div",{key:m.id,class:E(`${d(m.type).borderClass} ${d(m.type).bgClass} border rounded-lg`)},[t("div",vt,[t("div",gt,[t("div",ht,[(c(),Q(G(d(m.type).icon),{class:E(`h-5 w-5 ${d(m.type).iconClass}`)},null,8,["class"])),t("p",{class:E(`text-sm font-medium ${d(m.type).textClass}`)},v(m.message),3)]),r.dismissible?(c(),h("button",{key:0,onClick:S=>p(m.type),class:E(`${d(m.type).iconClass} hover:opacity-70`)},[a(s(st),{class:"h-4 w-4"})],10,xt)):C("",!0)])])],2))),128))])):C("",!0)}}),yt={class:"flex items-center justify-between mb-8"},bt={class:"text-3xl font-bold flex items-center space-x-2"},Ct=z({__name:"CartPageHeader",props:{itemCount:{},isEmpty:{type:Boolean}},setup(r){return(x,o)=>(c(),h("div",yt,[t("h1",bt,[a(s(T),{class:"h-8 w-8"}),o[0]||(o[0]=t("span",null,"Shopping Cart",-1)),r.isEmpty?C("",!0):(c(),Q(s(M),{key:0,variant:"outline"},{default:g(()=>[I(v(r.itemCount)+" item"+v(r.itemCount!==1?"s":""),1)]),_:1}))]),a(s($),{variant:"outline",as:"a",href:"/products",class:"flex items-center space-x-2"},{default:g(()=>[a(s(lt),{class:"h-4 w-4"}),o[1]||(o[1]=t("span",null,"Continue Shopping",-1))]),_:1})]))}}),$t={class:"w-32 h-32 bg-gradient-to-br from-muted to-muted/60 rounded-full flex items-center justify-center mx-auto mb-8 shadow-inner"},kt={class:"flex flex-col sm:flex-row gap-4 justify-center"},wt={class:"mt-12 grid grid-cols-1 md:grid-cols-3 gap-6 max-w-2xl mx-auto"},It={class:"text-center p-4"},St={class:"w-12 h-12 bg-primary/20 rounded-full flex items-center justify-center mx-auto mb-3"},qt={class:"text-center p-4"},jt={class:"w-12 h-12 bg-destructive/20 rounded-full flex items-center justify-center mx-auto mb-3"},zt={class:"text-center p-4"},Et={class:"w-12 h-12 bg-secondary/20 rounded-full flex items-center justify-center mx-auto mb-3"},Qt=z({__name:"EmptyCart",props:{className:{default:""}},setup(r){return(x,o)=>(c(),h("div",{class:E(`text-center py-16 ${r.className}`)},[t("div",$t,[a(s(T),{class:"h-16 w-16 text-muted-foreground"})]),o[8]||(o[8]=t("h2",{class:"text-3xl font-bold mb-3"},"Your cart is empty",-1)),o[9]||(o[9]=t("p",{class:"text-muted-foreground mb-8 max-w-md mx-auto"}," Looks like you haven't added anything to your cart yet. Start exploring our amazing products! ",-1)),t("div",kt,[a(s($),{as:"a",href:"/products",size:"lg",class:"min-w-48"},{default:g(()=>[a(s(T),{class:"h-5 w-5 mr-2"}),o[0]||(o[0]=I(" Start Shopping ",-1))]),_:1}),a(s($),{variant:"outline",as:"a",href:"/products?featured=true",size:"lg"},{default:g(()=>[a(s(L),{class:"h-5 w-5 mr-2"}),o[1]||(o[1]=I(" View Featured Products ",-1))]),_:1})]),t("div",wt,[t("div",It,[t("div",St,[a(s(T),{class:"h-6 w-6 text-primary"})]),o[2]||(o[2]=t("h3",{class:"font-semibold mb-1"},"Browse Products",-1)),o[3]||(o[3]=t("p",{class:"text-sm text-muted-foreground"},"Discover our wide range of quality products",-1))]),t("div",qt,[t("div",jt,[a(s(ct),{class:"h-6 w-6 text-destructive"})]),o[4]||(o[4]=t("h3",{class:"font-semibold mb-1"},"Check Wishlist",-1)),o[5]||(o[5]=t("p",{class:"text-sm text-muted-foreground"},"Items you've saved for later",-1))]),t("div",zt,[t("div",Et,[a(s(L),{class:"h-6 w-6 text-secondary"})]),o[6]||(o[6]=t("h3",{class:"font-semibold mb-1"},"Featured Items",-1)),o[7]||(o[7]=t("p",{class:"text-sm text-muted-foreground"},"Our handpicked recommendations",-1))])])],2))}}),Tt={class:"lg:col-span-2 space-y-4"},Ft={class:"flex justify-between items-center"},Pt={class:"text-sm text-muted-foreground"},Nt={class:"p-6 flex items-center space-x-4"},Bt={class:"flex-shrink-0"},At=["src","alt"],Dt={class:"flex-grow min-w-0"},Mt={class:"font-semibold text-lg mb-1"},Ot=["href"],Lt={class:"text-muted-foreground text-sm mb-2"},Vt={key:0,class:"text-sm text-muted-foreground space-y-1 mb-2"},Ht={key:0,class:"flex items-center gap-2"},Ut={class:"flex items-center gap-1"},Rt={key:1,class:"flex items-center gap-2"},Xt={key:2,class:"text-xs text-gray-500"},Yt={class:"flex space-x-2 mb-2"},Kt={class:"sm:hidden mt-4 flex items-center justify-between"},Wt={class:"flex flex-col"},Gt={class:"text-lg font-bold text-primary"},Jt={key:0,class:"text-sm text-muted-foreground line-through"},Zt={class:"flex items-center space-x-2"},te={class:"flex items-center border rounded-md"},ee=["value","onInput","disabled"],se={class:"hidden sm:block text-right min-w-0"},ae={class:"text-lg font-bold text-primary"},oe={key:0,class:"text-sm text-muted-foreground line-through"},re={class:"hidden sm:flex items-center border rounded-md"},ne=["value","onInput","disabled"],ie={class:"hidden sm:block text-right min-w-0"},le={class:"text-lg font-bold"},ce={key:0,class:"text-xs text-muted-foreground"},de={class:"hidden sm:block"},ue=z({__name:"CartItemsList",props:{cartItems:{},quantities:{},updatingItems:{}},emits:["incrementQuantity","decrementQuantity","updateQuantity","removeItem","clearCart"],setup(r,{emit:x}){const o=r,y=x,d=j({});D(()=>o.cartItems,n=>{n.forEach(i=>{d.value[i.id]||(d.value[i.id]=o.quantities[i.id]||i.quantity||1)})},{immediate:!0}),D(()=>o.quantities,n=>{Object.keys(n).forEach(i=>{const e=parseInt(i);n[e]!==void 0&&(d.value[e]=n[e])})},{deep:!0});const p=n=>parseFloat(n.toString()).toFixed(2),u=n=>d.value[n.id]||n.quantity||1,_=(n,i)=>{const e=i.target,w=Math.max(1,parseInt(e.value)||1);d.value[n]=w;const b=o.cartItems.find(N=>N.id===n),P=o.quantities[n]||(b?b.quantity:1);w!==P&&y("updateQuantity",n,w)},m=n=>{const i=u(o.cartItems.find(e=>e.id===n));d.value[n]=i+1,y("incrementQuantity",n)},S=n=>{const i=u(o.cartItems.find(e=>e.id===n));i>1&&(d.value[n]=i-1,y("decrementQuantity",n))},F=n=>{const i=u(n);return n.price*i};return(n,i)=>(c(),h("div",Tt,[t("div",Ft,[t("p",Pt,v(r.cartItems.length)+" item"+v(r.cartItems.length>1?"s":"")+" in your cart ",1),a(s($),{variant:"outline",size:"sm",onClick:i[0]||(i[0]=e=>y("clearCart")),class:"text-destructive hover:text-destructive"},{default:g(()=>[a(s(A),{class:"h-4 w-4 mr-2"}),i[1]||(i[1]=I(" Clear All Items ",-1))]),_:1})]),a(s(X),null,{default:g(()=>[a(s(Y),{class:"p-0"},{default:g(()=>[(c(!0),h(U,null,R(r.cartItems,(e,w)=>(c(),h("div",{key:e.id,class:"border-b last:border-b-0"},[t("div",Nt,[t("div",Bt,[t("img",{src:e.product?.image||e.image||"/placeholder-product.jpg",alt:e.product?.name||e.name,class:"w-20 h-20 object-cover rounded-lg border"},null,8,At)]),t("div",Dt,[t("h3",Mt,[t("a",{href:`/products/${e.product?.slug||e.slug}`,class:"hover:text-primary transition-colors"},v(e.product?.name||e.name),9,Ot)]),t("p",Lt,v(e.product?.category?.name||e.category?.name||"Uncategorized"),1),e.variant_display?.has_variant?(c(),h("div",Vt,[e.variant_display.color_name?(c(),h("div",Ht,[i[2]||(i[2]=t("span",{class:"font-medium"},"Color:",-1)),t("div",Ut,[t("div",{class:"w-4 h-4 rounded-full border border-gray-300",style:J({backgroundColor:e.variant_display.color_hex})},null,4),t("span",null,v(e.variant_display.color_name),1)])])):C("",!0),e.variant_display.size_name?(c(),h("div",Rt,[i[3]||(i[3]=t("span",{class:"font-medium"},"Size:",-1)),t("span",null,v(e.variant_display.size_name),1)])):C("",!0),e.variant_display.sku?(c(),h("div",Xt," SKU: "+v(e.variant_display.sku),1)):C("",!0)])):C("",!0),t("div",Yt,[e.product?.is_donatable?(c(),Q(s(M),{key:0,variant:"secondary",class:"text-xs"},{default:g(()=>[...i[4]||(i[4]=[I(" Donation Item ",-1)])]),_:1})):C("",!0),e.product?.stock!==void 0&&e.product.stock<10?(c(),Q(s(M),{key:1,variant:"outline",class:"text-xs text-orange-600"},{default:g(()=>[I(" Only "+v(e.product.stock)+" left ",1)]),_:2},1024)):C("",!0)]),t("div",Kt,[t("div",Wt,[t("span",Gt," $"+v(p(e.price)),1),e.original_price&&e.original_price>e.price?(c(),h("span",Jt," $"+v(p(e.original_price)),1)):C("",!0)]),t("div",Zt,[t("div",te,[a(s($),{size:"sm",variant:"ghost",onClick:b=>S(e.id),disabled:r.updatingItems.has(e.id)||u(e)<=1,class:"h-8 w-8 p-0"},{default:g(()=>[a(s(O),{class:"h-3 w-3"})]),_:1},8,["onClick","disabled"]),t("input",{value:u(e),onInput:b=>_(e.id,b),disabled:r.updatingItems.has(e.id),class:"h-8 w-12 text-center border-0 text-sm bg-transparent focus:outline-none",type:"number",min:"1",max:"99"},null,40,ee),a(s($),{size:"sm",variant:"ghost",onClick:b=>m(e.id),disabled:r.updatingItems.has(e.id),class:"h-8 w-8 p-0"},{default:g(()=>[a(s(V),{class:"h-3 w-3"})]),_:1},8,["onClick","disabled"])]),a(s($),{size:"sm",variant:"ghost",onClick:b=>y("removeItem",e.id),class:"text-destructive hover:text-destructive h-8 w-8 p-0"},{default:g(()=>[a(s(A),{class:"h-3 w-3"})]),_:1},8,["onClick"])])])]),t("div",se,[t("div",ae," $"+v(p(e.price)),1),e.original_price&&e.original_price>e.price?(c(),h("div",oe," $"+v(p(e.original_price)),1)):C("",!0)]),t("div",re,[a(s($),{size:"sm",variant:"ghost",onClick:b=>S(e.id),disabled:r.updatingItems.has(e.id)||u(e)<=1,class:"h-10 w-10 p-0"},{default:g(()=>[a(s(O),{class:"h-4 w-4"})]),_:1},8,["onClick","disabled"]),t("input",{value:u(e),onInput:b=>_(e.id,b),disabled:r.updatingItems.has(e.id),class:"h-10 w-16 text-center border-0 bg-transparent focus:outline-none",type:"number",min:"1",max:"99"},null,40,ne),a(s($),{size:"sm",variant:"ghost",onClick:b=>m(e.id),disabled:r.updatingItems.has(e.id),class:"h-10 w-10 p-0"},{default:g(()=>[a(s(V),{class:"h-4 w-4"})]),_:1},8,["onClick","disabled"])]),t("div",ie,[t("div",le," $"+v(p(F(e))),1),r.updatingItems.has(e.id)?(c(),h("div",ce," Updating... ")):C("",!0)]),t("div",de,[a(s($),{size:"sm",variant:"ghost",onClick:b=>y("removeItem",e.id),class:"text-destructive hover:text-destructive",title:"Remove item"},{default:g(()=>[a(s(A),{class:"h-4 w-4"})]),_:1},8,["onClick"])])])]))),128))]),_:1})]),_:1})]))}}),me=dt(ue,[["__scopeId","data-v-2abad0a7"]]),pe={class:"lg:col-span-1"},fe={class:"sticky top-24 space-y-6"},ve={class:"flex justify-between text-base"},ge={class:"font-medium"},he={class:"flex justify-between text-xl font-bold"},xe={class:"text-primary"},_e={key:0,class:"text-xs text-center text-muted-foreground"},ye={class:"flex items-center justify-center space-x-2 text-xs text-muted-foreground mt-4 p-3 bg-muted/50 rounded-lg"},be=z({__name:"OrderSummary",props:{subtotal:{},shipping:{},total:{},itemCount:{},user:{},updatingItems:{}},emits:["proceedToCheckout","applyPromoCode"],setup(r,{emit:x}){const o=r,y=x;j(""),j(!1),k(()=>o.shipping===0?100:Math.min(o.subtotal/50*100,100)),k(()=>Math.max(50-o.subtotal,0));const d=u=>parseFloat(u.toString()).toFixed(2),p=()=>{y("proceedToCheckout")};return(u,_)=>(c(),h("div",pe,[t("div",fe,[a(s(X),null,{default:g(()=>[a(s(ut),null,{default:g(()=>[a(s(mt),{class:"flex items-center space-x-2"},{default:g(()=>[a(s(H),{class:"h-5 w-5"}),_[0]||(_[0]=t("span",null,"Order Summary",-1))]),_:1})]),_:1}),a(s(Y),{class:"space-y-4"},{default:g(()=>[t("div",ve,[t("span",null,"Subtotal ("+v(r.itemCount)+" items)",1),t("span",ge,"$"+v(d(r.subtotal)),1)]),a(s(at)),t("div",he,[_[1]||(_[1]=t("span",null,"Total",-1)),t("span",xe,"$"+v(d(r.total)),1)]),a(s($),{onClick:p,size:"lg",class:"w-full mt-6",disabled:r.updatingItems.size>0},{default:g(()=>[a(s(H),{class:"h-4 w-4 mr-2"}),I(" "+v(r.user?"Proceed to Checkout":"Login & Checkout"),1)]),_:1},8,["disabled"]),r.user?C("",!0):(c(),h("p",_e," You'll be redirected to login first ")),t("div",ye,[a(s(pt),{class:"h-3 w-3"}),_[2]||(_[2]=t("span",null,"256-bit SSL Secure Checkout",-1))])]),_:1})]),_:1})])]))}}),Ce={class:"min-h-screen bg-background text-foreground"},$e={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ke={class:"text-muted-foreground"},we={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Ie={class:"bg-card text-card-foreground p-6 rounded-lg border border-border lg:col-span-2"},Se={class:"bg-card text-card-foreground p-6 rounded-lg border border-border"},ts=z({__name:"Cart",props:{cart:{type:Object,default:null},categories:{type:Array,default:()=>[]},auth:{type:Object,default:()=>({})},settings:{type:Object,default:()=>({})}},setup(r){const x=k(()=>r.cart?.items||[]),o=r.settings.site_name||"Elegant Store",y=r.auth.user,d=j(new Set),p=j({});D(x,l=>{l.forEach(f=>{p.value[f.id]||(p.value[f.id]=f.quantity)})},{immediate:!0});const u=k(()=>x.value.reduce((l,f)=>{const B=p.value[f.id]||f.quantity;return l+parseFloat(f.price||0)*B},0)),_=k(()=>u.value>50?0:9.99),m=k(()=>u.value),S=k(()=>x.value.length===0),F=[{label:"Home",href:"/"},{label:"Shopping Cart",isActive:!0}],n=(l,f)=>{if(f<1){w(l);return}f>99&&(f=99),p.value[l]=f,d.value.add(l),setTimeout(()=>{q.patch(`/cart/update/${l}`,{quantity:f},{preserveState:!0,preserveScroll:!0,onFinish:()=>{d.value.delete(l)},onError:B=>{console.error("Failed to update quantity:",B),p.value[l]=x.value.find(K=>K.id===l)?.quantity||1,d.value.delete(l)}})},500)},i=l=>{const f=p.value[l]||1;n(l,f+1)},e=l=>{const f=p.value[l]||1;n(l,f-1)},w=l=>{confirm("Remove this item from your cart?")&&q.delete(`/cart/remove/${l}`,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{delete p.value[l]},onError:f=>{console.error("Failed to remove item:",f)}})},b=()=>{confirm("Are you sure you want to clear your entire cart?")&&q.delete("/cart/clear",{preserveState:!0,onSuccess:()=>{p.value={}},onError:l=>{console.error("Failed to clear cart:",l)}})},P=()=>{y?q.visit("/checkout"):q.visit("/login?redirect=checkout")},N=l=>{q.post("/cart/apply-promo",{code:l},{preserveState:!0,preserveScroll:!0})};return(l,f)=>(c(),h("div",Ce,[a(s(Z),{title:"Shopping Cart"}),a(tt,{categories:r.categories,cartItems:x.value,user:s(y),siteName:s(o),settings:r.settings},null,8,["categories","cartItems","user","siteName","settings"]),t("div",$e,[a(_t,{dismissible:!0}),t("div",ke,[a(et,{items:F})]),a(Ct,{itemCount:x.value.length,isEmpty:S.value},null,8,["itemCount","isEmpty"]),S.value?(c(),Q(Qt,{key:0})):(c(),h("div",we,[t("div",Ie,[a(me,{cartItems:x.value,quantities:p.value,updatingItems:d.value,onIncrementQuantity:i,onDecrementQuantity:e,onUpdateQuantity:n,onRemoveItem:w,onClearCart:b},null,8,["cartItems","quantities","updatingItems"])]),t("div",Se,[a(be,{subtotal:u.value,shipping:_.value,total:m.value,itemCount:x.value.length,user:s(y),updatingItems:d.value,onProceedToCheckout:P,onApplyPromoCode:N},null,8,["subtotal","shipping","total","itemCount","user","updatingItems"])])]))])]))}});export{ts as default};
